{"componentChunkName":"component---src-templates-blog-template-js","path":"/7sql-study/","result":{"data":{"cur":{"id":"3db8074d-c369-57fc-91f4-e6c2ca15a899","html":"<p>우테코 레벨1 sql 수업에서 두 sql 문제를 풀어야 했다. 첫번째 문제를 시행착오 끝에 풀고, 두번째 문제는 풀지 못했는데, 척척 푸는 크루들이 많은 걸 보고 sql 공부의 필요성을 절실하게 느꼈다. 그래서 일주일 간 매일 문제를 3개씩 푸는 스터디를 개설했다.</p>\n<!--more-->\n<h2 id=\"7sql\" style=\"position:relative;\"><a href=\"#7sql\" aria-label=\"7sql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7SQL</h2>\n<ul>\n<li>기간 : 1주일</li>\n<li>성격 : 각자 문제풀기</li>\n<li>인원 : 7명</li>\n<li>목표 : 기초적인 SQL 문법 익히기</li>\n<li>진행 방식 : 매일 한 사람씩 돌아가며 SQL 문제를 출제, 각자 풀고 출제자가 채점</li>\n</ul>\n<p><a href=\"https://magical-tick-0a1.notion.site/7SQL-bb6a8e0abbb640689927df169e9f44e7\">7SQL 노션 모집글</a>에 자세한 진행 방식이 적혀있으며. <a href=\"https://docs.google.com/spreadsheets/d/14MnjqCNlGi_l0y0YZA41P9VerDzmkr9nVZX8papIHxY/edit?usp=sharing\">7SQL 스프레드 시트</a>에서 진행 기록인 출제한 문제와 각자의 답안, 정답 여부를 볼 수 있다. 스터디가 끝나고 간단한 회고를 가졌다.</p>\n<h3 id=\"좋았던-점\" style=\"position:relative;\"><a href=\"#%EC%A2%8B%EC%95%98%EB%8D%98-%EC%A0%90\" aria-label=\"좋았던 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>좋았던 점</h3>\n<p>공통적으로 언급된 좋았던 점</p>\n<ul>\n<li>SQL 문법에 익숙해진다는 목표를 달성했다</li>\n<li>실력이 늘었다</li>\n</ul>\n<p>개별적으로 업급된 좋았던 점</p>\n<ul>\n<li>자율 참여였다</li>\n<li>시간을 많이 들이지 않고도 학습할 수 있는 방식이었다</li>\n</ul>\n<h3 id=\"아쉬웠던-점\" style=\"position:relative;\"><a href=\"#%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90\" aria-label=\"아쉬웠던 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아쉬웠던 점</h3>\n<p>공통적으로 언급된 아쉬웠던 점</p>\n<ul>\n<li>같은 테이블과 데이터를 사용\n<ul>\n<li>갈 수록 익숙해져 문제가 쉽게 느껴졌다</li>\n<li>중복되지 않는 문제를 내기 어려웠다</li>\n</ul>\n</li>\n<li>join문 부터 때려넣으면 해결되는 문제가 많았다</li>\n</ul>\n<h3 id=\"제안된-개선안\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%EC%95%88%EB%90%9C-%EA%B0%9C%EC%84%A0%EC%95%88\" aria-label=\"제안된 개선안 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>제안된 개선안</h3>\n<ul>\n<li>테이블과 데이터를 매일 바꾸거나, 여러 사이트를 이용한다</li>\n<li>프로그래머스, leetcode 등에 이미 수록된 SQL 문제를 함께 푼다</li>\n</ul>\n<h3 id=\"개인-회고\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9D%B8-%ED%9A%8C%EA%B3%A0\" aria-label=\"개인 회고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개인 회고</h3>\n<p>제한 조건을 꼼꼼히 읽지 않아 틀린 문제가 많았다. 문제를 제대로 읽자고 반성했다. 나만 틀린 게 있어서 부끄러웠다…<br>\n진행에 부담이 없었고 확실히 3문제라도 매일 풀다 보니 실력이 오르는 게 느껴져서 2회차를 해볼까 고민중이다. 청년다방에서 간단한 점심 회식을 했는데 즐거웠다. 슬랙에 공개적으로 모집해 오프라인에서 인사한 적 없던 크루인 <code class=\"language-text\">티키, 레오</code>를 스터디를 계기로 알게 되어서 좋았다.</p>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#7sql\">7SQL</a></p>\n<ul>\n<li><a href=\"#%EC%A2%8B%EC%95%98%EB%8D%98-%EC%A0%90\">좋았던 점</a></li>\n<li><a href=\"#%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90\">아쉬웠던 점</a></li>\n<li><a href=\"#%EC%A0%9C%EC%95%88%EB%90%9C-%EA%B0%9C%EC%84%A0%EC%95%88\">제안된 개선안</a></li>\n<li><a href=\"#%EA%B0%9C%EC%9D%B8-%ED%9A%8C%EA%B3%A0\">개인 회고</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"우테코 레벨1 sql 수업에서 두 sql 문제를 풀어야 했다. 첫번째 문제를 시행착오 끝에 풀고, 두번째 문제는 풀지 못했는데, 척척 푸는 크루들이 많은 걸 보고 sql 공부의 필요성을 절실하게 느꼈다. 그래서 일주일 간 매일 문제를 3개씩 푸는 스터디를 개설했다. 7SQL 기간 : 1주일 성격 : 각자 문제풀기 인원 : 7명 목표 : 기초적인 SQL 문법 익히기 진행 방식 : 매일 한 사람씩 돌아가며 SQL 문제를 출제, 각자 풀고 출제자가 채점 7SQL 노션 모집글에 자세한 진행 방식이 적혀있으며. 7SQL 스프레드 시트에서 진행 기록인 출제한 문제와 각자의 답안, 정답 여부를 볼 수 있다. 스터디가 끝나고 간단한 회고를 가졌다. 좋았던 점 공통적으로 언급된 좋았던 점 SQL 문법에 익숙해진다는 목표를 달성했다 실력이 늘었다 개별적으로 업급된 좋았던 점 자율 참여였다 시간을 많이 들이지 않고도 학습할 수 있는 방식이었다 아쉬웠던 점 공통적으로 언급된 아쉬웠던 점 같은 테이블과 …","frontmatter":{"date":"May 11, 2022","title":"7SQL 스터디 회고","categories":"우아한테크코스 회고","author":"써머","emoji":"headers/7sql-study.png"},"fields":{"slug":"/7sql-study/"}},"next":{"id":"bf171470-2404-5610-819e-35eec121459e","html":"<p><a href=\"https://github.com/woowacourse/jwp-chess/pull/474\">웹 체스 미션</a>을 진행하면서 <code class=\"language-text\">JdbcTemplate</code>을 이용해 DB에 접근하는 모든 클래스의 이름을 <code class=\"language-text\">Repository</code>라 지었다가 아래와 같은 코멘트를 받았다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVR42l2Pi46DIBRE+/9/uLtpq9UiqKiAj/iA00AfyfYmk0kmOnM4SVlwKc70k8OMjs3vBAJ7ODjwH/eE5N+KefxnWhcO7zmN1lJLhRAVUiqqSlLXDcZYjDF0usNaR98PWGtT3nU9/Utaa9qmZRgMIQROAOM0cb5cuRUll2tGlt9o2hZV17RapwHnHN579n3/p+M4Up4UC3XbUIl7InBuZJrmuJHW3h9HjwrB833LsuDGiXXbnoTbuqKU4uf3L1Fes5wsy7kLQZbniVZKSat73CAJx0J4DcaLQ4n0TRjDSBULRFUhKklR3inKMrlUinmeE2kkjEXh+YRP6fti4QO97s58P8S1oAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"review\"\n        title=\"\"\n        src=\"/static/7d45a01e5fa31ab021e3a57b70d173ea/37523/review1.png\"\n        srcset=\"/static/7d45a01e5fa31ab021e3a57b70d173ea/e9ff0/review1.png 180w,\n/static/7d45a01e5fa31ab021e3a57b70d173ea/f21e7/review1.png 360w,\n/static/7d45a01e5fa31ab021e3a57b70d173ea/37523/review1.png 720w,\n/static/7d45a01e5fa31ab021e3a57b70d173ea/302a4/review1.png 1080w,\n/static/7d45a01e5fa31ab021e3a57b70d173ea/07a9c/review1.png 1440w,\n/static/7d45a01e5fa31ab021e3a57b70d173ea/cb425/review1.png 1678w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvklEQVR42p2QbQ/CIAyE9/9/ozGROTejvJXBMAucuU4/m0jStBR6PMdwOZ9QtgqRhPp64Z/Ve8e2VbTWMNymCeN1wnK/w1qHECJiFFjn4EOA9wEiojnECElJ+yEce95/Wgvn/SFYyoZ5WVBK0SDpumbknHU4pRU5FxVlzTPWPGNEEdR60KlgSgnzvMCMVxgz4mIMHo+nipOUIswk5DAfJBl7pGPs+67WW+sYSPJFZqZVp+HVGvv+Y+fXP7be8QaCJYIEWXxv+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"review\"\n        title=\"\"\n        src=\"/static/f688b607d477ee408b350da803beb668/37523/review2.png\"\n        srcset=\"/static/f688b607d477ee408b350da803beb668/e9ff0/review2.png 180w,\n/static/f688b607d477ee408b350da803beb668/f21e7/review2.png 360w,\n/static/f688b607d477ee408b350da803beb668/37523/review2.png 720w,\n/static/f688b607d477ee408b350da803beb668/302a4/review2.png 1080w,\n/static/f688b607d477ee408b350da803beb668/07a9c/review2.png 1440w,\n/static/f688b607d477ee408b350da803beb668/9eaa0/review2.png 1676w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>코멘트를 받기 전까지 <code class=\"language-text\">DAO</code>와 <code class=\"language-text\">Repository</code>가 이름만 다른 같은 개념이라 생각했다. 그래서 이 둘의 차이에 대해 알아보았다.</p>\n<h2 id=\"repository-문서\" style=\"position:relative;\"><a href=\"#repository-%EB%AC%B8%EC%84%9C\" aria-label=\"repository 문서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@Repository 문서</h2>\n<p>스프링 <code class=\"language-text\">@Repository</code> 어노테이션 자바 문서에는 다음과 같이 적혀 있다.  <!--more--></p>\n<blockquote>\n<p>적용 된 클래스가 <em>Repository</em> 임을 나타냅니다. 이는 <a href=\"http://book.naver.com/bookdb/book_detail.naver?bid=6680572\">도메인 주도 설계(에릭 에반스)</a>에서 정의한 <em>저장소를 캡슐화하고, 저장하고, 검색하여 객체의 컬렉션처럼 다루는 메커니즘</em>을 뜻합니다.<br>\n<em>Data Access Object</em>와 같은 전통적인 자바 EE 패턴을 사용하는 팀도 이 스테레오타입을 <em>DAO</em> 클래스에 적용할 수 있습니다. 다만 그 전에 <em>Data Access Object</em>와 <em>DDD-style repositories</em>의 차이를 이해하는 것이 좋습니다. 이 어노테이션은 다목적 스테레오타입이고 개별 팀은 자신들만의 축소된 의미에 맞춰 적절하게 사용하면 됩니다.<br>\n어노테이트된 클래스는 <code class=\"language-text\">PersistenceExceptionTranslationPostProcessor</code>와 결합 되었을 때, 스프링 <code class=\"language-text\">DataAccessException</code> 변환을 사용할 수 있게 됩니다. 또한 이 주석은 해당 클래스가 전체 어플리케이션 구조에서 tooling, aspects(마땅한 번역을 못 찾아 원어로 대체합니다) 등의 기능을 한다고 표기하는 것이기도 합니다.<br>\n스프링 2.5에서 이 어노테이션은 <code class=\"language-text\">@Component</code>의 특정형으로써도 기능하는데, 해당 클래스가 클래스 경로 스캐닝에서 자동 탐지(autodetected)되도록 합니다.</p>\n</blockquote>\n<p>이 문서에서 <u>DAO와 Repository는 다른 개념이며, 두 개념을 확실히 구분지어 인지</u>하는 것이 중요함을 알 수 있었다.</p>\n<h2 id=\"dao--repository\" style=\"position:relative;\"><a href=\"#dao--repository\" aria-label=\"dao  repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAO / Repository</h2>\n<p>둘의 차이에 대해 알아보기에 앞서 간단한 도메인을 떠올려보자. 아래 각 클래스는 어떤 웹게임 서비스의 <code class=\"language-text\">플레이어, 게임</code>을 나타낸다. 도메인 규칙은 다음과 같다.</p>\n<ul>\n<li>플레이어는 한번에 한 게임에 참가 가능하다</li>\n<li>게임은 플레이어의 일급 컬렉션을 갖는다</li>\n<li>Dice는 DB에 저장할 값이 없다</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> win<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> lose<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EasyGame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">Dice</span> dice<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">Players</span> players<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> stage<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p>DB에 생성할 테이블과 저장해야 하는 정보는 다음과 같다</p>\n<ul>\n<li>Player\n<ul>\n<li>이름</li>\n<li>승패 횟수</li>\n<li>게임 키</li>\n</ul>\n</li>\n<li>Game\n<ul>\n<li>키</li>\n<li>진행 스테이지</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dao-data-access-object\" style=\"position:relative;\"><a href=\"#dao-data-access-object\" aria-label=\"dao data access object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAO (Data Access Object)</h3>\n<p><code class=\"language-text\">DAO</code>는 추상 API를 통해 어플리케이션/비즈니스 계층과 퍼시스턴스 계층을 분리하기 위해 만들어진 패턴이다. 한 테이블에 대한 <u>저수준 CRUD</u> 책임을 갖기에, 한 테이블 당 하나씩 만들어진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">PlayerDao</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Player</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Player</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Player</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByGameId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Player</span> player<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Player</span> player<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">GameDao</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Game</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Game</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Game</span> game<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Game</span> game<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"repository\" style=\"position:relative;\"><a href=\"#repository\" aria-label=\"repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Repository</h3>\n<p>이제 DB에서 값을 읽어 <code class=\"language-text\">EasyGame</code>을 복원하려면 어떻게 해야 할까?</p>\n<ol>\n<li>게임의 키값인 <code class=\"language-text\">id</code>로 game 테이블을 조회하고</li>\n<li>player 테이블에서 <code class=\"language-text\">game_id</code>가 일치하는 플레이어를 조회하고</li>\n<li>두 결과 객체를 통해 <code class=\"language-text\">EasyGame 도메인 객체</code>를 만들어야 한다</li>\n</ol>\n<p><code class=\"language-text\">EasyGameRepository</code>에서 두 Dao를 갖게 하고, 두 Dao를 이용해 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EasyGameRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">PlayerDao</span> playerDao<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">GameDao</span> gameDao<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">EasyGame</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> gameId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Game</span> game <span class=\"token operator\">=</span> gameDao<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>gameId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Players</span> players <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Players</span><span class=\"token punctuation\">(</span>playerDao<span class=\"token punctuation\">.</span><span class=\"token function\">findByGameId</span><span class=\"token punctuation\">(</span>gameId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EasyGame</span><span class=\"token punctuation\">(</span>game<span class=\"token punctuation\">,</span> players<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이러면 <code class=\"language-text\">Service</code>에서 <code class=\"language-text\">EasyGame</code> 도메인 객체를 만들기 위해 어느 테이블를 다룰지 몰라도 되고, <code class=\"language-text\">EasyGame</code> 도메인을 책임지는 <code class=\"language-text\">EasyGameRepository</code>를 통해 호출할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EasyGameService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">EasyGameRepository</span> easyGameRepository<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">EasyGame</span> <span class=\"token function\">lodeGame</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> gameId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> easyGameRepository<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>gameId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"http://book.naver.com/bookdb/book_detail.naver?bid=6680572\">도메인 주도 설계(DDD)</a>에는 레포지토리를 이렇게 설명한다.</p>\n<blockquote>\n<p>전역적인 접근이 필요한 각 객체 타입에 대해 메모리상에 해당 타입의 객체로 구성된 컬렉션이 있다는 착각을 불러 일으키는 객체를 만든다. 잘 알려진 전역 인터페이스를 토대로 한 접근 방법을 마련하라. 객체를 추가하고 제거하는 메서드를 제공하고, 이 메서드가 실제로 데이터 저장소에 데이터를 삽입하고 데이터 저장소에서 제거하는 연산을 캡슐화하게 하라. 특정한 기준으로 객체를 선택하고 속성값이 특정 기준을 만족하는 완전히 인스턴스화된 객체나 객체 컬렉션을 반환하는 메서드를 제공함으로써 실제 저장소와 질의 기술을 캡슐화하라.</p>\n</blockquote>\n<p>DDD를 아직 모르는 입장이라 나는 <strong>캡슐화</strong>에 주목했다. <code class=\"language-text\">service</code>에서 <code class=\"language-text\">DAO</code>를 바로 이용했다면, 아래와 같은 코드가 되어 <code class=\"language-text\">service</code>가 <code class=\"language-text\">EasyGame</code>을 만들기 위해 <strong>어떤 DB에 접근해야 하는지가 그대로 드러나게 된다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EasyGameService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">PlayerDao</span> playerDao<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">GameDao</span> gameDao<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">EasyGame</span> <span class=\"token function\">lodeGame</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> gameId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Player</span><span class=\"token punctuation\">></span></span> players <span class=\"token operator\">=</span> <span class=\"token function\">findByGameId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> gameId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Game</span> game <span class=\"token operator\">=</span> gameDao<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>gameId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EasyGame</span><span class=\"token punctuation\">(</span>game<span class=\"token punctuation\">,</span> players<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>따라서 <strong>하나의 유기체처럼 동작하는 객체마다 일반적으로 Repository 한 개</strong>가 만들어지며, 하나의 <code class=\"language-text\">Repository</code>에서 여러 <code class=\"language-text\">DAO</code>를 가질 수 있다. DDD에서 이 하나의 유기체처럼 동작하는 객체를 <code class=\"language-text\">Aggregate/애그리거트</code>라고 지칭한다.</p>\n<p>별개로 궁금했던 부분인데, 앞선 예시에서 <code class=\"language-text\">Player</code>도 하나의 애그리거트로 볼 수 있다. 그렇다면 플레이어 한 명의 정보를 불러오고 싶을 때, <code class=\"language-text\">PlayerRepository</code>와 <code class=\"language-text\">PlayerDao</code>는 다음과 같이 될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayerRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">PlayerDao</span> playerDao<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Player</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> playerDao<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayerDao</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Player</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> \n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이럴 경우 단순히 클래스만 하나 더 거쳐오는 것(리뷰어 핀은 <code class=\"language-text\">by-pass</code>라고 칭했다)처럼 보여도, <code class=\"language-text\">Player</code>가 하나의 애그리거트에 해당되기에 <code class=\"language-text\">PlayerRepository</code>를 사용하는 것이 맞다. 물론 이는 레포지토리와 DAO와 둘다 존재할 때의 얘기며, 내부 구현은 달라질 수 있다. 중요한 것은 <code class=\"language-text\">PlayerRepository</code>가 마치 <code class=\"language-text\">Player 컬렉션</code>을 다루는 것 처럼 <strong>캡슐화</strong>하고 있다는 것이다.</p>\n<h3 id=\"dao와-repository의-차이\" style=\"position:relative;\"><a href=\"#dao%EC%99%80-repository%EC%9D%98-%EC%B0%A8%EC%9D%B4\" aria-label=\"dao와 repository의 차이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAO와 Repository의 차이</h3>\n<p>둘의 차이에 대해선 <a href=\"https://github.com/msbaek/memo/blob/master/dao-vs-repository.md\">깃헙 @msbaek - DAO와 REPOSITORY 논쟁</a>에 잘 정리되어 있다. 정리하던 도중 더 좋은 글을 찾아서 링크로 대체한다.</p>\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 자료</h2>\n<ul>\n<li><a href=\"https://johngrib.github.io/wiki/pattern/repository/\">기계인간 John Grib - 저장소 패턴(Repository Pattern)</a></li>\n<li><a href=\"https://github.com/msbaek/memo/blob/master/dao-vs-repository.md\">깃헙 @msbaek - DAO와 REPOSITORY 논쟁</a></li>\n<li><a href=\"https://github.com/woowacourse/jwp-chess/pull/474\">리뷰어 핀(@lalize)의 코멘트</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#repository-%EB%AC%B8%EC%84%9C\">@Repository 문서</a></p>\n</li>\n<li>\n<p><a href=\"#dao--repository\">DAO / Repository</a></p>\n<ul>\n<li><a href=\"#dao-data-access-object\">DAO (Data Access Object)</a></li>\n<li><a href=\"#repository\">Repository</a></li>\n<li><a href=\"#dao%EC%99%80-repository%EC%9D%98-%EC%B0%A8%EC%9D%B4\">DAO와 Repository의 차이</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 07, 2022","title":"DAO 와 Repository","categories":"etc","author":"써머","emoji":"headers/dao-and-repository.png"},"fields":{"slug":"/dao-and-repository/"}},"prev":{"id":"d16593f5-9d20-5206-a421-08cb318b1a44","html":"<p>우테코 레벨1 웹체스 미션에서 일급 컬렉션에서 특정 요소를 <code class=\"language-text\">Optional&lt;T></code>로 꺼내는 메서드를 작성했다. 그런데 해당 요소를 그냥 꺼내는 메서드가 따로 있었고, 이름이 겹치고 싶지 않아 생각하다 <code class=\"language-text\">find</code>를 붙였다. 레벨2에서 DB를 본격적으로 사용하며 <code class=\"language-text\">Dao</code>객체에서 데이터 조회를 할 때, <code class=\"language-text\">find</code>와 <code class=\"language-text\">get</code> 중 무엇을 쓸지 고민했다. <code class=\"language-text\">get</code>은 <code class=\"language-text\">getter</code>처럼 느껴져서 <code class=\"language-text\">find</code>를 사용했는데, <code class=\"language-text\">DDD</code>의 <code class=\"language-text\">Repository</code> 패턴을 보니 <code class=\"language-text\">get</code>을 쓰는 경우가 많았다. 그래서 둘의 차이를 찾아봤다.</p>\n<!--more-->\n<h2 id=\"find-vs-get\" style=\"position:relative;\"><a href=\"#find-vs-get\" aria-label=\"find vs get permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>find vs get</h2>\n<p><a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\">스프링 Data의 <code class=\"language-text\">CRUD repository</code></a> 인터페이스는 <code class=\"language-text\">Optional&lt;T></code>를 반환한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CrudRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>ID<span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ID</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Iterable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>반면 같은 스프링 Data의 <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\">JPA repository</a>에서는 T를 반환한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>ID<span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token class-name\">T</span> <span class=\"token function\">getOne</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ID</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">CrudRepository</code>는 찾는 값이 없을 경우 <code class=\"language-text\">빈 Optional</code>을, <code class=\"language-text\">JpaRepository</code>는 찾는 값이 없을 경우 <code class=\"language-text\">예외를 발생</code>한다는 차이가 있다. 여기서 볼 수 있듯이 일반적으로 반환 값이 없을 수 있는 경우 <code class=\"language-text\">find</code>을, 항상 있어야 하는 경우 <code class=\"language-text\">get</code>을 붙인다. <code class=\"language-text\">find</code>를 쓰면 api 사용자에게 이름을 통해 반환값이 없을 수 있음을 알려 줄 수 있는 것이다.<br>\n반면, 반환형이 <code class=\"language-text\">List</code>같은 컬렉션이라면 값이 없어도 <code class=\"language-text\">null</code>이 아닌 <code class=\"language-text\">빈 컬렉션</code>을 반환하면 된다.</p>\n<h2 id=\"optional\" style=\"position:relative;\"><a href=\"#optional\" aria-label=\"optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Optional</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADvklEQVR42iWO71PSdwDHv0+3s2tlq3bVTGNaJqFIhKCIIAgIpALy5cdXEBAFRPiC4C8yMdSwsrZr3W7tNtd5e7K7/Ymf16568H7wevB63Vs6f3Mo/v1wyj/v2qJVzmCfMDGiH6a/X4PZMkZho4KynMbjdeP2uDCNGbBax/D53BgMOrTa+9jtNuH1uinlc0L6++xQ/Pf7W3472hGuySf0D/RjeKxHP6rD758lnV0hkUxRqlRZSqWYsFoYGRlienqSUGge14yDaDwuQosygbl5IV38fCw+nb0g9tQltNoHjOgf8XBoAJ1uiAeD/TidDjIrOXKFIl7fLEND97+8DIbmiSsJotEw8/MBEY5EsdkdQvrz1XORiwbo7bklckqIvS0Vs8XInds3+ElzF6NRT1xRWM6sIMcVYsoSgbkAXp+HWk3l1/e/sJpbFj6/j0g0JqSt/JIYHOilr69HRP123r064kW7hWPaxqhhmImJMQKBWVKpFLFEgpV88etyGc7OXnN+/heKHBRP5/z4/LNCspkeie5rV7nb+6Pw2U0ctZp0Tl/S2KojRyMs53IkV1YIBINkC0UiskwkEia/muH9hw/88fEjwYBbzHjcOGecQrp1s1tcvtxF97WrwmoaZq9R4fT1KclknEq1wnazye6LE3bbJ+y1Diir68RiYdbX1/h0ccHLw30mLUah1WkJRSJCuvLdJdHV9S3Xb3wv+npvk1hws7Ozxc6zZ6iNOuFIiGgiRiqTQkkmkKOLKIrM6lqWk+M2J60mk5Pjore3B51OK6Tr3ZfFpa5v6L52RWg0PVj0AyjxELIcJrEUR16cZ8o2jtVqoVots7AQIJ1OUiqtEY8vEg4+ZTbgF3qDnnuaPiFpem6JOz/c4ObN6+L+wD1Mo1rGjcPYzKMMDmpwWo34PS7UWp3T4wMeDmqIRRd4vtdArals7e2TLZZFMBLF7rALSY1PCVWZRlWcYjsbYL8YYjPt51k+SCPjo5Ge5aAkc9LI0CpH2Ex7aNcUOltp9othXjfzvD2oiANVoZadE1I9aRDbKSPNrFk0s2aaWRNHJTsd1cWbuoeO6uawMMX+6gSHRTud2gytwhR72XHqS08oyyNUY3qxIetYCw4JaSM6KqqJxzRSY2InbWY3Y+agYKNT89CpujmuzHBUnuGk6uVl1Uun5qW94aJVdLC/ZvvssZk0CTVh5HNLKiwOi3JslGrisdhcMrK9bGI3a6Fdmua47OSo7ORw3fEl0C595fbGNO0NJ8/zU9STpi9uOWagpjwR/wP8njOhRaQ9FwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cat\"\n        title=\"\"\n        src=\"/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/37523/img.png\"\n        srcset=\"/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/e9ff0/img.png 180w,\n/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/f21e7/img.png 360w,\n/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/37523/img.png 720w,\n/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/5a190/img.png 800w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"text-align:center; font-style:italic; color:grey;\">대표적 Optional인 슈뢰딩거의 고양이</div>\n<p><code class=\"language-text\">Optional</code>에 대해 한 번 정리하려 했었는데, <code class=\"language-text\">find~</code> 메서드에서 <code class=\"language-text\">Optional</code>을 쓰는 김에 이펙티브 자바를 참고해 작성했다.</p>\n<h3 id=\"optional이란\" style=\"position:relative;\"><a href=\"#optional%EC%9D%B4%EB%9E%80\" aria-label=\"optional이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Optional이란</h3>\n<p><code class=\"language-text\">Optional&lt;T></code>은 null이 아닌 T 참조를 하나 담거나 아무것도 담지 않을 수 있는 클래스이다. 보통은 <code class=\"language-text\">T</code>를 반환해야 하지만 특정 조건에서는 아무것도 반환하지 않아야 할 때 <code class=\"language-text\">T</code>대신 <code class=\"language-text\">Optional&lt;T></code>를 반환하도록 선언하면 된다. <code class=\"language-text\">Optional</code>은 정적 팩토리 메서드로 생성할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">Optional.empty()</code> : 빈 옵셔널 생성</li>\n<li><code class=\"language-text\">Optional.of(T)</code> : T가 든 옵셔널 생성</li>\n<li><code class=\"language-text\">Optional.ofNullable(T)</code> : T가 든 옵셔널 생성, <code class=\"language-text\">null</code>값이 들어갈 수도 있을 때 사용</li>\n</ul>\n<p>그냥 <code class=\"language-text\">of(T)</code>와 <code class=\"language-text\">ofNullable(T)</code>를 구분해 사용하는 것이 중요하다. <code class=\"language-text\">Optional</code>을 쓰는데는 <code class=\"language-text\">NullPointerException</code> 체크의 번거로움을 생략하는 목적이 있는데, <code class=\"language-text\">of(T)</code>에 <code class=\"language-text\">null</code>을 넣으면 <code class=\"language-text\">NullPointerException</code>이 발생해 하나마나가 되기 때문이다.</p>\n<h3 id=\"효과적으로-사용하기\" style=\"position:relative;\"><a href=\"#%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"효과적으로 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>효과적으로 사용하기</h3>\n<p>처음 <code class=\"language-text\">Optional</code>을 알게 되었을 때는 <code class=\"language-text\">isPresent()</code>나 <code class=\"language-text\">isEmpty()</code>로 분기문을 만들어 처리했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>optionalPiece<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"해당 말은 존재하지 않습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그런데 <code class=\"language-text\">Optional</code>이 제공하는 메서드를 이용해서 효율적으로 처리할 수 있는 방법이 있었다. 위 예시처럼 분기문으로 처리하면 사실 try~catch로 예외처리 하는 것과 다를 바가 없다고 생각한다.</p>\n<ul>\n<li><code class=\"language-text\">orElse</code>로 기본값 정하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> optionalName<span class=\"token punctuation\">.</span><span class=\"token function\">orElse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"익명\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">orElseGet</code>으로 기본값 정하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> optionalName<span class=\"token punctuation\">.</span><span class=\"token function\">orElseGet</span><span class=\"token punctuation\">(</span><span class=\"token function\">generateRandomName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">orElse</code>에 메서드를 넣으면 <code class=\"language-text\">Optional</code>안에 실제로 값이 있건 없건 일단 실행되는 것에 유의해서 사용하자. <code class=\"language-text\">orElseGet</code>은 <code class=\"language-text\">Optional</code>에 값이 없어야만 실행된다.</p>\n<ul>\n<li><code class=\"language-text\">orElseThrow</code>로 예외 던지기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> optionalName<span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"주의사항\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\" aria-label=\"주의사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의사항</h3>\n<ul>\n<li>컬렉션, 스트림, 배열, 옵셔널 같은 컨테이너 타입을 옵셔널로 감싸기 금지</li>\n</ul>\n<p>그냥 빈 컬렉션이나 배열을 사용하는 것이 낫다.</p>\n<ul>\n<li>박싱된 기본 타입을 옵셔널로 다시 감싸기 금지</li>\n</ul>\n<p>값을 두 겹이나 감싸기 보다 <code class=\"language-text\">OptionalInt, OptionalLong, OptionalDouble</code>을 사용하자.</p>\n<ul>\n<li>컬렉션의 키, 값, 원소나 배열의 원소로 사용 금지</li>\n</ul>\n<p>복잡성만 높여서 혼란과 오류 가능성만 키운다.</p>\n<ul>\n<li>메서드 파라미터나 인스턴스 필드로 사용 금지</li>\n</ul>\n<p>메서드 내에서 옵셔널 분기 처리를 하는 건 생산성이 저하되며, 필드로 쓰기엔 선택형 반환값으로 설계되었기에 직렬화가 구현되지 않았다.</p>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li>이펙티브 자바 3판 : 아이템 55. 옵셔널 반환은 신중히 하라</li>\n<li><a href=\"https://stackoverflow.com/questions/31922866/why-should-java-8s-optional-not-be-used-in-arguments\">stackoverflow : Why shoud java 8’s Optional not be used in arguments</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#find-vs-get\">find vs get</a></p>\n</li>\n<li>\n<p><a href=\"#optional\">Optional</a></p>\n<ul>\n<li><a href=\"#optional%EC%9D%B4%EB%9E%80\">Optional이란</a></li>\n<li><a href=\"#%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">효과적으로 사용하기</a></li>\n<li><a href=\"#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\">주의사항</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 23, 2022","title":"Optional과 메서드 네이밍 find vs get","categories":"Java","author":"써머","emoji":"headers/optional-and-method-naming.png"},"fields":{"slug":"/optional-and-method-naming/"}},"site":{"siteMetadata":{"siteUrl":"https://hyewoncc.github.io","comments":{"utterances":{"repo":"hyewoncc/hyewoncc.github.io"}}}}},"pageContext":{"slug":"/7sql-study/","nextSlug":"/dao-and-repository/","prevSlug":"/optional-and-method-naming/"}},"staticQueryHashes":["1073350324","1956554647","2938748437","3350743975"],"slicesMap":{}}
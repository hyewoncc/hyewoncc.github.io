{"componentChunkName":"component---src-templates-category-template-js","path":"/posts/트러블슈팅","result":{"pageContext":{"currentCategory":"트러블슈팅","categories":["All","JPA","kotlin","Spring","트러블슈팅","회고","우아한테크코스","ETC","CS","Java","독서"],"edges":[{"node":{"id":"fa74bf94-c4c4-53ef-a3b5-e3dde0bc36d6","excerpt":"문제상황 서비스 배경지식 첫번째 참고 현재 개발중인 줍줍은 슬랙 무료 워크스페이스의 사라지는 메세지들을 대신 저장하고 보여주는 서비스다.\n메세지 저장을 위해 최초 어플리케이션 구동 시, 해당 워크스페이스에 속한 모든 회원 정보를 가져온다.\n이 역할을 라는 클래스의 안에 작성했다. 이유는 아래와 같았다.    어플리케이션이 구동하는 동안 발생하는 신규 가입, 탈퇴 이벤트는 실시간 반영이 된다 하지만 어플리케이션 최초 구동 전, 또는 업데이트 배포로 어플리케이션이 중지된 사이에 발생한 이벤트는 반영이 안된다 따라서 재구동 시 한 번 슬랙 API를 호출하여, 유저 정보를 업데이트한다 유저 정보를 메시지에서 참조하고 있어서 저장이 선행되어야 했다.\n또, 로그인 시 이 정보와  슬랙 로그인으로 받은 정보를 대조해서 자체 토큰을 발급하는 까닭도 있다. 두번째 참고 슬랙은 라는 이름으로 슬랙 API에 HTTP 요청을 보내고 응답을 받는 객체를 제공한다.\n그래서 슬랙 API 호출이 필요한 곳에서…","fields":{"slug":"/post-construct-profile/"},"frontmatter":{"categories":"Spring 트러블슈팅","title":"[Spring] @PostConstruct를 막아라","date":"August 23, 2022"}},"next":{"fields":{"slug":"/jpa-static-fixture-trouble/"}},"previous":{"fields":{"slug":"/jpa-is-new/"}}},{"node":{"id":"d8b36762-4fef-5be7-8a68-c557aed75585","excerpt":"문제상황 우테코 QNA 미션에서 상수로 선언된 엔티티 픽스쳐가 있었다. 레벨3 같은 팀 크루인 봄이 해당 미션을 진행하다 테스트가 터져 어쩌다보니 같이 원인을 찾게 되었다. 상황을 비슷하게 복구해보자면 이런 구성이었다.   원본 미션 코드에서는 픽스쳐가 로 별도 클래스에 선언되어 있었다. 그런데 테스트 클래스 하나에서만 사용되고 있어서 해당 클래스로 옮겼던 것 같다. 나도 픽스쳐를 옮겼다가, 평소 쓰는 방식대로 한다고 지웠었다. 어쨌든 와 는 의 단방향 연관관계였고, 는 를 통해 저장해주는 상태였다. 그러다 테스트가 터지며 의문의 에러메시지를 마주했다. org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [FK83S99F4KX8OIQM3RO0SASMPWW]; nested exception is org.hibernate.exception.Con…","fields":{"slug":"/jpa-static-fixture-trouble/"},"frontmatter":{"categories":"JPA 트러블슈팅","title":"[JPA] 상수 픽스쳐 사용 주의","date":"August 13, 2022"}},"next":{"fields":{"slug":"/wild-seed/"}},"previous":{"fields":{"slug":"/post-construct-profile/"}}},{"node":{"id":"75ab6283-c820-5191-ac78-8ff6b58e19f0","excerpt":"슬랙이 봇을 강퇴시켰어요 서버에서 슬랙 API를 호출하려면 발급받은 봇 토큰이 필요하다. 해당 정보를 기밀이라고 생각하지 않았는데… 애초에 봇에게 호출할 수 있는 API 제한이 있다 연결된 워크스페이스가 개발을 위해 생성된 줍줍 팀 워크스페이스다 라는 이유에서였다.  그래서 깃헙에 을 포함한 을 올려놨는데… 어느날 API 응답이 오지 않았다. 개발자 도구의 응답에는 이라는 에러 문구가 떴고, 분명 워크스페이스에 정상 추가했던 봇이 사라져 있었다.  슬랙이 봇을 강제 추방시킨 것이었다… 얼마간 잘 썼기에, 일정 주기로 공개 저장소들을 크롤링 해 한번에 정지시키는 게 아닐까 싶다. 설명서를 잘 읽자 슬랙 API에 들어가면 가 떡하니 명시되어 있다.  봇 토큰에는 큰 권한이 있습니다. 토큰은 사용자가 앱을 설치함으로써 권한을 부여했음을 나타냅니다. 앱을 설치한 유저가 준 신뢰를 해치지 않도록 토큰을 안전하게, 기밀로 보관하세요. 최소한 공개적인 형상관리에 토큰을 올리지 마세요. 환경 변…","fields":{"slug":"/git-submodule/"},"frontmatter":{"categories":"ETC 트러블슈팅","title":"[git] 슬랙한테 봇 강퇴당하고 서브모듈 도입한 이야기","date":"July 25, 2022"}},"next":{"fields":{"slug":"/session-cookie-jwt/"}},"previous":{"fields":{"slug":"/wild-seed/"}}}]}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}
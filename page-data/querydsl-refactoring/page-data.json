{"componentChunkName":"component---src-templates-blog-template-js","path":"/querydsl-refactoring/","result":{"data":{"cur":{"id":"35f48c8a-6132-55b3-af5f-ffe41513fbd0","html":"<h2 id=\"-ë¬¸ì œìƒí™©\" style=\"position:relative;\"><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\" aria-label=\" ë¬¸ì œìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§¶ ë¬¸ì œìƒí™©</h2>\n<h3 id=\"-ë¹„ëŒ€í•´ì§„-ì„œë¹„ìŠ¤-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#-%EB%B9%84%EB%8C%80%ED%95%B4%EC%A7%84-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%BD%94%EB%93%9C\" aria-label=\" ë¹„ëŒ€í•´ì§„ ì„œë¹„ìŠ¤ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸª ë¹„ëŒ€í•´ì§„ ì„œë¹„ìŠ¤ ì½”ë“œ</h3>\n<p><a href=\"https://github.com/woowacourse-teams/2022-pickpick\">ì¤ì¤</a>ì€ ìš”ì²­ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë³€í™”í•´ì•¼ í•˜ëŠ” ë³µì¡í•œ ì¡°íšŒ ì¡°ê±´ì„ ê±¸ê¸° ìœ„í•´ <code class=\"language-text\">Querydsl</code>ì„ ë„ì…í–ˆë‹¤.\nì˜ˆì „ì— ê³µë¶€í•˜ë©° ê°€ë³ê²Œ ì‚¬ìš©í•´ ë³¸ ì ì€ ìˆì§€ë§Œ, ì¤ì¤ ìš”êµ¬ì‚¬í•­ë§Œí¼ ë³µì¡í•œ ì½”ë“œë¥¼ ì§œ ë³¸ ì ì€ ì—†ì—ˆë‹¤.\n<code class=\"language-text\">XXXService</code>ì— <code class=\"language-text\">Querydsl</code> ì½”ë“œë¥¼ ë„£ëŠ” ì‹ìœ¼ë¡œ ìš°ì„  êµ¬í˜„í–ˆê³ , ë¬´ì‚¬íˆ ë°°í¬ë˜ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MessageService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> members<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRepository</span> messages<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ChannelSubscriptionRepository</span> channelSubscriptions<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JPAQueryFactory</span> jpaQueryFactory<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MessageResponses</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds <span class=\"token operator\">=</span> <span class=\"token function\">findChannelId</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messageResponses <span class=\"token operator\">=</span> <span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">,</span> channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">boolean</span> hasPast <span class=\"token operator\">=</span> <span class=\"token function\">hasPast</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> messageResponses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">boolean</span> hasFuture <span class=\"token operator\">=</span> <span class=\"token function\">hasFuture</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> messageResponses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MessageResponses</span><span class=\"token punctuation\">(</span>messageResponses<span class=\"token punctuation\">,</span> hasPast<span class=\"token punctuation\">,</span> hasFuture<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findChannelId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelIds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isNonNullNorEmpty</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> channelIds<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\">ChannelSubscription</span> firstSubscription <span class=\"token operator\">=</span> channelSubscriptions<span class=\"token punctuation\">.</span><span class=\"token function\">getFirstByMemberIdOrderByViewOrderAsc</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>firstSubscription<span class=\"token punctuation\">.</span><span class=\"token function\">getChannelId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span>\n                                               <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">boolean</span> needPastMessage <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> messageCount <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messageResponses <span class=\"token operator\">=</span> jpaQueryFactory\n                <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QMessage</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QMessage</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>member<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QBookmark</span><span class=\"token punctuation\">.</span>bookmark<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">existsBookmark</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QReminder</span><span class=\"token punctuation\">.</span>reminder<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remainReminder</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">meetAllConditions</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token function\">arrangeDateByNeedPastMessage</span><span class=\"token punctuation\">(</span>needPastMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>messageCount<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">replaceMentionMembers</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">,</span> messageResponses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê·¸ëŸ¬ë‹¤ <code class=\"language-text\">Querydsl</code>ì„ ì“°ì§€ ì•ŠëŠ” ë‹¤ë¥¸ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ì½”ë“œë¥¼ ë³´ë‹ˆ â€˜ì–´â€¦ ì—¬ê¸°ëŠ” ë„ˆë¬´ ê¹”ë”í•œë°?â€˜í•˜ëŠ” ìœ„í™”ê°ì´ ë“¤ì—ˆë‹¤.\nê·¸ë¦¬ê³  ë‹¤ì‹œ <code class=\"language-text\">Querydsl</code>ì„ ì“°ëŠ” ì½”ë“œë¥¼ ë³´ë‹ˆ, <code class=\"language-text\">Repository</code>ê°€ í•  ì¼ì´ <code class=\"language-text\">Service</code>ì—ì„œ ì´ë¤„ì§€ê³  ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>\n<p>ìœ„ì— ìˆëŠ” ê¸°ì¡´ <code class=\"language-text\">MessageService</code>ì˜ ì§§ì€ ì˜ˆì‹œ ì½”ë“œ ë‚´ì—ì„œë„ <code class=\"language-text\">Querydsl</code> ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì—­í•  ë¹„ëŒ€í™”ê°€ ë³´ì¸ë‹¤.\n<code class=\"language-text\">findChannelId()</code>ì˜ ê²½ìš° DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ ì™„ë²½íˆ <code class=\"language-text\">channelSubscriptions</code>ì— ë§¡ê¸°ê³  ìˆë‹¤.\në°˜ë©´, <code class=\"language-text\">findMessages()</code>ëŠ” DBì—ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ ì„œë¹„ìŠ¤ ì½”ë“œ ìƒì— ì™„ì „íˆ ë…¸ì¶œë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ ê° ë ˆì´ì–´ ë³„ ì—­í• ì´ ì›ì¹™ëŒ€ë¡œ ë¶„ë¦¬ë˜ë„ë¡ <code class=\"language-text\">Querydsl</code> ì½”ë“œë¥¼ ë³„ë„ì˜ <code class=\"language-text\">Repository</code> ê°ì²´ë¡œ ë¹¼ë‚´ëŠ” ë¦¬íŒ©í† ë§ì„ ì‹œì‘í–ˆë‹¤.</p>\n<br>\n<h3 id=\"ï¸-ì¼ë‹¨-ë ˆí¬ì§€í† ë¦¬-ì½”ë“œ-ë¶„ë¦¬\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%9D%BC%EB%8B%A8-%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%BD%94%EB%93%9C-%EB%B6%84%EB%A6%AC\" aria-label=\"ï¸ ì¼ë‹¨ ë ˆí¬ì§€í† ë¦¬ ì½”ë“œ ë¶„ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ‚ï¸ ì¼ë‹¨ ë ˆí¬ì§€í† ë¦¬ ì½”ë“œ ë¶„ë¦¬</h3>\n<p><code class=\"language-text\">Querydsl</code> ì‚¬ìš© ì˜ˆì‹œë¥¼ ë³´ë©´ <code class=\"language-text\">Querydsl</code>ì„ ì‚¬ìš©í•˜ëŠ” ë ˆí¬ì§€í† ë¦¬ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³ , ì´ë¥¼ <code class=\"language-text\">JpaRepository</code>ì™€ í•¨ê»˜ ìƒì†ë°›ì•„ ê²°ê³¼ì ìœ¼ë¡œ í•˜ë‚˜ì˜ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ê²Œ í•˜ëŠ” ë°©ë²•ì´ ë§ì´ ë‚˜ì˜¨ë‹¤.\nê¸€ë¡œ í•˜ë‹ˆ ì–´ë ¤ìš´ë°, ê·¸ë¦¼ê³¼ ì½”ë“œë¡œ ë³´ë©´ ì´ë ‡ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAo0lEQVQY022PWQ6DMBBDe5ssCGgSAoEsLG3vf6RXgUTV7cOyZjy2PJeqqjihlcYFQ8yJnGdiyge873GjIZVMLgu5zAd2rW4atNavjMtHoNbY3hDGkTQXphwZhoC1lqtvGUIglkRaClNMTDFS1/X/wHOplEIKiVSStmuwncMHjx96nO8wzhyaEAIp5ct38k/D99knx7yubLcH2/1x8P7m+8237wnwQn3uXSCbMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"querydsl ì¸í„°í˜ì´ìŠ¤ ìƒì†\"\n        title=\"querydsl ì¸í„°í˜ì´ìŠ¤ ìƒì†\"\n        src=\"/static/6041c50db5c2acae632e5f544543d3ef/37523/querydsl_extends.png\"\n        srcset=\"/static/6041c50db5c2acae632e5f544543d3ef/e9ff0/querydsl_extends.png 180w,\n/static/6041c50db5c2acae632e5f544543d3ef/f21e7/querydsl_extends.png 360w,\n/static/6041c50db5c2acae632e5f544543d3ef/37523/querydsl_extends.png 720w,\n/static/6041c50db5c2acae632e5f544543d3ef/302a4/querydsl_extends.png 1080w,\n/static/6041c50db5c2acae632e5f544543d3ef/07a9c/querydsl_extends.png 1440w,\n/static/6041c50db5c2acae632e5f544543d3ef/95e59/querydsl_extends.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MessageService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRepository</span> messages<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MessageRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Repository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Message</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">QMessageRepository</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">QMessageRepository</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">QMessageRepositoryImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">QMessageRepository</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ í•œë‹¤ë©´ <code class=\"language-text\">MessageService</code>ì˜ <code class=\"language-text\">messages</code>ë¥¼ í†µí•´, <code class=\"language-text\">QMessageRepositoryImpl</code>ì— êµ¬í˜„ëœ ë©”ì„œë“œë„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n<code class=\"language-text\">XXXService</code> ì…ì¥ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ <code class=\"language-text\">Repository</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ë‹ˆ ê¹”ë”í•˜ë‹¤.</p>\n<p>ì´ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ë©´ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ì„œë¹„ìŠ¤ê°€ í•œê» ê°€ë²¼ì›Œì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVQoz2WSi46CUAxE+f/PwygYMShB5RlFBUXQbs4k3bjZJg3cPmamtzeYpskej4c1TWPn81n/8zyb2/P5VG6/38u7rlPs9Xqpvq5r5YmDFfCz2+0syzIl7ve7it04OxBxmiA8nU62Xq8FWFWVXS4XG8fRAn4Oh4OUYZ/PRw18sdvtZovFQqSAYe/3W4C412H0BW3bqiFNU+v7/t/InI/Ho3IoRAX5oigsz3MbhkFncrgUrlYr2263SgKAEh+NGEogxBFAI2D0cb5er7/AAoyiSIwunwSAjEYxd4VCN+LUL5dLfb+vKmBTMCVJIjYH+l4KV8IEgLNhmgGK41hLYao/gCgoy1KbRPH3llkKYGzS78+XgkKWRRxAPRsAYYKRJhTQ4ONDQCNPx4kcMAxD22w2AkWMFILKhXJHuLM5IOO4Oh8LpxYygPxRA/gD9dj9cBuH/tkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1ì°¨ ë¦¬íŒ©í„°ë§ uml\"\n        title=\"1ì°¨ ë¦¬íŒ©í„°ë§ uml\"\n        src=\"/static/8251179dae69cb7e10f6e003b5613ca0/37523/uml1.png\"\n        srcset=\"/static/8251179dae69cb7e10f6e003b5613ca0/e9ff0/uml1.png 180w,\n/static/8251179dae69cb7e10f6e003b5613ca0/f21e7/uml1.png 360w,\n/static/8251179dae69cb7e10f6e003b5613ca0/37523/uml1.png 720w,\n/static/8251179dae69cb7e10f6e003b5613ca0/302a4/uml1.png 1080w,\n/static/8251179dae69cb7e10f6e003b5613ca0/07a9c/uml1.png 1440w,\n/static/8251179dae69cb7e10f6e003b5613ca0/b2b2c/uml1.png 1708w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ê·¸ëŸ°ë° ì²«ë²ˆì§¸ ë¦¬íŒ©í„°ë§ í›„ì— ë³´ë‹ˆ, <code class=\"language-text\">MessageService</code>ì—ì„œ ì¼ë°˜ <code class=\"language-text\">MessageRepository</code>ì˜ ë©”ì„œë“œë¥¼ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆì—ˆë‹¤.\në™ì‹œì— ë°˜ëŒ€ë¡œ <code class=\"language-text\">MessageService</code>ë¥¼ ì œì™¸í•˜ê³  <code class=\"language-text\">MessageRepository</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“  ê³³ì—ì„œ <code class=\"language-text\">Querydsl</code> ë¡œì§ì„ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆì—ˆë‹¤.\në‹¤ì¤‘ ìƒì†ìœ¼ë¡œ <code class=\"language-text\">Message</code> ë„ë©”ì¸ê³¼ ê´€ë ¨ëœ DB ì ‘ê·¼ ë¡œì§ì„ í•œ ê³³ì— ë‹¤ ëª¨ì„ ìˆ˜ ìˆì—ˆì§€ë§Œ,\nì •ì‘ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œê°€ ëª¨ë‘ ë…¸ì¶œë˜ë©´ì„œ, ê´€ë¦¬í•  ì¸í„°í˜ì´ìŠ¤ë§Œ í•˜ë‚˜ ë” ìƒê²¼ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ ë‹¤ì¤‘ ìƒì† ì—†ì´ <code class=\"language-text\">MessageRepository</code>ì™€ <code class=\"language-text\">QMessageRepository</code>ë¥¼ í•„ìš”ì— ë”°ë¼ ê°ê° ì‚¬ìš©í•˜ë„ë¡ ë‹¤ì‹œ ë¦¬íŒ©í„°ë§ì„ ì§„í–‰í–ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABY0lEQVQoz3WSWYvCUAyF+///UEEf+6CgiCi41X3DSqsW3G09wxdIGRgmEJre3JycnNzg8/no8XgoTVOdz2eLi6KQG3Ge51oulxoMBtput7per3ZGPJvNtFgsrPb5fCrwy+v12kC5/H6/K8CyLLXZbMzJc//1emm1WlkNefz7/Vrz4HK5aLfbGTPMEx7jcRxrNBpZMz/f7/c6HA7GyhszbZBlmfr9vtG+3W5/RqY4SRLRmCLYO2tq7ve7gcLaALmINmhBEkAS7v8Z+lEHS2oApJEBDodDS8DGFwEYbIj54pw5e0YG8HQ6VZMYQ7ZDYjqdivF/F9G52+2q0WgoiiK1Wi1boANCBP2ZDKsAx+Ox6cQGYexbRtN6vW5ASDKZTGy7GEBozz/Lcu0NkA0y8vF4NIHRAqNzrVZTGIZqt9vq9XoVIARoMJ/Pq4UaIDQp5AB3cTHAm82mOp2OPR2cxq6zu79D/AeW5veyHQ0+AgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2ì°¨ ë¦¬íŒ©í„°ë§ uml\"\n        title=\"2ì°¨ ë¦¬íŒ©í„°ë§ uml\"\n        src=\"/static/59eebc8e9243f90e728005ab33bb6d33/37523/uml2.png\"\n        srcset=\"/static/59eebc8e9243f90e728005ab33bb6d33/e9ff0/uml2.png 180w,\n/static/59eebc8e9243f90e728005ab33bb6d33/f21e7/uml2.png 360w,\n/static/59eebc8e9243f90e728005ab33bb6d33/37523/uml2.png 720w,\n/static/59eebc8e9243f90e728005ab33bb6d33/302a4/uml2.png 1080w,\n/static/59eebc8e9243f90e728005ab33bb6d33/07a9c/uml2.png 1440w,\n/static/59eebc8e9243f90e728005ab33bb6d33/b2b2c/uml2.png 1708w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë‘ í˜•íƒœ ì¤‘ì— ê³ ë¯¼í–ˆëŠ”ë° ì„¤ê³„ìƒìœ¼ë¡œëŠ” 1ì•ˆì´ í™•ì—°íˆ ì¢‹ì•˜ë‹¤.\n<code class=\"language-text\">MessageRepository</code>ì˜ DB ì ‘ê·¼ ëª…ì„¸ë¥¼ í•œ ë²ˆì— ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ íŠ¹íˆ ê·¸ë¬ë‹¤.\në©”ì„œë“œ êµ¬í˜„ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ <code class=\"language-text\">JPA</code>ê°€ ìë™ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê±´, <code class=\"language-text\">Querydsl</code>ì„ ì‚¬ìš©í•˜ê±´, ì™¸ë¶€ì˜ ê´€ì‹¬ì‚¬ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ë°˜ë©´, ì´ ì„¤ê³„ì˜ ì¥ì ì´ í˜„ì¬ ìš°ë¦¬ í”„ë¡œì íŠ¸ì— ë§ì„ê¹Œ? í•˜ëŠ” ê³ ë¯¼ì´ ë“¤ì—ˆë‹¤.\nì‹¤ì§ˆì ìœ¼ë¡œ <code class=\"language-text\">JPA</code> ìë™ ìƒì„± ì½”ë“œë¥¼ ì“°ëŠ” í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤ì™€ <code class=\"language-text\">Querydsl</code> ì½”ë“œë¥¼ ì“°ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì™„ë²½íˆ ë‚˜ëˆ„ì–´ì ¸ ìˆê³ ,\nì´ ë‘˜ì„ í•œ ë²ˆì— ì“¸ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒê¸¸ ê°€ëŠ¥ì„±ì´ ë‚®ë‹¤.\nê·¸ë ‡ë‹¤ë©´ ê°ì²´ë¥¼ ë¶„ë¦¬í•´ ìì‹ ì´ ì“¸ ë©”ì„œë“œë§Œ ì œê³µë°›ëŠ” ê²ƒì´ ë‚«ì§€ ì•Šì„ê¹Œ?</p>\n<p>ì´ ë¶€ë¶„ì€ í˜¼ì ê³ ë¯¼í•´ì„œ ë‹µì„ ë‚´ë¦¬ê¸° ë³´ë‹¤ íŒ€ì›ë“¤ì˜ ì˜ê²¬ì„ ë“£ê³  ë³„ë„ ì§„í–‰í•˜ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ì•„, ë‘ ê°€ì§€ ë°©ì•ˆì„ ëª¨ë‘ ì—´ì–´ë‘ê³  ë‚˜ë¨¸ì§€ ë¦¬íŒ©í„°ë§ì„ ì§„í–‰í–ˆë‹¤.</p>\n<br>\n<h3 id=\"-ë©”ì„œë“œ-ì´ë¦„ì„-ëª…í™•í•˜ê²Œ\" style=\"position:relative;\"><a href=\"#-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B4%EB%A6%84%EC%9D%84-%EB%AA%85%ED%99%95%ED%95%98%EA%B2%8C\" aria-label=\" ë©”ì„œë“œ ì´ë¦„ì„ ëª…í™•í•˜ê²Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“› ë©”ì„œë“œ ì´ë¦„ì„ ëª…í™•í•˜ê²Œ</h3>\n<p>ë‹¤ìŒìœ¼ë¡œ <code class=\"language-text\">QMessageRepository</code>ì˜ ë©”ì„œë“œ ì´ë¦„ ê°œì„  ì‘ì—…ì— ë“¤ì–´ê°”ë‹¤.\nê¸°ì¡´ ì½”ë“œëŠ” ë¹Œë” ì•ˆ ë©”ì„œë“œ ëª…ì´ ì¶”ìƒì ì´ë¼, ì½”ë“œë§Œ ë³´ê³  ì‹¤ì œë¡œ ì–´ë–¤ ì¡°ê±´ì¸ì§€ íŒŒì•…í•˜ê¸° ì‰½ì§€ ì•Šì•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span>\n                                            <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">boolean</span> needPastMessage <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> messageCount <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> jpaQueryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>bookmark<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">existsBookmark</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>reminder<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remainReminder</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">meetAllConditions</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token function\">arrangeDateByNeedPastMessage</span><span class=\"token punctuation\">(</span>needPastMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>messageCount<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë¥¼ <code class=\"language-text\">JPA</code> ë©”ì„œë“œ ì»¨ë²¤ì…˜ì— ë§ì¶° ì•„ë˜ì™€ ê°™ì´ ëª…í™•í•˜ê²Œ ê°œì„ í–ˆë‹¤.</p>\n<h4 id=\"1-on-ì¡°ê±´ë¬¸\" style=\"position:relative;\"><a href=\"#1-on-%EC%A1%B0%EA%B1%B4%EB%AC%B8\" aria-label=\"1 on ì¡°ê±´ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. on ì¡°ê±´ë¬¸</h4>\n<p>onì ˆ ì•ˆì˜ ë©”ì„œë“œëŠ” ë‘˜ ë‹¤ í•´ë‹¹ ë©¤ë²„ê°€ ê°–ê³  ìˆëŠ” ë¶ë§ˆí¬ì™€ ë¦¬ë§ˆì¸ë”ë§Œ ì¡°íšŒí•˜ëŠ” ì¡°ê±´ì´ë‹¤.\nì—¬ê¸°ì— ë¦¬ë§ˆì¸ë”ëŠ” ì¶”ê°€ë¡œ ì•ŒëŒ ì‹œê°ì´ í˜„ì¬ ì‹œê°„ë³´ë‹¤ ë¯¸ë˜ì¼ ê²½ìš°ë§Œ ì¡°íšŒí•œë‹¤.\në”°ë¼ì„œ ì¡°ê±´ì— ë§ì¶° êµ¬ì²´ì ì¸ ì´ë¦„ì„ ì§€ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">return</span> jpaQueryFactory\n    <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>bookmark<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">bookmarksFindByMemberId</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>reminder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remindersFindByMemberIdWhereRemindDateAfterNow</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"2-where-ì¡°ê±´ë¬¸\" style=\"position:relative;\"><a href=\"#2-where-%EC%A1%B0%EA%B1%B4%EB%AC%B8\" aria-label=\"2 where ì¡°ê±´ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. where ì¡°ê±´ë¬¸</h4>\n<p>where ì ˆ ë‚´ì˜ ë©”ì„œë“œëŠ” <code class=\"language-text\">where(meetAllConditions(channelIds, messageRequest)</code>ë¡œ <code class=\"language-text\">ëª¨ë“  ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°</code>ë¼ëŠ” ì¶”ìƒí™”ëœ ë‚´ìš©ë§Œ ë“¤ì–´ê°€ìˆë‹¤.\nì‚¬ì‹¤ ì´ ì•ˆì— ë„ˆë¬´ ë§ì€ ì¡°ê±´ì´ ê°ì‹¸ì ¸ ìˆê¸´ í•˜ë‹¤.\nì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ul>\n<li>íŠ¹ì • ì±„ë„ë“¤ì— ì†í•œ ë©”ì‹œì§€ë§Œ ì¡°íšŒí•œë‹¤</li>\n<li>ê²€ìƒ‰ í‚¤ì›Œë“œê°€ ìˆë‹¤ë©´, í•´ë‹¹ í‚¤ì›Œë“œê°€ ë³¸ë¬¸ì— ì¡´ì¬í•˜ëŠ” ë©”ì‹œì§€ë§Œ ì¡°íšŒí•œë‹¤</li>\n<li>ë³¸ë¬¸ì´ ë¹ˆ ë©”ì‹œì§€ëŠ” ì¡°íšŒ ëŒ€ìƒì—ì„œ ì œì™¸í•œë‹¤</li>\n<li>ê¸°ì¤€ì‚¼ëŠ” ë©”ì‹œì§€ê°€ ìˆë‹¤ë©´, í•´ë‹¹ ë©”ì‹œì§€ì˜ ì‘ì„±ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì¡°íšŒí•œë‹¤\n<ul>\n<li>ì´ ë•Œ, ì¡°ê±´ì— ë”°ë¼ ì‘ì„±ì‹œê°„ì´ ê¸°ì¤€ ë©”ì‹œì§€ì˜ ì‘ì„±ì‹œê°„ ì´ì „/ì´í›„ì˜ ë©”ì‹œì§€ë¡œ ì¶”ê°€ ë¶„ê¸°ì²˜ë¦¬ëœë‹¤</li>\n</ul>\n</li>\n<li>ê¸°ì¤€ì‚¼ëŠ” ë©”ì‹œì§€ê°€ ì—†ë‹¤ë©´, íŠ¹ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì¡°íšŒí•œë‹¤\n<ul>\n<li>ì´ ë•Œ, ì¡°ê±´ì— ë”°ë¼ ì‘ì„±ì‹œê°„ì´ íŠ¹ì • ì‹œê°„ ì´ì „/ì´í›„ì¸ ë©”ì‹œì§€ë¡œ ì¶”ê°€ ë¶„ê¸°ì²˜ë¦¬ëœë‹¤</li>\n</ul>\n</li>\n<li>ê¸°ì¤€ì‚¼ëŠ” ë©”ì‹œì§€ì™€ íŠ¹ì • ì‹œê°„ì´ ë‘˜ ë‹¤ ì—†ë‹¤ë©´, ì‘ì„±ì‹œê°„ ìƒê´€ì—†ì´ ì¡°íšŒí•œë‹¤</li>\n</ul>\n<p>ì²˜ìŒì—ëŠ” ì´ ì¡°ê±´ë“¤ì„ ë©”ì„œë“œ ëª…ì— ë‹¤ ë„£ìœ¼ë ¤ë‹ˆ ë„ì €íˆ ë¶ˆê°€ëŠ¥í–ˆë‹¤.\nê·¸ë˜ì„œ ë³¸ë¬¸ê³¼ ê´€ë ¨ëœ ë‘ í•­ëª©ì„ <code class=\"language-text\">ë³¸ë¬¸ì— ë”°ë¼ í•„í„°ë§</code>,\nê·¸ë¦¬ê³  ì•„ë˜ ì„¸ í•­ëª©ì„ <code class=\"language-text\">ì‘ì„± ì‹œê°„ì— ë”°ë¼ í•„í„°ë§</code>ì´ë¼ëŠ” í•­ëª©ìœ¼ë¡œ ê°„ì¶”ë ¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">return</span> jpaQueryFactory\n    <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>bookmark<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">bookmarksFindByMemberId</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>reminder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remindersFindByMemberIdWhereRemindDateAfterNow</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">inChannelsFilterByTextAndPostedDate</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>íŠ¹ì • ì±„ë„ë“¤ì— ì†í•´ìˆìœ¼ë©°, ë³¸ë¬¸ê³¼ ì‘ì„± ì‹œê°„ì— ë”°ë¼ í•„í„°ë§ ëœë‹¤ê³  ìš”ì•½ëœ ì´ë¦„ì´ë‹¤.</p>\n<h4 id=\"3-orderby-ì¡°ê±´ë¬¸\" style=\"position:relative;\"><a href=\"#3-orderby-%EC%A1%B0%EA%B1%B4%EB%AC%B8\" aria-label=\"3 orderby ì¡°ê±´ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. orderBy ì¡°ê±´ë¬¸</h4>\n<p>ê¸°ì¡´ ë©”ì„œë“œ ì´ë¦„ì€ <code class=\"language-text\">arrangeDateByNeedPastMessage</code>ì˜€ëŠ”ë°, ë‚´ë¶€ ë¡œì§ì€ ê²°êµ­ <code class=\"language-text\">posted_date</code>ì˜ ì •ë ¬ ê¸°ì¤€,\nì¦‰ <code class=\"language-text\">decs/asc</code>ë¥¼ ê²°ì •í•˜ëŠ” ë‚´ìš©ì´ì—ˆë‹¤.\nê·¸ë˜ì„œ <code class=\"language-text\">ì˜¤ë¦„ì°¨ìˆœ/ë‚´ë¦¼ì°¨ìˆœ</code> ì—¬ë¶€ê°€ ë°”ë€ë‹¤ëŠ” ë‚´ìš©ì„ ì´ë¦„ì— ë„£ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">return</span> jpaQueryFactory\n    <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token function\">postedDateDescOrAsc</span><span class=\"token punctuation\">(</span>needPastMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìµœì¢…ì ìœ¼ë¡œ ë°”ë€ ë¹Œë” ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// before</span>\n<span class=\"token keyword\">return</span> jpaQueryFactory\n    <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>member<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>bookmark<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">existsBookmark</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>reminder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remainReminder</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">meetAllConditions</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token function\">arrangeDateByNeedPastMessage</span><span class=\"token punctuation\">(</span>needPastMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>messageCount<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// after </span>\n<span class=\"token keyword\">return</span> jpaQueryFactory\n    <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMessageResponseConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>member<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>bookmark<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">bookmarksFindByMemberId</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>reminder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">remindersFindByMemberIdWhereRemindDateAfterNow</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">inChannelsFilterByTextAndPostedDate</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token function\">postedDateDescOrAsc</span><span class=\"token punctuation\">(</span>needPastMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>messageCount<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë©”ì„œë“œ ì´ë¦„ì´ ë§ì´ ê¸¸ê¸´ í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì–´ë–¤ ì¡°ê±´ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ”ì§€ ë” ì˜ ë³´ì¸ë‹¤.\nì¶”ê°€ë¡œ í•´ë‹¹ ë©”ì„œë“œ ë‚´ë¶€ì˜ ë©”ì„œë“œë“¤ë„ ì´ë¦„ì„ ë°”ê¿¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// before</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">BooleanExpression</span> <span class=\"token function\">inChannelsFilterByTextAndPostedDate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">channelIdsIn</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">textContains</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getKeyword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">messageHasText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">decideMessageIdOrDate</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// after</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">BooleanExpression</span> <span class=\"token function\">inChannelsFilterByTextAndPostedDate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">inChannels</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">textContains</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getKeyword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">textIsNotNullNorEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">afterOrBeforeMessagePostedDateOrRequestDate</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"-ì„œë¹„ìŠ¤-ë¡œì§ì€-ì„œë¹„ìŠ¤ë¡œ\" style=\"position:relative;\"><a href=\"#-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81%EC%9D%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A1%9C\" aria-label=\" ì„œë¹„ìŠ¤ ë¡œì§ì€ ì„œë¹„ìŠ¤ë¡œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ•Š ì„œë¹„ìŠ¤ ë¡œì§ì€ ì„œë¹„ìŠ¤ë¡œ</h3>\n<p>ë‚˜ë¨¸ì§€ <code class=\"language-text\">public</code> ë©”ì„œë“œì¸ <code class=\"language-text\">hasPast(), hasFuture()</code>ì€ ë©”ì‹œì§€ ì¡°íšŒ ê²°ê³¼ì— ëŒ€í•´ ê°ê° ê³¼ê±°ì™€ ë¯¸ë˜ì˜ ë©”ì‹œì§€ ì¡°íšŒ ê²°ê³¼ê°€ ë” ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œë‹¤.\ní”¼ë“œì—ì„œ ììœ ë¡œìš´ ë‚ ì§œ ì´ë™ê³¼ ì–‘ë°©í–¥ ë¬´í•œìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ í˜ì´ì§€ë„¤ì´ì…˜ì„ ì—†ì• ê³ , ì•/ë’¤ì˜ ë©”ì‹œì§€ë¥¼ ì¶”ê°€ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•´ ìƒê²¼ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasPast</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messages<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Integer</span> result <span class=\"token operator\">=</span> jpaQueryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">meetAllHasPastCondition</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetchFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> result <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">BooleanExpression</span> <span class=\"token function\">meetAllHasPastCondition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> request<span class=\"token punctuation\">,</span>\n                                                    <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messages<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">MessageResponse</span> targetMessage <span class=\"token operator\">=</span> messages<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">inChannels</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">textContains</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getKeyword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>postedDate<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span>targetMessage<span class=\"token punctuation\">.</span><span class=\"token function\">getPostedDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê²°êµ­ ì´ ë©”ì„œë“œëŠ” ê°™ì€ ì¡°íšŒ ì¡°ê±´ì¼ ë•Œ ìœ„ì˜ <code class=\"language-text\">findMessages()</code>ë¡œ ì°¾ì€ ê²°ê³¼ ëª©ë¡ì—ì„œ,\nì²«ë²ˆì§¸ ê²°ê³¼ ê¸°ì¤€ìœ¼ë¡œ ê³¼ê±°/ë¯¸ë˜ì˜ ë©”ì‹œì§€ê°€ ë” ì¡´ì¬í•˜ëŠ”ì§€ ì¡°íšŒí•œë‹¤.\nì•ê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì´ë¦„ì„ ê°œì„ í–ˆë‹¤.</p>\n<p>ë˜, <code class=\"language-text\">messages.get(messages.size() - 1)</code>ì™€ <code class=\"language-text\">messages.get(0)</code>ë¡œ,\nì¡°íšŒ ê¸°ì¤€ì´ ë˜ëŠ” ë©”ì‹œì§€ë¥¼ ì„ ì •í•˜ëŠ” ê±´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì˜ ì±…ì„ì´ë¼ ìƒê°í•´ íŒŒë¼ë¯¸í„°ë¥¼ ë³€ê²½í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">existsByChannelsBeforePostedDate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">,</span>\n                                                    <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageResponse</span> messageResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Integer</span> result <span class=\"token operator\">=</span> jpaQueryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">inChannelsFilterByTextBeforePostedDate</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> messageResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetchFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> result <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">BooleanExpression</span> <span class=\"token function\">inChannelsFilterByTextBeforePostedDate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> request<span class=\"token punctuation\">,</span>\n                                                                <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageResponse</span> messageResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">inChannels</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token function\">textContains</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getKeyword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>postedDate<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span>messageResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getPostedDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì„œë¹„ìŠ¤ ì½”ë“œë¥¼ ë³´ë©´ ë§¥ë½ì´ í›¨ì”¬ ëšœë ·í•´ì¡Œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// before</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasPast</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messages<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">hasPast</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// after</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasPast</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messages<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token class-name\">MessageResponse</span> message <span class=\"token operator\">=</span> messages<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">existsByChannelsBeforePostedDate</span><span class=\"token punctuation\">(</span>channelIds<span class=\"token punctuation\">,</span> messageRequest<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"-ë ˆí¬ì§€í† ë¦¬ì—ê²Œ-dto-ìˆ¨ê¸°ê¸°\" style=\"position:relative;\"><a href=\"#-%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC%EC%97%90%EA%B2%8C-dto-%EC%88%A8%EA%B8%B0%EA%B8%B0\" aria-label=\" ë ˆí¬ì§€í† ë¦¬ì—ê²Œ dto ìˆ¨ê¸°ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤« ë ˆí¬ì§€í† ë¦¬ì—ê²Œ DTO ìˆ¨ê¸°ê¸°</h3>\n<p>í˜„ì¬ <code class=\"language-text\">QMessageRepository</code>ëŠ” <code class=\"language-text\">MessageService</code>ì—ì„œ <code class=\"language-text\">MessageRequest</code> ê°ì²´ë¥¼ ë°›ì•„ì™€ ê°’ì„ êº¼ë‚´ ì‚¬ìš©í•œë‹¤.\nì´ ìš”ì²­ê°’ DTOê°€ ì»¨íŠ¸ë¡¤ëŸ¬ë¶€í„° ë„˜ì–´ì™”ë‹¤ëŠ” ì‚¬ì‹¤ì„ ê³ ë ¤í•œë‹¤ë©´, ë ˆí¬ì§€í† ë¦¬ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì–´ë–¤ ê°’ì„ ë°›ì•„ì˜¤ëŠ”ì§€ ì•Œê³  ìˆëŠ” ìƒí™©ì´ë‹¤.\nê·¸ë˜ì„œ íŒŒë¼ë¯¸í„°ê°€ ëŠ˜ì–´ë‚¨ì„ ê°ìˆ˜í•˜ê³ , ê°’ì„ êº¼ë‚´ì„œ ë°›ë„ë¡ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MessageService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span>\n                                               <span class=\"token keyword\">final</span> <span class=\"token class-name\">MessageRequest</span> messageRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">boolean</span> needPastMessage <span class=\"token operator\">=</span> messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> messageResponses <span class=\"token operator\">=</span> messages<span class=\"token punctuation\">.</span><span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span>\n                memberId<span class=\"token punctuation\">,</span>\n                channelIds<span class=\"token punctuation\">,</span>\n                messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getKeyword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">isNeedPastMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                messageRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getMessageCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">QMessageRepository</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMessages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> channelIds<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> keyword<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> messageId<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">LocalDateTime</span> date<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> needPastMessage<span class=\"token punctuation\">,</span>\n                                              <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> messageCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ì œ ë ˆí¬ì§€í† ë¦¬ëŠ” DTOë¥¼ ì•Œì§€ ëª»í•œë‹¤!</p>\n<br>\n<h2 id=\"-ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\" ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§¹ ë§ˆì¹˜ë©°</h2>\n<p>êµ¬í˜„ì´ ê¸‰í•˜ê³  <code class=\"language-text\">Querydsl</code>ì„ ì˜ ëª°ëì„ ë•ŒëŠ” ê¸°ì¡´ êµ¬í˜„ ë°©ì‹ì˜ ë‹¨ì ì„ ì˜ ëª°ëë‹¤.\nê·¸ëŸ°ë° ì—¬ìœ ê°€ ìƒê¸°ê³  í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì§€ì, ë³´ì´ì§€ ì•Šë˜ ë¬¸ì œê°€ ë³´ì´ê¸° ì‹œì‘í•œë‹¤.</p>\n<p>ì†”ì§íˆ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì— ë”°ë¥¸ ê¸°ëŠ¥ ì¶”ê°€ê°€ ë” ê¸‰í•´ ë¦¬íŒ©í† ë§ì´ ë‚´í‚¤ì§€ ì•Šì„ ë•Œë„ ìˆë‹¤.\ní•˜ì§€ë§Œ ê¹¨ë—í•œ ì½”ë“œ ìœ„ì— ìƒˆë¡œìš´ ì½”ë“œë¥¼ ì˜¬ë¦¬ëŠ” ê²ƒì´, ê²°ê³¼ì ìœ¼ë¡œ ë³µì¡í•œ ì½”ë“œ ì‚¬ì´ë¥¼ í—¤ë§¤ë©° ì˜¬ë¦¬ëŠ” ê²ƒ ë³´ë‹¤ ëŒ€ë¶€ë¶„ ë” ë¹ ë¥´ê³  íš¨ìœ¨ì ì´ë‹¤.\nê·¸ë˜ì„œ ì§€ì†ì ì¸ ë¦¬íŒ©í„°ë§ì´ ì‹ ê·œ ê°œë°œ ë§Œí¼ ì¤‘ìš”í•œ ê²ƒì´ë‹¤.</p>\n<p>ì—¬ë‹´ìœ¼ë¡œ ìš”ì¦˜ì€ í”„ë¡œê·¸ë˜ë°ì´ ì¹˜ì›Œë„ ì¹˜ì›Œë„ í•„ì—°ì ìœ¼ë¡œ ë‹¤ì‹œ ë”ëŸ¬ì›Œì§„ë‹¤ëŠ” ì ì—ì„œ ì°¸ ì§‘ì•ˆì¼ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤â€¦</p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\">ğŸ§¶ ë¬¸ì œìƒí™©</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%B9%84%EB%8C%80%ED%95%B4%EC%A7%84-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%BD%94%EB%93%9C\">ğŸª ë¹„ëŒ€í•´ì§„ ì„œë¹„ìŠ¤ ì½”ë“œ</a></p>\n</li>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%9D%BC%EB%8B%A8-%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%BD%94%EB%93%9C-%EB%B6%84%EB%A6%AC\">âœ‚ï¸ ì¼ë‹¨ ë ˆí¬ì§€í† ë¦¬ ì½”ë“œ ë¶„ë¦¬</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B4%EB%A6%84%EC%9D%84-%EB%AA%85%ED%99%95%ED%95%98%EA%B2%8C\">ğŸ“› ë©”ì„œë“œ ì´ë¦„ì„ ëª…í™•í•˜ê²Œ</a></p>\n<ul>\n<li><a href=\"#1-on-%EC%A1%B0%EA%B1%B4%EB%AC%B8\">1. on ì¡°ê±´ë¬¸</a></li>\n<li><a href=\"#2-where-%EC%A1%B0%EA%B1%B4%EB%AC%B8\">2. where ì¡°ê±´ë¬¸</a></li>\n<li><a href=\"#3-orderby-%EC%A1%B0%EA%B1%B4%EB%AC%B8\">3. orderBy ì¡°ê±´ë¬¸</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81%EC%9D%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A1%9C\">ğŸ•Š ì„œë¹„ìŠ¤ ë¡œì§ì€ ì„œë¹„ìŠ¤ë¡œ</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC%EC%97%90%EA%B2%8C-dto-%EC%88%A8%EA%B8%B0%EA%B8%B0\">ğŸ¤« ë ˆí¬ì§€í† ë¦¬ì—ê²Œ DTO ìˆ¨ê¸°ê¸°</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\">ğŸ§¹ ë§ˆì¹˜ë©°</a></p>\n</li>\n</ul>\n</div>","excerpt":"ğŸ§¶ ë¬¸ì œìƒí™© ğŸª ë¹„ëŒ€í•´ì§„ ì„œë¹„ìŠ¤ ì½”ë“œ ì¤ì¤ì€ ìš”ì²­ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë³€í™”í•´ì•¼ í•˜ëŠ” ë³µì¡í•œ ì¡°íšŒ ì¡°ê±´ì„ ê±¸ê¸° ìœ„í•´ ì„ ë„ì…í–ˆë‹¤.\nì˜ˆì „ì— ê³µë¶€í•˜ë©° ê°€ë³ê²Œ ì‚¬ìš©í•´ ë³¸ ì ì€ ìˆì§€ë§Œ, ì¤ì¤ ìš”êµ¬ì‚¬í•­ë§Œí¼ ë³µì¡í•œ ì½”ë“œë¥¼ ì§œ ë³¸ ì ì€ ì—†ì—ˆë‹¤.\nì—  ì½”ë“œë¥¼ ë„£ëŠ” ì‹ìœ¼ë¡œ ìš°ì„  êµ¬í˜„í–ˆê³ , ë¬´ì‚¬íˆ ë°°í¬ë˜ì—ˆë‹¤. ê·¸ëŸ¬ë‹¤ ì„ ì“°ì§€ ì•ŠëŠ” ë‹¤ë¥¸ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ì½”ë“œë¥¼ ë³´ë‹ˆ â€˜ì–´â€¦ ì—¬ê¸°ëŠ” ë„ˆë¬´ ê¹”ë”í•œë°?â€˜í•˜ëŠ” ìœ„í™”ê°ì´ ë“¤ì—ˆë‹¤.\nê·¸ë¦¬ê³  ë‹¤ì‹œ ì„ ì“°ëŠ” ì½”ë“œë¥¼ ë³´ë‹ˆ, ê°€ í•  ì¼ì´ ì—ì„œ ì´ë¤„ì§€ê³  ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ìœ„ì— ìˆëŠ” ê¸°ì¡´ ì˜ ì§§ì€ ì˜ˆì‹œ ì½”ë“œ ë‚´ì—ì„œë„  ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì—­í•  ë¹„ëŒ€í™”ê°€ ë³´ì¸ë‹¤.\nì˜ ê²½ìš° DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ ì™„ë²½íˆ ì— ë§¡ê¸°ê³  ìˆë‹¤.\në°˜ë©´, ëŠ” DBì—ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ ì„œë¹„ìŠ¤ ì½”ë“œ ìƒì— ì™„ì „íˆ ë…¸ì¶œë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ê° ë ˆì´ì–´ ë³„ ì—­í• ì´ ì›ì¹™ëŒ€ë¡œ ë¶„ë¦¬ë˜ë„ë¡  ì½”ë“œë¥¼ ë³„ë„ì˜  ê°ì²´ë¡œ ë¹¼ë‚´ëŠ” ë¦¬íŒ©í† ë§ì„ ì‹œì‘í–ˆë‹¤. âœ‚ï¸ ì¼ë‹¨ ë ˆí¬ì§€í† ë¦¬ ì½”ë“œ ë¶„ë¦¬  ì‚¬ìš© ì˜ˆì‹œë¥¼ ë³´ë©´ ì„â€¦","frontmatter":{"date":"October 26, 2022","title":"Querydslë§Œì˜ ì•„ëŠ‘í•œ ğŸ¡ ì§€ì–´ì£¼ê¸°","categories":"Spring íŠ¸ëŸ¬ë¸”ìŠˆíŒ… etc","author":"ì¨ë¨¸","emoji":"headers/querydsl-refactoring.png"},"fields":{"slug":"/querydsl-refactoring/"}},"next":{"id":"48a52cee-5a60-549e-9e68-7293d2b558b7","html":"<h2 id=\"-ë¬¸ì œìƒí™©\" style=\"position:relative;\"><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\" aria-label=\" ë¬¸ì œìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’£ ë¬¸ì œìƒí™©</h2>\n<p><a href=\"https://github.com/woowacourse-teams/2022-pickpick\">ì¤ì¤</a>ì—ëŠ” ë¶ë§ˆí¬ ì„¤ì •í•œ ë©”ì‹œì§€ë¥¼ ëª¨ì•„ì„œ ë³´ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.\nê¸°ì¡´ì—ëŠ” ì´ ë¶ë§ˆí¬ ëª©ë¡ì„ ë³´ì—¬ì¤„ ë•Œ, ë¶ë§ˆí¬ê°€ ë“±ë¡ ëœ <strong>ë©”ì‹œì§€ì˜ ìƒì„± ì‹œê°„</strong> ìˆœì„œëŒ€ë¡œ ë³´ì—¬ì¤¬ë‹¤.\nê·¸ëŸ¬ë‹¤ ì‚¬ìš©ì í¸ì˜ë¥¼ ìœ„í•´ ì´ë¥¼ <strong>ë¶ë§ˆí¬ ë“±ë¡ ì‹œê°„</strong> ìˆœì„œëŒ€ë¡œ ë³´ì—¬ì£¼ê¸°ë¡œ ë°”ê¿¨ë‹¤.\nì´ ë•Œ, ë¶ë§ˆí¬ ë“±ë¡ ì‹œê°„ì„ í¸í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ <code class=\"language-text\">JPA Auditing</code>ì„ ë„ì…í–ˆë‹¤.\nê·¸ë¦¬ê³  <a href=\"https://github.com/woowacourse-teams/2022-pickpick/pull/568\">í•´ë‹¹ PR</a>ì€ ìˆœì¡°ë¡­ê²Œ ë¨¸ì§€ ë˜ì—ˆëŠ”ë°â€¦</p>\n<p>íŒ€ì› ë´„ì´ ì§„í–‰í•œ <a href=\"https://github.com/woowacourse-teams/2022-pickpick/pull/570\">ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ WebMvcTestë¡œ ê°œì„ í•˜ëŠ” PR</a>ì—ì„œ ë¬¸ì œê°€ ìƒê²¼ë‹¤.\në´„ì˜ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ì˜ ëŒì•„ê°€ëŠ” ìƒíƒœì˜€ëŠ”ë°, PRì˜ <a href=\"https://github.com/woowacourse-teams/2022-pickpick/actions/runs/3179844507/jobs/5182750602\">github action</a>ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQY062PfWuDQAzG7/t/t1FY5/pi9fSUVtmqtSaXO1t9xl3HGGywfxb4kRCeJE9U8rqB1gWquoapaqSHDLt9iqI0KE2F9UsSc5ZrbHd7MDNCLMvyK4qYQUQYR4K1gpEIXX+JvTB87joEDVuLyzBgmm5xcJ5nzPPyA3UlAtHj6n+E8s5HZ845TH6C9x4iArECEQdmCyaObsNhthL1wfH3OmjDJ6ppW6ye16iaFrqucXp7j5hTExmYIbd7hJ37WmAjAiuPpfKZ1bXvcXxagfMC4yED5RrWVOBcY0w28KWBTzO4LMf93P358gfXNs4R38PsUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ê¹ƒí—™ ì•¡ì…˜ ì‹¤íŒ¨\"\n        title=\"ê¹ƒí—™ ì•¡ì…˜ ì‹¤íŒ¨\"\n        src=\"/static/d4cfb4b4007765978f585ce48e18552c/37523/ci_fail.png\"\n        srcset=\"/static/d4cfb4b4007765978f585ce48e18552c/e9ff0/ci_fail.png 180w,\n/static/d4cfb4b4007765978f585ce48e18552c/f21e7/ci_fail.png 360w,\n/static/d4cfb4b4007765978f585ce48e18552c/37523/ci_fail.png 720w,\n/static/d4cfb4b4007765978f585ce48e18552c/302a4/ci_fail.png 1080w,\n/static/d4cfb4b4007765978f585ce48e18552c/07a9c/ci_fail.png 1440w,\n/static/d4cfb4b4007765978f585ce48e18552c/95e59/ci_fail.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ë³€ê²½í•œ ëª¨ë“  <code class=\"language-text\">RestDocs</code>ìš© ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ê°€ ê°™ì€ ì´ìœ ë¡œ ì‹¤íŒ¨í•˜ê³  ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalStateException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Failed</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">load</span> <span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaAuditingHandler'<span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> resolve reference <span class=\"token keyword\">to</span> <span class=\"token namespace\">bean</span> 'jpaMappingContext' <span class=\"token keyword\">while</span> setting constructor argument<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaMappingContext'<span class=\"token operator\">:</span> <span class=\"token class-name\">Invocation</span> of init method failed<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalArgumentException</span><span class=\"token operator\">:</span> <span class=\"token constant\">JPA</span> metamodel must not be empty<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaMappingContext'<span class=\"token operator\">:</span> <span class=\"token class-name\">Invocation</span> of init method failed<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalArgumentException</span><span class=\"token operator\">:</span> <span class=\"token constant\">JPA</span> metamodel must not be empty<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><code class=\"language-text\">JPA metamodel must not be empty</code>ë¼ëŠ” ë¬¸êµ¬ê°€ ëˆˆì— ëˆë‹¤.\ní•´ë‹¹ ë¬¸êµ¬ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²€ìƒ‰í•´ë³´ë©´ <code class=\"language-text\">JpaMetamodelMappingContext</code>ë¼ëŠ” í´ë˜ìŠ¤ê°€ ë‚˜ì˜¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span>\n\t\t<span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractMappingContext</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">JpaPersistentEntityImpl</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">JpaPersistentProperty</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Metamodels</span> models<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">PersistenceProvider</span> persistenceProvider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Creates a new JPA {@link Metamodel} based {@link MappingContext}.\n\t *\n\t * @param models must not be {@literal null} or empty.\n\t */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Metamodel</span><span class=\"token punctuation\">></span></span> models<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">,</span> <span class=\"token string\">\"JPA metamodel must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notEmpty</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">,</span> <span class=\"token string\">\"JPA metamodel must not be empty!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>ì‚¬ì‹¤ ì´ ë¬¸êµ¬ë¡œ ê²€ìƒ‰í•˜ë©´ ë§ì€ ì‚¬ëŒë“¤ì´ í•´ê²°ë²•ì„ ì´ë¯¸ ì˜¬ë ¤ë‘ì—ˆë‹¤.\nê·¸ëŸ°ë° ì—¬ê¸°ê¹Œì§€ ì˜¤ë‹ˆ, <code class=\"language-text\">JPA metamodel</code>ì´ ëŒ€ì²´ ë­”ë°? <code class=\"language-text\">null</code>ë„ ì•„ë‹ˆê³  <code class=\"language-text\">empty</code>ë¼ê³ ?\nì´ê±°ë‘ <code class=\"language-text\">Auditing</code>ì€ ë¬´ìŠ¨ ìƒê´€ì´ì§€? ë“±ë“± ê¶ê¸ˆí•œ ì ì´ ìƒê²¨ì„œ ì½”ë“œë¥¼ ì¡°ê¸ˆ ì—´ì–´ë´¤ë‹¤.</p>\n<br>\n<h2 id=\"-jpa-metamodel\" style=\"position:relative;\"><a href=\"#-jpa-metamodel\" aria-label=\" jpa metamodel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘¾ JPA Metamodel</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ í…ŒìŠ¤íŠ¸ê°€ ì˜ ì‹¤í–‰ ë  ë•Œì™€, <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ë¶™ì—¬ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•Œ, ì € <code class=\"language-text\">models</code>ì—ëŠ” ë¬´ìŠ¨ ê°’ì´ ë“¤ì–´ê°€ìˆì„ê¹Œ?\nì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²½ìš°, <code class=\"language-text\">MetamodelImpl</code>ì´ë¼ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ê´€ë ¨ëœ ì •ë³´ê°€ ë‹´ê²¨ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4UlEQVQoz22Sy24UMRBF538gQmJDJsn0w+5uv8ru12QGERFNku+ABYsACiD++CB7JNiwuK5Sq+t03eveDIPiGAzWCNoKXZYT1OBpekfTWZTJveWq1v9XpehdwMWRzcX4BfXhM/b0jH78ze7+J+3pF+r0k/rjC93DD5r7F94s33g1PnMxfeVi/qfX83feTp/ofWTwgc27xiHieJgnbmXPLCsiK0NWXDFxxU0HtF9o7MS1Dmwby2Vj2bau1J327FrNdlezyUfyFY/Jcu+FxyA8SSQ5h7GWwTqM97gQ8CJISjRac1M33NQ1V7uKqlUFeFU1bC53LZO0PI2eUxh5iiN3ITJ5YXQB40KxYrxgJTF4oekG2t5wXbdsd02B5WeV6vKGDdYojjIwO2HNgy6gC0gwIeIkFVgOvbNne1kZkKV6Q6268oFNXrNqW5xVaOvLQB72cSROMz5NxGlBSj+Slj2dcajBMLj8fo4kUOUMs+UMrJUiOF1sZYshTaR5ZVpvGZd9qfP+3M/7Q6k2xAIbXKC3nptGnTM8b6gIXjGESO+FMC3EZc9yOBbAcntkPbwvfVYG5BhMkFJzxtluAW6rbFdzlwyrjxwlcYwjxzQhaSy55Y1lnItyn3/ifAmN7kutdf8X+AeTsHTWx+/SzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metamodel\"\n        title=\"metamodel\"\n        src=\"/static/723d9c45ddb107118ff118a946096b8c/37523/models_not_empty.png\"\n        srcset=\"/static/723d9c45ddb107118ff118a946096b8c/e9ff0/models_not_empty.png 180w,\n/static/723d9c45ddb107118ff118a946096b8c/f21e7/models_not_empty.png 360w,\n/static/723d9c45ddb107118ff118a946096b8c/37523/models_not_empty.png 720w,\n/static/723d9c45ddb107118ff118a946096b8c/302a4/models_not_empty.png 1080w,\n/static/723d9c45ddb107118ff118a946096b8c/07a9c/models_not_empty.png 1440w,\n/static/723d9c45ddb107118ff118a946096b8c/95e59/models_not_empty.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•ŒëŠ” í•´ë‹¹ <code class=\"language-text\">models</code>ê°€ ë¹„ì–´ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.111111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAQklEQVQI10XISwqAMAwAUa9lBUvTTxJTt97/JiPYhYvHwGy9F55wTAPRi6pBtaX5pNn6ZThHrqQspK+//RRkODZvXqf9I/YqVpU1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metamodel empty\"\n        title=\"metamodel empty\"\n        src=\"/static/9fccb72b921b1d2b7efe811c83d1dc54/37523/models_empty.png\"\n        srcset=\"/static/9fccb72b921b1d2b7efe811c83d1dc54/e9ff0/models_empty.png 180w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/f21e7/models_empty.png 360w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/37523/models_empty.png 720w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/302a4/models_empty.png 1080w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/07a9c/models_empty.png 1440w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/95e59/models_empty.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ì´ ì´ìŠˆë¥¼ ê²€ìƒ‰í•˜ë©´ ì œì¼ ìì£¼ ë‚˜ì˜¤ëŠ” í•´ê²°ë²•ì´ <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ì“°ëŠ” ê³³ì— ì•„ë˜ì™€ ê°™ì´ <code class=\"language-text\">@MockBean</code>ì„ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebMvcTest</span>\n<span class=\"token annotation punctuation\">@MockBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ControllerTest</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¼ë‹¨ ì´ í•´ê²°ë²•ì„ ì ìš©í–ˆì—ˆì§€ë§Œ, ë‚´ë¶€ ì½”ë“œë¥¼ ì—´ê³  ë³´ë‹ˆ ì˜ë¬¸ì´ ë“ ë‹¤.\nì´ë ‡ê²Œ í•˜ë©´ <code class=\"language-text\">JpaMetamodelMappingContext</code> ìƒì„±ìì˜ <code class=\"language-text\">Assert</code>ë¬¸ì´ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë‹ˆ í„°ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤.\nê·¸ëŸ°ë° ì»¨íŠ¸ë¡¤ëŸ¬ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì„ JPA ê´€ë ¨ ë¹ˆì„ ëª¨í‚¹í•´ì£¼ëŠ” ê²ƒì´ ë§ì„ê¹Œ?</p>\n<p>ì–´ì¨Œë“  ì´ <code class=\"language-text\">MetamodelImpl</code>ì´ ì–´ë””ì„œ ìƒì„±ë˜ëŠ”ê°€ë¥¼ ë³´ìë©´â€¦</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVQY022NbWrDMBAFfZt6JdCHV1qngbpgS3ba+99nSlxampIfs7AP3rzBOYd3nvpWWNaF1m9s/aCYclln1q2ff9sPtrbT+nFmWTNn1/sHhp8wTQmtilnFbCbGQNLIpMo0FerVKJdKne0kpPBceD/OO5w4RASREZEXYgoUjZT7UE6UkjDLhOAZZfyV/ZcOz1a8CHp95X1b+OiN2/7N596YNSPyKPvr+AKZAH5yRHyEYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SessionFactoryObserver\"\n        title=\"SessionFactoryObserver\"\n        src=\"/static/6a7541ca966e3424be235b81315a3593/37523/sessionfactoryobserver.png\"\n        srcset=\"/static/6a7541ca966e3424be235b81315a3593/e9ff0/sessionfactoryobserver.png 180w,\n/static/6a7541ca966e3424be235b81315a3593/f21e7/sessionfactoryobserver.png 360w,\n/static/6a7541ca966e3424be235b81315a3593/37523/sessionfactoryobserver.png 720w,\n/static/6a7541ca966e3424be235b81315a3593/302a4/sessionfactoryobserver.png 1080w,\n/static/6a7541ca966e3424be235b81315a3593/07a9c/sessionfactoryobserver.png 1440w,\n/static/6a7541ca966e3424be235b81315a3593/95e59/sessionfactoryobserver.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Incubating</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TypeConfiguration</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SessionFactoryObserver</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MetamodelImplementor</span> <span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionFactoryImplementor</span> sessionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">debugf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"Scoping TypeConfiguration [%s] to SessionFactoryImpl [%s]\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> sessionFactory <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> importEntry <span class=\"token operator\">:</span> scope<span class=\"token punctuation\">.</span>metadataBuildingContext<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadataCollector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getImports</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> importMap<span class=\"token punctuation\">.</span><span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\timportMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tscope<span class=\"token punctuation\">.</span><span class=\"token function\">setSessionFactory</span><span class=\"token punctuation\">(</span> sessionFactory <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsessionFactory<span class=\"token punctuation\">.</span><span class=\"token function\">addObserver</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MetamodelImpl</span><span class=\"token punctuation\">(</span> sessionFactory<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>  </code></pre></div>\n<p><code class=\"language-text\">SessionFactoryObserver</code>ë¥¼ êµ¬í˜„í•œ <code class=\"language-text\">TypeConfiguration</code> í´ë˜ìŠ¤ì˜ <code class=\"language-text\">scope</code>ë¼ëŠ” ë©”ì„œë“œì—ì„œ ìƒì„±í•´ì£¼ê³  ìˆë‹¤.\nê·¸ë¦¬ê³  ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì€ <code class=\"language-text\">Hibernate</code>ì˜ <code class=\"language-text\">SessionFactoryImpl</code>ë¼ëŠ” í´ë˜ìŠ¤ë‹¤.\nì´ í´ë˜ìŠ¤ëŠ” <code class=\"language-text\">JPA</code>ì˜ <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIklEQVQoz31RW5KEIBDzOALy8gUICqhz/yNlCyzdnd2p/Qihi5BOVzeUUlBCUflfkMqEELCOYQ4TtpSQjhM+rGBFwxiarusglYQQooJzDiHLXVbctZSX5mYuOFSvoLSqmtKMFUPZCyzbgrjviPnAOI+Y/Ih4ZGwpo5972NUgph3pPBDzDu9X9EYjpBX5eGEYhit5MSzH3U1qWdMWqPGuBYQW9V3P+kokeB2bCQbK6JOucNNx9p0gH8jnif11Ih8n9vOFEDb0VsPHgLhnbDHVkdu2fUx+cnMvhVBSY9eOHb2YUahJYnYWxjmY4DAbC+sWKK3/mD0jv4EWwcUFetKwzsEtHsvqKxdo3b8ZfTT8LajpO44hBKxbrOOWRRljQUj78c8XcKH7CkIlBQUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SessionFactoryImpl\"\n        title=\"SessionFactoryImpl\"\n        src=\"/static/759d4349731893465904fe5e8d57ae45/37523/SessionFactoryImpl.png\"\n        srcset=\"/static/759d4349731893465904fe5e8d57ae45/e9ff0/SessionFactoryImpl.png 180w,\n/static/759d4349731893465904fe5e8d57ae45/f21e7/SessionFactoryImpl.png 360w,\n/static/759d4349731893465904fe5e8d57ae45/37523/SessionFactoryImpl.png 720w,\n/static/759d4349731893465904fe5e8d57ae45/302a4/SessionFactoryImpl.png 1080w,\n/static/759d4349731893465904fe5e8d57ae45/07a9c/SessionFactoryImpl.png 1440w,\n/static/759d4349731893465904fe5e8d57ae45/95e59/SessionFactoryImpl.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SessionFactoryImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SessionFactoryImplementor</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">SessionFactoryImpl</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token keyword\">final</span> <span class=\"token class-name\">MetadataImplementor</span> metadata<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">SessionFactoryOptions</span> options<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">QueryPlanCache<span class=\"token punctuation\">.</span>QueryPlanCreator</span> queryPlanCacheFunction<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MetamodelImpl</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>metamodel <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>\n\t\t\tmetadata<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token function\">determineJpaMetaModelPopulationSetting</span><span class=\"token punctuation\">(</span> properties <span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ <code class=\"language-text\">MetamodelImpl.initialize()</code>ë¥¼ í˜¸ì¶œí•˜ê³ â€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MetamodelImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MetamodelImplementor</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MetadataImplementor</span> mappingMetadata<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JpaMetaModelPopulationSetting</span> jpaMetaModelPopulationSetting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imports<span class=\"token punctuation\">.</span><span class=\"token function\">putAll</span><span class=\"token punctuation\">(</span> mappingMetadata<span class=\"token punctuation\">.</span><span class=\"token function\">getImports</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ <code class=\"language-text\">mappingMetadata</code>ì—ì„œ ì—¬ëŸ¬ ê°’ì„ ë¶ˆëŸ¬ì™€ ì €ì¥í•˜ê²Œ ëœë‹¤.\nì´ <code class=\"language-text\">mappingMetadata</code>ëŠ” <code class=\"language-text\">SessionFactoryBuilderImpl</code>ì„ í†µí•´ <code class=\"language-text\">SessionFactoryImpl</code>ì— ì£¼ì…ë˜ê³ ,\n<code class=\"language-text\">SessionFactoryBuilderImpl</code>ì€ <code class=\"language-text\">DefaultSessionFactoryBuilderService</code>ì„ í†µí•´ ìƒì„±ë˜ëŠ”ë°â€¦\nì˜ ê³¼ì •ì„ ë”°ë¼ê°€ë‹¤ë³´ë‹ˆ ì–´ëŠìƒˆ <code class=\"language-text\">MetadataImpl</code>ë¡œ ëŒì•„ì˜¤ê³  ìˆì—ˆë‹¤. ğŸ˜µ</p>\n<p>ê²°ë¡ ì€ ì´ <code class=\"language-text\">MetamodelImpl</code>ì€ ì—”í‹°í‹° ì •ë³´ë¥¼ ë‹´ì€ JPA <code class=\"language-text\">Metamodel</code>ì˜ í•˜ì´ë²„ë„¤ì´íŠ¸ì˜ êµ¬í˜„ì²´ë©°, ê·¸ë˜ì„œ <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ ìƒì„±ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ë‹¤.\nì›ë˜ ìµœì´ˆ ìƒì„± ì‹œì ì„ ì°¾ìœ¼ë ¤ê³  í–ˆëŠ”ë° ê²°êµ­ ì°¾ì§€ ëª»í–ˆë‹¤.</p>\n<p>JPA ê´€ë ¨ ë¹ˆì´ ë¡œë”©ë˜ëŠ” <code class=\"language-text\">@DataJpaTest</code>ê°€ ë¶™ì€ í…ŒìŠ¤íŠ¸ëŠ” <code class=\"language-text\">models</code>ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<br>\n<h2 id=\"-enablejpaauditing\" style=\"position:relative;\"><a href=\"#-enablejpaauditing\" aria-label=\" enablejpaauditing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§ EnableJpaAuditing</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ ì–´ë–¤ ê²½ìœ„ë¡œ ì´ <code class=\"language-text\">Metamodel</code>ì´ í•„ìš”í–ˆë˜ ê±¸ê¹Œ?\nAuditingì„ ìœ„í•´ ì¶”ê°€í–ˆë˜ <code class=\"language-text\">@EnableJpaAuditing</code> ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ <code class=\"language-text\">JpaAuditingRegistrar</code> í´ë˜ìŠ¤ë¥¼ import í•˜ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Import</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaAuditingRegistrar</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">EnableJpaAuditing</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">JpaAuditingRegistrar</code>ëŠ” spring data jpaì— ë“¤ì–´ìˆëŠ”ë°, springì˜ <code class=\"language-text\">ImportBeanDefinitionRegistrar</code> í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAs0lEQVQY042P2w7CIBBE+zdYoGgv7LJQ2hf//5fGuLHaNDX6cDIJGU52Guccjlhr0V07RJkgUiD5Qy4zOAm899o7/m2OIs3WwnmLgQYwC1LOkFpU9JQSs3bf/Z24Ob0uBIxEIOIXBEqESIxIpDzfz678KpxEUMqMPFdIWSDLHVJmpdRFp/8U7idcjIH3DtPYg+OIlJImTQOcbWGM+X/ylqG/gXPGUitqrVjXVTOEDvbQ34QP1Xm6oawy5NYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JpaAuditingRegistrar\"\n        title=\"JpaAuditingRegistrar\"\n        src=\"/static/03cf5aa0426628543dec4b0843ee2d35/37523/JpaAuditingRegistrar.png\"\n        srcset=\"/static/03cf5aa0426628543dec4b0843ee2d35/e9ff0/JpaAuditingRegistrar.png 180w,\n/static/03cf5aa0426628543dec4b0843ee2d35/f21e7/JpaAuditingRegistrar.png 360w,\n/static/03cf5aa0426628543dec4b0843ee2d35/37523/JpaAuditingRegistrar.png 720w,\n/static/03cf5aa0426628543dec4b0843ee2d35/302a4/JpaAuditingRegistrar.png 1080w,\n/static/03cf5aa0426628543dec4b0843ee2d35/07a9c/JpaAuditingRegistrar.png 1440w,\n/static/03cf5aa0426628543dec4b0843ee2d35/95e59/JpaAuditingRegistrar.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><a href=\"https://javacan.tistory.com/entry/spring-at-enable-config\">ìŠ¤í”„ë§ @Enable ì„¤ì • ì„¸ ê°€ì§€ êµ¬í˜„ ë°©ì‹ - ìë°”ìº”</a> í¬ìŠ¤íŒ…ì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ ì´í•´ì— ë„ì›€ì„ ë°›ì•˜ëŠ”ë°, ì´ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ ë¹ˆ ì„¤ì •ì„ ì§ì ‘ ë“±ë¡í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.\në°”ë¡œ ìƒìœ„ì˜ <code class=\"language-text\">AuditingBeanDefinitionRegistrarSupport</code>ì—ì„œ í•˜ìœ„ <code class=\"language-text\">JpaAuditingRegistrar</code>ì˜ <code class=\"language-text\">registerAuditListenerBeanDefinition</code>ë¥¼ í˜¸ì¶œí•˜ê³  ìˆê³ â€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingBeanDefinitionRegistrarSupport</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ImportBeanDefinitionRegistrar</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerBeanDefinitions</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AnnotationMetadata</span> annotationMetadata<span class=\"token punctuation\">,</span> <span class=\"token class-name\">BeanDefinitionRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>annotationMetadata<span class=\"token punctuation\">,</span> <span class=\"token string\">\"AnnotationMetadata must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>registry<span class=\"token punctuation\">,</span> <span class=\"token string\">\"BeanDefinitionRegistry must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token class-name\">AbstractBeanDefinition</span> ahbd <span class=\"token operator\">=</span> <span class=\"token function\">registerAuditHandlerBeanDefinition</span><span class=\"token punctuation\">(</span>registry<span class=\"token punctuation\">,</span> <span class=\"token function\">getConfiguration</span><span class=\"token punctuation\">(</span>annotationMetadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">registerAuditListenerBeanDefinition</span><span class=\"token punctuation\">(</span>ahbd<span class=\"token punctuation\">,</span> registry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>ì´ ë©”ì„œë“œì—ì„œ í¬ìŠ¤íŒ… ì´ˆë°˜ì— ë´¤ë˜ í‚¤ì›Œë“œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaAuditingRegistrar</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AuditingBeanDefinitionRegistrarSupport</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerAuditListenerBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanDefinition</span> auditingHandlerDefinition<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">BeanDefinitionRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>registry<span class=\"token punctuation\">.</span><span class=\"token function\">containsBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JPA_MAPPING_CONTEXT_BEAN_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tregistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JPA_MAPPING_CONTEXT_BEAN_NAME</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//</span>\n\t\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">RootBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaMetamodelMappingContextFactoryBean</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><code class=\"language-text\">JPA metamodel must not be empty</code> ì—ëŸ¬ ë¬¸êµ¬ê°€ ìˆë˜ <code class=\"language-text\">JpaMetamodelMappingContext</code> í´ë˜ìŠ¤ê°€ ê¸°ì–µë‚˜ëŠ”ê°€?\n<code class=\"language-text\">JpaMetamodelMappingContextFactoryBean</code>ë¼ëŠ” ì •ì§í•œ ì´ë¦„ì˜ íŒ©í† ë¦¬ ë¹ˆì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì£¼ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMetamodelMappingContextFactoryBean</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractFactoryBean</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationContextAware</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span> <span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Initializing JpaMetamodelMappingContextâ€¦\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token class-name\">JpaMetamodelMappingContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMetamodels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        context<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Finished initializing JpaMetamodelMappingContext!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t * Obtains all {@link Metamodel} instances of the current {@link ApplicationContext}.\n\t **/</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Metamodel</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getMetamodels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>beanFactory <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BeanFactory must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EntityManagerFactory</span><span class=\"token punctuation\">></span></span> factories <span class=\"token operator\">=</span> <span class=\"token class-name\">BeanFactoryUtils</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">beansOfTypeIncludingAncestors</span><span class=\"token punctuation\">(</span>beanFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">EntityManagerFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> factories<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EntityManagerFactory</span><span class=\"token operator\">::</span><span class=\"token function\">getMetamodel</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StreamUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUnmodifiableSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">getMetamodels()</code> ë©”ì„œë“œì— ì¹œì ˆí•˜ê²Œ í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì˜ ëª¨ë“  <code class=\"language-text\">Metamodel</code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ëŠ”ë‹¤ê³  ì í˜€ìˆë‹¤.\nì•„ê¹Œ ë³´ì•˜ë˜ <code class=\"language-text\">EntityManagerFactory</code>ë„ ë³´ì¸ë‹¤.</p>\n<br>\n<h2 id=\"-ë”-ë‚˜ì€-í•´ê²°ë²•\" style=\"position:relative;\"><a href=\"#-%EB%8D%94-%EB%82%98%EC%9D%80-%ED%95%B4%EA%B2%B0%EB%B2%95\" aria-label=\" ë” ë‚˜ì€ í•´ê²°ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘€ ë” ë‚˜ì€ í•´ê²°ë²•?</h2>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ì‹¤í–‰í•  ë•ŒëŠ” JPA ê´€ë ¨ ë¹ˆì´ ë¡œë”©ë˜ì§€ ì•Šì•„ì„œ. ë¼ëŠ” ì´ìœ ë¥¼ ë‚©ë“í•˜ê¸° ìœ„í•´ ë§ì´ ëŒì•„ì™”ë‹¤.\n<code class=\"language-text\">@MockBean</code>ì„ ì“°ë©´ <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ëŠ˜ì–´ë‚  ë•Œ ë§ˆë‹¤ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.\ní•˜ì§€ë§Œ ì´ ì‚¬ì†Œí•œ ê·€ì°®ìŒì´ ì§„ì§œ ë¬¸ì œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í•œë‹¤.\n<strong>ì§„ì§œ ë¬¸ì œ</strong>ëŠ” <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ ì˜ë„í•œ ëŒ€ë¡œ ë¹ˆ ì„¤ì •ì´ ë¶„ë¦¬ë˜ê³  ìˆì§€ ì•ŠëŠ” ìƒí™©ì´ ì•„ë‹ê¹Œ?</p>\n<p>Auditingì„ ë„ì…í•  ë•Œ, <code class=\"language-text\">Application</code> í´ë˜ìŠ¤ì— <code class=\"language-text\">@EnableJpaAuditing</code>ì„ ë¶™ì˜€ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token annotation punctuation\">@ConfigurationPropertiesScan</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PickpickApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PickpickApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@MockBean</code> í•´ê²°ë²•ì´ ê²€ìƒ‰ì— ë§ì´ ë‚˜ì˜¤ëŠ” ê±¸ ë³´ë©´, ì´ë ‡ê²Œ ì„¤ì •í•œ ì‚¬ëŒë“¤ì´ ë§ì€ ë“¯ í•˜ë‹¤.\nì´ë¥¼ <code class=\"language-text\">@Configuration</code> í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ <code class=\"language-text\">@EnableJpaAuditing</code>ë¥¼ ê±°ê¸° ë¶™ì´ëŠ” í•´ê²° ë°©ë²•ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ConfigurationPropertiesScan</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PickpickApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PickpickApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingConfig</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ í•˜ë©´ <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ <code class=\"language-text\">@MockBean</code>ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\ní•´ë‹¹ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•˜ê¸°ë¥¼ ì œì•ˆí•´ë´ì•¼ê² ë‹¤.</p>\n<br>\n<h3 id=\"-ë¶€ë¡---ìë°”ë…ì„-ì˜-ì½ì\" style=\"position:relative;\"><a href=\"#-%EB%B6%80%EB%A1%9D---%EC%9E%90%EB%B0%94%EB%8F%85%EC%9D%84-%EC%9E%98-%EC%9D%BD%EC%9E%90\" aria-label=\" ë¶€ë¡   ìë°”ë…ì„ ì˜ ì½ì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š ë¶€ë¡ - ìë°”ë…ì„ ì˜ ì½ì</h3>\n<p>ì¶”ê°€ë¡œ ë³¼ë§Œí•œ ë¶€ë¶„ì´ ìˆë‹¤.\nAuditingì„ ì‚¬ìš©í•  ì—”í‹°í‹°ì— ë¶™ì´ëŠ” ë¦¬ìŠ¤ë„ˆ í´ë˜ìŠ¤ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@EntityListeners</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AuditingEntityListener</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Bookmark</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•´ë‹¹ ë¦¬ìŠ¤ë„ˆ í´ë˜ìŠ¤ì˜ ìë°”ë… ì£¼ì„ì„ ë³´ë©´ <code class=\"language-text\">@Configuration</code> í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token comment\">/**\n * JPA entity listener to capture auditing information on persiting and updating entities. To get this one flying be\n * sure you configure it as entity listener in your {@code orm.xml} as follows:\n * ...\n * After that it's just a matter of activating auditing in your Spring config:\n *\n * @Configuration\n * @EnableJpaAuditing\n * class ApplicationConfig {\n *\n * }\n */</span>\n<span class=\"token annotation punctuation\">@Configurable</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingEntityListener</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë¬¼ë¡  ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¼ê³  ì˜¬ë ¤ë‘” ê²ƒì€ ì•„ë‹ˆê² ìœ¼ë‚˜â€¦ ìë°”ë…ì„ ì±™ê²¨ë³´ëŠ” ìŠµê´€ì„ ê¸°ë¥´ë©´ ë„ì›€ì´ ë  ê²ƒ ê°™ë‹¤.</p>\n<p>ë¡œì»¬ì—ì„œ ì˜ ëŒì•„ê°€ê³ , ë¨¸ì§€ ë•Œ ì¶©ëŒë„ ë‚˜ì§€ ì•ŠëŠ” ì½”ë“œê°€, ê¹ƒí—™ ì•¡ì…˜ì—ì„œ í„°ì§€ëŠ” ì´ë²ˆ ê°™ì€ ë•Œê°€ ì¢…ì¢… ìˆë‹¤.\nCI êµ¬ì¶•â€¦ ì°¸ ì†Œì¤‘í•˜ë‹¤.</p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\">ğŸ’£ ë¬¸ì œìƒí™©</a></p>\n</li>\n<li>\n<p><a href=\"#-jpa-metamodel\">ğŸ‘¾ JPA Metamodel</a></p>\n</li>\n<li>\n<p><a href=\"#-enablejpaauditing\">ğŸ§ EnableJpaAuditing</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%94-%EB%82%98%EC%9D%80-%ED%95%B4%EA%B2%B0%EB%B2%95\">ğŸ‘€ ë” ë‚˜ì€ í•´ê²°ë²•?</a></p>\n<ul>\n<li><a href=\"#-%EB%B6%80%EB%A1%9D---%EC%9E%90%EB%B0%94%EB%8F%85%EC%9D%84-%EC%9E%98-%EC%9D%BD%EC%9E%90\">ğŸ“š ë¶€ë¡ - ìë°”ë…ì„ ì˜ ì½ì</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 14, 2022","title":"[JPA] EnableJpaAuditingì˜ ë‚´ë¶€ì™€ CIì˜ ì†Œì¤‘í•¨","categories":"Spring JPA íŠ¸ëŸ¬ë¸”ìŠˆíŒ…","author":"ì¨ë¨¸","emoji":"headers/jpa-auditing-and-ci.png"},"fields":{"slug":"/jpa-auditing-and-ci/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://hyewoncc.github.io","comments":{"utterances":{"repo":"hyewoncc/hyewoncc.github.io"}}}}},"pageContext":{"slug":"/querydsl-refactoring/","nextSlug":"/jpa-auditing-and-ci/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437","3350743975"]}
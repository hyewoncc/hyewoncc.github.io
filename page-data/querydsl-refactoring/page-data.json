{"componentChunkName":"component---src-templates-blog-template-js","path":"/querydsl-refactoring/","result":{"data":{"cur":{"id":"35f48c8a-6132-55b3-af5f-ffe41513fbd0","html":"","excerpt":"","frontmatter":{"date":"October 18, 2022","title":"Querydsl ì½”ë“œ ë¦¬íŒ©í† ë§","categories":"Spring íŠ¸ëŸ¬ë¸”ìŠˆíŒ… etc","author":"ì¨ë¨¸","emoji":"headers/querydsl-refactoring.png"},"fields":{"slug":"/querydsl-refactoring/"}},"next":{"id":"48a52cee-5a60-549e-9e68-7293d2b558b7","html":"<h2 id=\"-ë¬¸ì œìƒí™©\" style=\"position:relative;\"><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\" aria-label=\" ë¬¸ì œìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’£ ë¬¸ì œìƒí™©</h2>\n<p><a href=\"https://github.com/woowacourse-teams/2022-pickpick\">ì¤ì¤</a>ì—ëŠ” ë¶ë§ˆí¬ ì„¤ì •í•œ ë©”ì‹œì§€ë¥¼ ëª¨ì•„ì„œ ë³´ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.\nê¸°ì¡´ì—ëŠ” ì´ ë¶ë§ˆí¬ ëª©ë¡ì„ ë³´ì—¬ì¤„ ë•Œ, ë¶ë§ˆí¬ê°€ ë“±ë¡ ëœ <strong>ë©”ì‹œì§€ì˜ ìƒì„± ì‹œê°„</strong> ìˆœì„œëŒ€ë¡œ ë³´ì—¬ì¤¬ë‹¤.\nê·¸ëŸ¬ë‹¤ ì‚¬ìš©ì í¸ì˜ë¥¼ ìœ„í•´ ì´ë¥¼ <strong>ë¶ë§ˆí¬ ë“±ë¡ ì‹œê°„</strong> ìˆœì„œëŒ€ë¡œ ë³´ì—¬ì£¼ê¸°ë¡œ ë°”ê¿¨ë‹¤.\nì´ ë•Œ, ë¶ë§ˆí¬ ë“±ë¡ ì‹œê°„ì„ í¸í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ <code class=\"language-text\">JPA Auditing</code>ì„ ë„ì…í–ˆë‹¤.\nê·¸ë¦¬ê³  <a href=\"https://github.com/woowacourse-teams/2022-pickpick/pull/568\">í•´ë‹¹ PR</a>ì€ ìˆœì¡°ë¡­ê²Œ ë¨¸ì§€ ë˜ì—ˆëŠ”ë°â€¦</p>\n<p>íŒ€ì› ë´„ì´ ì§„í–‰í•œ <a href=\"https://github.com/woowacourse-teams/2022-pickpick/pull/570\">ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ WebMvcTestë¡œ ê°œì„ í•˜ëŠ” PR</a>ì—ì„œ ë¬¸ì œê°€ ìƒê²¼ë‹¤.\në´„ì˜ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ì˜ ëŒì•„ê°€ëŠ” ìƒíƒœì˜€ëŠ”ë°, PRì˜ <a href=\"https://github.com/woowacourse-teams/2022-pickpick/actions/runs/3179844507/jobs/5182750602\">github action</a>ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQY062PfWuDQAzG7/t/t1FY5/pi9fSUVtmqtSaXO1t9xl3HGGywfxb4kRCeJE9U8rqB1gWquoapaqSHDLt9iqI0KE2F9UsSc5ZrbHd7MDNCLMvyK4qYQUQYR4K1gpEIXX+JvTB87joEDVuLyzBgmm5xcJ5nzPPyA3UlAtHj6n+E8s5HZ845TH6C9x4iArECEQdmCyaObsNhthL1wfH3OmjDJ6ppW6ye16iaFrqucXp7j5hTExmYIbd7hJ37WmAjAiuPpfKZ1bXvcXxagfMC4yED5RrWVOBcY0w28KWBTzO4LMf93P358gfXNs4R38PsUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ê¹ƒí—™ ì•¡ì…˜ ì‹¤íŒ¨\"\n        title=\"ê¹ƒí—™ ì•¡ì…˜ ì‹¤íŒ¨\"\n        src=\"/static/d4cfb4b4007765978f585ce48e18552c/37523/ci_fail.png\"\n        srcset=\"/static/d4cfb4b4007765978f585ce48e18552c/e9ff0/ci_fail.png 180w,\n/static/d4cfb4b4007765978f585ce48e18552c/f21e7/ci_fail.png 360w,\n/static/d4cfb4b4007765978f585ce48e18552c/37523/ci_fail.png 720w,\n/static/d4cfb4b4007765978f585ce48e18552c/302a4/ci_fail.png 1080w,\n/static/d4cfb4b4007765978f585ce48e18552c/07a9c/ci_fail.png 1440w,\n/static/d4cfb4b4007765978f585ce48e18552c/95e59/ci_fail.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ë³€ê²½í•œ ëª¨ë“  <code class=\"language-text\">RestDocs</code>ìš© ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ê°€ ê°™ì€ ì´ìœ ë¡œ ì‹¤íŒ¨í•˜ê³  ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalStateException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Failed</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">load</span> <span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaAuditingHandler'<span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> resolve reference <span class=\"token keyword\">to</span> <span class=\"token namespace\">bean</span> 'jpaMappingContext' <span class=\"token keyword\">while</span> setting constructor argument<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaMappingContext'<span class=\"token operator\">:</span> <span class=\"token class-name\">Invocation</span> of init method failed<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalArgumentException</span><span class=\"token operator\">:</span> <span class=\"token constant\">JPA</span> metamodel must not be empty<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span>BeanCreationException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Error</span> creating bean <span class=\"token keyword\">with</span> <span class=\"token namespace\">name</span> 'jpaMappingContext'<span class=\"token operator\">:</span> <span class=\"token class-name\">Invocation</span> of init method failed<span class=\"token punctuation\">;</span> \nnested exception is <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>IllegalArgumentException</span><span class=\"token operator\">:</span> <span class=\"token constant\">JPA</span> metamodel must not be empty<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><code class=\"language-text\">JPA metamodel must not be empty</code>ë¼ëŠ” ë¬¸êµ¬ê°€ ëˆˆì— ëˆë‹¤.\ní•´ë‹¹ ë¬¸êµ¬ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²€ìƒ‰í•´ë³´ë©´ <code class=\"language-text\">JpaMetamodelMappingContext</code>ë¼ëŠ” í´ë˜ìŠ¤ê°€ ë‚˜ì˜¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span>\n\t\t<span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractMappingContext</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">JpaPersistentEntityImpl</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">JpaPersistentProperty</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Metamodels</span> models<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">PersistenceProvider</span> persistenceProvider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Creates a new JPA {@link Metamodel} based {@link MappingContext}.\n\t *\n\t * @param models must not be {@literal null} or empty.\n\t */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Metamodel</span><span class=\"token punctuation\">></span></span> models<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">,</span> <span class=\"token string\">\"JPA metamodel must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notEmpty</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">,</span> <span class=\"token string\">\"JPA metamodel must not be empty!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>ì‚¬ì‹¤ ì´ ë¬¸êµ¬ë¡œ ê²€ìƒ‰í•˜ë©´ ë§ì€ ì‚¬ëŒë“¤ì´ í•´ê²°ë²•ì„ ì´ë¯¸ ì˜¬ë ¤ë‘ì—ˆë‹¤.\nê·¸ëŸ°ë° ì—¬ê¸°ê¹Œì§€ ì˜¤ë‹ˆ, <code class=\"language-text\">JPA metamodel</code>ì´ ëŒ€ì²´ ë­”ë°? <code class=\"language-text\">null</code>ë„ ì•„ë‹ˆê³  <code class=\"language-text\">empty</code>ë¼ê³ ?\nì´ê±°ë‘ <code class=\"language-text\">Auditing</code>ì€ ë¬´ìŠ¨ ìƒê´€ì´ì§€? ë“±ë“± ê¶ê¸ˆí•œ ì ì´ ìƒê²¨ì„œ ì½”ë“œë¥¼ ì¡°ê¸ˆ ì—´ì–´ë´¤ë‹¤.</p>\n<br>\n<h2 id=\"-jpa-metamodel\" style=\"position:relative;\"><a href=\"#-jpa-metamodel\" aria-label=\" jpa metamodel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘¾ JPA Metamodel</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ í…ŒìŠ¤íŠ¸ê°€ ì˜ ì‹¤í–‰ ë  ë•Œì™€, <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ë¶™ì—¬ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•Œ, ì € <code class=\"language-text\">models</code>ì—ëŠ” ë¬´ìŠ¨ ê°’ì´ ë“¤ì–´ê°€ìˆì„ê¹Œ?\nì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²½ìš°, <code class=\"language-text\">MetamodelImpl</code>ì´ë¼ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ê´€ë ¨ëœ ì •ë³´ê°€ ë‹´ê²¨ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4UlEQVQoz22Sy24UMRBF538gQmJDJsn0w+5uv8ru12QGERFNku+ABYsACiD++CB7JNiwuK5Sq+t03eveDIPiGAzWCNoKXZYT1OBpekfTWZTJveWq1v9XpehdwMWRzcX4BfXhM/b0jH78ze7+J+3pF+r0k/rjC93DD5r7F94s33g1PnMxfeVi/qfX83feTp/ofWTwgc27xiHieJgnbmXPLCsiK0NWXDFxxU0HtF9o7MS1Dmwby2Vj2bau1J327FrNdlezyUfyFY/Jcu+FxyA8SSQ5h7GWwTqM97gQ8CJISjRac1M33NQ1V7uKqlUFeFU1bC53LZO0PI2eUxh5iiN3ITJ5YXQB40KxYrxgJTF4oekG2t5wXbdsd02B5WeV6vKGDdYojjIwO2HNgy6gC0gwIeIkFVgOvbNne1kZkKV6Q6268oFNXrNqW5xVaOvLQB72cSROMz5NxGlBSj+Slj2dcajBMLj8fo4kUOUMs+UMrJUiOF1sZYshTaR5ZVpvGZd9qfP+3M/7Q6k2xAIbXKC3nptGnTM8b6gIXjGESO+FMC3EZc9yOBbAcntkPbwvfVYG5BhMkFJzxtluAW6rbFdzlwyrjxwlcYwjxzQhaSy55Y1lnItyn3/ifAmN7kutdf8X+AeTsHTWx+/SzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metamodel\"\n        title=\"metamodel\"\n        src=\"/static/723d9c45ddb107118ff118a946096b8c/37523/models_not_empty.png\"\n        srcset=\"/static/723d9c45ddb107118ff118a946096b8c/e9ff0/models_not_empty.png 180w,\n/static/723d9c45ddb107118ff118a946096b8c/f21e7/models_not_empty.png 360w,\n/static/723d9c45ddb107118ff118a946096b8c/37523/models_not_empty.png 720w,\n/static/723d9c45ddb107118ff118a946096b8c/302a4/models_not_empty.png 1080w,\n/static/723d9c45ddb107118ff118a946096b8c/07a9c/models_not_empty.png 1440w,\n/static/723d9c45ddb107118ff118a946096b8c/95e59/models_not_empty.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•ŒëŠ” í•´ë‹¹ <code class=\"language-text\">models</code>ê°€ ë¹„ì–´ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.111111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAQklEQVQI10XISwqAMAwAUa9lBUvTTxJTt97/JiPYhYvHwGy9F55wTAPRi6pBtaX5pNn6ZThHrqQspK+//RRkODZvXqf9I/YqVpU1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metamodel empty\"\n        title=\"metamodel empty\"\n        src=\"/static/9fccb72b921b1d2b7efe811c83d1dc54/37523/models_empty.png\"\n        srcset=\"/static/9fccb72b921b1d2b7efe811c83d1dc54/e9ff0/models_empty.png 180w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/f21e7/models_empty.png 360w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/37523/models_empty.png 720w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/302a4/models_empty.png 1080w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/07a9c/models_empty.png 1440w,\n/static/9fccb72b921b1d2b7efe811c83d1dc54/95e59/models_empty.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ì´ ì´ìŠˆë¥¼ ê²€ìƒ‰í•˜ë©´ ì œì¼ ìì£¼ ë‚˜ì˜¤ëŠ” í•´ê²°ë²•ì´ <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ì“°ëŠ” ê³³ì— ì•„ë˜ì™€ ê°™ì´ <code class=\"language-text\">@MockBean</code>ì„ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebMvcTest</span>\n<span class=\"token annotation punctuation\">@MockBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ControllerTest</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¼ë‹¨ ì´ í•´ê²°ë²•ì„ ì ìš©í–ˆì—ˆì§€ë§Œ, ë‚´ë¶€ ì½”ë“œë¥¼ ì—´ê³  ë³´ë‹ˆ ì˜ë¬¸ì´ ë“ ë‹¤.\nì´ë ‡ê²Œ í•˜ë©´ <code class=\"language-text\">JpaMetamodelMappingContext</code> ìƒì„±ìì˜ <code class=\"language-text\">Assert</code>ë¬¸ì´ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë‹ˆ í„°ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤.\nê·¸ëŸ°ë° ì»¨íŠ¸ë¡¤ëŸ¬ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì„ JPA ê´€ë ¨ ë¹ˆì„ ëª¨í‚¹í•´ì£¼ëŠ” ê²ƒì´ ë§ì„ê¹Œ?</p>\n<p>ì–´ì¨Œë“  ì´ <code class=\"language-text\">MetamodelImpl</code>ì´ ì–´ë””ì„œ ìƒì„±ë˜ëŠ”ê°€ë¥¼ ë³´ìë©´â€¦</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVQY022NbWrDMBAFfZt6JdCHV1qngbpgS3ba+99nSlxampIfs7AP3rzBOYd3nvpWWNaF1m9s/aCYclln1q2ff9sPtrbT+nFmWTNn1/sHhp8wTQmtilnFbCbGQNLIpMo0FerVKJdKne0kpPBceD/OO5w4RASREZEXYgoUjZT7UE6UkjDLhOAZZfyV/ZcOz1a8CHp95X1b+OiN2/7N596YNSPyKPvr+AKZAH5yRHyEYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SessionFactoryObserver\"\n        title=\"SessionFactoryObserver\"\n        src=\"/static/6a7541ca966e3424be235b81315a3593/37523/sessionfactoryobserver.png\"\n        srcset=\"/static/6a7541ca966e3424be235b81315a3593/e9ff0/sessionfactoryobserver.png 180w,\n/static/6a7541ca966e3424be235b81315a3593/f21e7/sessionfactoryobserver.png 360w,\n/static/6a7541ca966e3424be235b81315a3593/37523/sessionfactoryobserver.png 720w,\n/static/6a7541ca966e3424be235b81315a3593/302a4/sessionfactoryobserver.png 1080w,\n/static/6a7541ca966e3424be235b81315a3593/07a9c/sessionfactoryobserver.png 1440w,\n/static/6a7541ca966e3424be235b81315a3593/95e59/sessionfactoryobserver.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Incubating</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TypeConfiguration</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SessionFactoryObserver</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MetamodelImplementor</span> <span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionFactoryImplementor</span> sessionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">debugf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"Scoping TypeConfiguration [%s] to SessionFactoryImpl [%s]\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> sessionFactory <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> importEntry <span class=\"token operator\">:</span> scope<span class=\"token punctuation\">.</span>metadataBuildingContext<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadataCollector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getImports</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> importMap<span class=\"token punctuation\">.</span><span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\timportMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> importEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tscope<span class=\"token punctuation\">.</span><span class=\"token function\">setSessionFactory</span><span class=\"token punctuation\">(</span> sessionFactory <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsessionFactory<span class=\"token punctuation\">.</span><span class=\"token function\">addObserver</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MetamodelImpl</span><span class=\"token punctuation\">(</span> sessionFactory<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>  </code></pre></div>\n<p><code class=\"language-text\">SessionFactoryObserver</code>ë¥¼ êµ¬í˜„í•œ <code class=\"language-text\">TypeConfiguration</code> í´ë˜ìŠ¤ì˜ <code class=\"language-text\">scope</code>ë¼ëŠ” ë©”ì„œë“œì—ì„œ ìƒì„±í•´ì£¼ê³  ìˆë‹¤.\nê·¸ë¦¬ê³  ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì€ <code class=\"language-text\">Hibernate</code>ì˜ <code class=\"language-text\">SessionFactoryImpl</code>ë¼ëŠ” í´ë˜ìŠ¤ë‹¤.\nì´ í´ë˜ìŠ¤ëŠ” <code class=\"language-text\">JPA</code>ì˜ <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIklEQVQoz31RW5KEIBDzOALy8gUICqhz/yNlCyzdnd2p/Qihi5BOVzeUUlBCUflfkMqEELCOYQ4TtpSQjhM+rGBFwxiarusglYQQooJzDiHLXVbctZSX5mYuOFSvoLSqmtKMFUPZCyzbgrjviPnAOI+Y/Ih4ZGwpo5972NUgph3pPBDzDu9X9EYjpBX5eGEYhit5MSzH3U1qWdMWqPGuBYQW9V3P+kokeB2bCQbK6JOucNNx9p0gH8jnif11Ih8n9vOFEDb0VsPHgLhnbDHVkdu2fUx+cnMvhVBSY9eOHb2YUahJYnYWxjmY4DAbC+sWKK3/mD0jv4EWwcUFetKwzsEtHsvqKxdo3b8ZfTT8LajpO44hBKxbrOOWRRljQUj78c8XcKH7CkIlBQUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SessionFactoryImpl\"\n        title=\"SessionFactoryImpl\"\n        src=\"/static/759d4349731893465904fe5e8d57ae45/37523/SessionFactoryImpl.png\"\n        srcset=\"/static/759d4349731893465904fe5e8d57ae45/e9ff0/SessionFactoryImpl.png 180w,\n/static/759d4349731893465904fe5e8d57ae45/f21e7/SessionFactoryImpl.png 360w,\n/static/759d4349731893465904fe5e8d57ae45/37523/SessionFactoryImpl.png 720w,\n/static/759d4349731893465904fe5e8d57ae45/302a4/SessionFactoryImpl.png 1080w,\n/static/759d4349731893465904fe5e8d57ae45/07a9c/SessionFactoryImpl.png 1440w,\n/static/759d4349731893465904fe5e8d57ae45/95e59/SessionFactoryImpl.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SessionFactoryImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SessionFactoryImplementor</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">SessionFactoryImpl</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token keyword\">final</span> <span class=\"token class-name\">MetadataImplementor</span> metadata<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">SessionFactoryOptions</span> options<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">QueryPlanCache<span class=\"token punctuation\">.</span>QueryPlanCreator</span> queryPlanCacheFunction<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MetamodelImpl</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>metamodel <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>\n\t\t\tmetadata<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token function\">determineJpaMetaModelPopulationSetting</span><span class=\"token punctuation\">(</span> properties <span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ <code class=\"language-text\">MetamodelImpl.initialize()</code>ë¥¼ í˜¸ì¶œí•˜ê³ â€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MetamodelImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MetamodelImplementor</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MetadataImplementor</span> mappingMetadata<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JpaMetaModelPopulationSetting</span> jpaMetaModelPopulationSetting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imports<span class=\"token punctuation\">.</span><span class=\"token function\">putAll</span><span class=\"token punctuation\">(</span> mappingMetadata<span class=\"token punctuation\">.</span><span class=\"token function\">getImports</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ <code class=\"language-text\">mappingMetadata</code>ì—ì„œ ì—¬ëŸ¬ ê°’ì„ ë¶ˆëŸ¬ì™€ ì €ì¥í•˜ê²Œ ëœë‹¤.\nì´ <code class=\"language-text\">mappingMetadata</code>ëŠ” <code class=\"language-text\">SessionFactoryBuilderImpl</code>ì„ í†µí•´ <code class=\"language-text\">SessionFactoryImpl</code>ì— ì£¼ì…ë˜ê³ ,\n<code class=\"language-text\">SessionFactoryBuilderImpl</code>ì€ <code class=\"language-text\">DefaultSessionFactoryBuilderService</code>ì„ í†µí•´ ìƒì„±ë˜ëŠ”ë°â€¦\nì˜ ê³¼ì •ì„ ë”°ë¼ê°€ë‹¤ë³´ë‹ˆ ì–´ëŠìƒˆ <code class=\"language-text\">MetadataImpl</code>ë¡œ ëŒì•„ì˜¤ê³  ìˆì—ˆë‹¤. ğŸ˜µ</p>\n<p>ê²°ë¡ ì€ ì´ <code class=\"language-text\">MetamodelImpl</code>ì€ ì—”í‹°í‹° ì •ë³´ë¥¼ ë‹´ì€ JPA <code class=\"language-text\">Metamodel</code>ì˜ í•˜ì´ë²„ë„¤ì´íŠ¸ì˜ êµ¬í˜„ì²´ë©°, ê·¸ë˜ì„œ <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ ìƒì„±ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ë‹¤.\nì›ë˜ ìµœì´ˆ ìƒì„± ì‹œì ì„ ì°¾ìœ¼ë ¤ê³  í–ˆëŠ”ë° ê²°êµ­ ì°¾ì§€ ëª»í–ˆë‹¤.</p>\n<p>JPA ê´€ë ¨ ë¹ˆì´ ë¡œë”©ë˜ëŠ” <code class=\"language-text\">@DataJpaTest</code>ê°€ ë¶™ì€ í…ŒìŠ¤íŠ¸ëŠ” <code class=\"language-text\">models</code>ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<br>\n<h2 id=\"-enablejpaauditing\" style=\"position:relative;\"><a href=\"#-enablejpaauditing\" aria-label=\" enablejpaauditing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§ EnableJpaAuditing</h2>\n<p>ê·¸ë ‡ë‹¤ë©´ ì–´ë–¤ ê²½ìœ„ë¡œ ì´ <code class=\"language-text\">Metamodel</code>ì´ í•„ìš”í–ˆë˜ ê±¸ê¹Œ?\nAuditingì„ ìœ„í•´ ì¶”ê°€í–ˆë˜ <code class=\"language-text\">@EnableJpaAuditing</code> ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ <code class=\"language-text\">JpaAuditingRegistrar</code> í´ë˜ìŠ¤ë¥¼ import í•˜ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Import</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaAuditingRegistrar</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">EnableJpaAuditing</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">JpaAuditingRegistrar</code>ëŠ” spring data jpaì— ë“¤ì–´ìˆëŠ”ë°, springì˜ <code class=\"language-text\">ImportBeanDefinitionRegistrar</code> í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAs0lEQVQY042P2w7CIBBE+zdYoGgv7LJQ2hf//5fGuLHaNDX6cDIJGU52Guccjlhr0V07RJkgUiD5Qy4zOAm899o7/m2OIs3WwnmLgQYwC1LOkFpU9JQSs3bf/Z24Ob0uBIxEIOIXBEqESIxIpDzfz678KpxEUMqMPFdIWSDLHVJmpdRFp/8U7idcjIH3DtPYg+OIlJImTQOcbWGM+X/ylqG/gXPGUitqrVjXVTOEDvbQ34QP1Xm6oawy5NYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JpaAuditingRegistrar\"\n        title=\"JpaAuditingRegistrar\"\n        src=\"/static/03cf5aa0426628543dec4b0843ee2d35/37523/JpaAuditingRegistrar.png\"\n        srcset=\"/static/03cf5aa0426628543dec4b0843ee2d35/e9ff0/JpaAuditingRegistrar.png 180w,\n/static/03cf5aa0426628543dec4b0843ee2d35/f21e7/JpaAuditingRegistrar.png 360w,\n/static/03cf5aa0426628543dec4b0843ee2d35/37523/JpaAuditingRegistrar.png 720w,\n/static/03cf5aa0426628543dec4b0843ee2d35/302a4/JpaAuditingRegistrar.png 1080w,\n/static/03cf5aa0426628543dec4b0843ee2d35/07a9c/JpaAuditingRegistrar.png 1440w,\n/static/03cf5aa0426628543dec4b0843ee2d35/95e59/JpaAuditingRegistrar.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><a href=\"https://javacan.tistory.com/entry/spring-at-enable-config\">ìŠ¤í”„ë§ @Enable ì„¤ì • ì„¸ ê°€ì§€ êµ¬í˜„ ë°©ì‹ - ìë°”ìº”</a> í¬ìŠ¤íŒ…ì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ ì´í•´ì— ë„ì›€ì„ ë°›ì•˜ëŠ”ë°, ì´ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ ë¹ˆ ì„¤ì •ì„ ì§ì ‘ ë“±ë¡í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.\në°”ë¡œ ìƒìœ„ì˜ <code class=\"language-text\">AuditingBeanDefinitionRegistrarSupport</code>ì—ì„œ í•˜ìœ„ <code class=\"language-text\">JpaAuditingRegistrar</code>ì˜ <code class=\"language-text\">registerAuditListenerBeanDefinition</code>ë¥¼ í˜¸ì¶œí•˜ê³  ìˆê³ â€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingBeanDefinitionRegistrarSupport</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ImportBeanDefinitionRegistrar</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerBeanDefinitions</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AnnotationMetadata</span> annotationMetadata<span class=\"token punctuation\">,</span> <span class=\"token class-name\">BeanDefinitionRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>annotationMetadata<span class=\"token punctuation\">,</span> <span class=\"token string\">\"AnnotationMetadata must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>registry<span class=\"token punctuation\">,</span> <span class=\"token string\">\"BeanDefinitionRegistry must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token class-name\">AbstractBeanDefinition</span> ahbd <span class=\"token operator\">=</span> <span class=\"token function\">registerAuditHandlerBeanDefinition</span><span class=\"token punctuation\">(</span>registry<span class=\"token punctuation\">,</span> <span class=\"token function\">getConfiguration</span><span class=\"token punctuation\">(</span>annotationMetadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">registerAuditListenerBeanDefinition</span><span class=\"token punctuation\">(</span>ahbd<span class=\"token punctuation\">,</span> registry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>ì´ ë©”ì„œë“œì—ì„œ í¬ìŠ¤íŒ… ì´ˆë°˜ì— ë´¤ë˜ í‚¤ì›Œë“œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaAuditingRegistrar</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AuditingBeanDefinitionRegistrarSupport</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerAuditListenerBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanDefinition</span> auditingHandlerDefinition<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token class-name\">BeanDefinitionRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>registry<span class=\"token punctuation\">.</span><span class=\"token function\">containsBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JPA_MAPPING_CONTEXT_BEAN_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tregistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JPA_MAPPING_CONTEXT_BEAN_NAME</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//</span>\n\t\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">RootBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaMetamodelMappingContextFactoryBean</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><code class=\"language-text\">JPA metamodel must not be empty</code> ì—ëŸ¬ ë¬¸êµ¬ê°€ ìˆë˜ <code class=\"language-text\">JpaMetamodelMappingContext</code> í´ë˜ìŠ¤ê°€ ê¸°ì–µë‚˜ëŠ”ê°€?\n<code class=\"language-text\">JpaMetamodelMappingContextFactoryBean</code>ë¼ëŠ” ì •ì§í•œ ì´ë¦„ì˜ íŒ©í† ë¦¬ ë¹ˆì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì£¼ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMetamodelMappingContextFactoryBean</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractFactoryBean</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationContextAware</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span> <span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Initializing JpaMetamodelMappingContextâ€¦\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token class-name\">JpaMetamodelMappingContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMetamodels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        context<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token constant\">LOG</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Finished initializing JpaMetamodelMappingContext!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t * Obtains all {@link Metamodel} instances of the current {@link ApplicationContext}.\n\t **/</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Metamodel</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getMetamodels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>beanFactory <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BeanFactory must not be null!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EntityManagerFactory</span><span class=\"token punctuation\">></span></span> factories <span class=\"token operator\">=</span> <span class=\"token class-name\">BeanFactoryUtils</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">beansOfTypeIncludingAncestors</span><span class=\"token punctuation\">(</span>beanFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">EntityManagerFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> factories<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EntityManagerFactory</span><span class=\"token operator\">::</span><span class=\"token function\">getMetamodel</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StreamUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUnmodifiableSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">getMetamodels()</code> ë©”ì„œë“œì— ì¹œì ˆí•˜ê²Œ í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì˜ ëª¨ë“  <code class=\"language-text\">Metamodel</code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ëŠ”ë‹¤ê³  ì í˜€ìˆë‹¤.\nì•„ê¹Œ ë³´ì•˜ë˜ <code class=\"language-text\">EntityManagerFactory</code>ë„ ë³´ì¸ë‹¤.</p>\n<br>\n<h2 id=\"-ë”-ë‚˜ì€-í•´ê²°ë²•\" style=\"position:relative;\"><a href=\"#-%EB%8D%94-%EB%82%98%EC%9D%80-%ED%95%B4%EA%B2%B0%EB%B2%95\" aria-label=\" ë” ë‚˜ì€ í•´ê²°ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘€ ë” ë‚˜ì€ í•´ê²°ë²•?</h2>\n<p><code class=\"language-text\">@WebMvcTest</code>ë¡œ ì‹¤í–‰í•  ë•ŒëŠ” JPA ê´€ë ¨ ë¹ˆì´ ë¡œë”©ë˜ì§€ ì•Šì•„ì„œ. ë¼ëŠ” ì´ìœ ë¥¼ ë‚©ë“í•˜ê¸° ìœ„í•´ ë§ì´ ëŒì•„ì™”ë‹¤.\n<code class=\"language-text\">@MockBean</code>ì„ ì“°ë©´ <code class=\"language-text\">@WebMvcTest</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ëŠ˜ì–´ë‚  ë•Œ ë§ˆë‹¤ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.\ní•˜ì§€ë§Œ ì´ ì‚¬ì†Œí•œ ê·€ì°®ìŒì´ ì§„ì§œ ë¬¸ì œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í•œë‹¤.\n<strong>ì§„ì§œ ë¬¸ì œ</strong>ëŠ” <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ ì˜ë„í•œ ëŒ€ë¡œ ë¹ˆ ì„¤ì •ì´ ë¶„ë¦¬ë˜ê³  ìˆì§€ ì•ŠëŠ” ìƒí™©ì´ ì•„ë‹ê¹Œ?</p>\n<p>Auditingì„ ë„ì…í•  ë•Œ, <code class=\"language-text\">Application</code> í´ë˜ìŠ¤ì— <code class=\"language-text\">@EnableJpaAuditing</code>ì„ ë¶™ì˜€ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token annotation punctuation\">@ConfigurationPropertiesScan</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PickpickApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PickpickApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@MockBean</code> í•´ê²°ë²•ì´ ê²€ìƒ‰ì— ë§ì´ ë‚˜ì˜¤ëŠ” ê±¸ ë³´ë©´, ì´ë ‡ê²Œ ì„¤ì •í•œ ì‚¬ëŒë“¤ì´ ë§ì€ ë“¯ í•˜ë‹¤.\nì´ë¥¼ <code class=\"language-text\">@Configuration</code> í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ <code class=\"language-text\">@EnableJpaAuditing</code>ë¥¼ ê±°ê¸° ë¶™ì´ëŠ” í•´ê²° ë°©ë²•ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ConfigurationPropertiesScan</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PickpickApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PickpickApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingConfig</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ í•˜ë©´ <code class=\"language-text\">@WebMvcTest</code>ì—ì„œ <code class=\"language-text\">@MockBean</code>ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\ní•´ë‹¹ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•˜ê¸°ë¥¼ ì œì•ˆí•´ë´ì•¼ê² ë‹¤.</p>\n<br>\n<h3 id=\"-ë¶€ë¡---ìë°”ë…ì„-ì˜-ì½ì\" style=\"position:relative;\"><a href=\"#-%EB%B6%80%EB%A1%9D---%EC%9E%90%EB%B0%94%EB%8F%85%EC%9D%84-%EC%9E%98-%EC%9D%BD%EC%9E%90\" aria-label=\" ë¶€ë¡   ìë°”ë…ì„ ì˜ ì½ì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š ë¶€ë¡ - ìë°”ë…ì„ ì˜ ì½ì</h3>\n<p>ì¶”ê°€ë¡œ ë³¼ë§Œí•œ ë¶€ë¶„ì´ ìˆë‹¤.\nAuditingì„ ì‚¬ìš©í•  ì—”í‹°í‹°ì— ë¶™ì´ëŠ” ë¦¬ìŠ¤ë„ˆ í´ë˜ìŠ¤ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@EntityListeners</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AuditingEntityListener</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Bookmark</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•´ë‹¹ ë¦¬ìŠ¤ë„ˆ í´ë˜ìŠ¤ì˜ ìë°”ë… ì£¼ì„ì„ ë³´ë©´ <code class=\"language-text\">@Configuration</code> í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token comment\">/**\n * JPA entity listener to capture auditing information on persiting and updating entities. To get this one flying be\n * sure you configure it as entity listener in your {@code orm.xml} as follows:\n * ...\n * After that it's just a matter of activating auditing in your Spring config:\n *\n * @Configuration\n * @EnableJpaAuditing\n * class ApplicationConfig {\n *\n * }\n */</span>\n<span class=\"token annotation punctuation\">@Configurable</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuditingEntityListener</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë¬¼ë¡  ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¼ê³  ì˜¬ë ¤ë‘” ê²ƒì€ ì•„ë‹ˆê² ìœ¼ë‚˜â€¦ ìë°”ë…ì„ ì±™ê²¨ë³´ëŠ” ìŠµê´€ì„ ê¸°ë¥´ë©´ ë„ì›€ì´ ë  ê²ƒ ê°™ë‹¤.</p>\n<p>ë¡œì»¬ì—ì„œ ì˜ ëŒì•„ê°€ê³ , ë¨¸ì§€ ë•Œ ì¶©ëŒë„ ë‚˜ì§€ ì•ŠëŠ” ì½”ë“œê°€, ê¹ƒí—™ ì•¡ì…˜ì—ì„œ í„°ì§€ëŠ” ì´ë²ˆ ê°™ì€ ë•Œê°€ ì¢…ì¢… ìˆë‹¤.\nCI êµ¬ì¶•â€¦ ì°¸ ì†Œì¤‘í•˜ë‹¤.</p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9\">ğŸ’£ ë¬¸ì œìƒí™©</a></p>\n</li>\n<li>\n<p><a href=\"#-jpa-metamodel\">ğŸ‘¾ JPA Metamodel</a></p>\n</li>\n<li>\n<p><a href=\"#-enablejpaauditing\">ğŸ§ EnableJpaAuditing</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%94-%EB%82%98%EC%9D%80-%ED%95%B4%EA%B2%B0%EB%B2%95\">ğŸ‘€ ë” ë‚˜ì€ í•´ê²°ë²•?</a></p>\n<ul>\n<li><a href=\"#-%EB%B6%80%EB%A1%9D---%EC%9E%90%EB%B0%94%EB%8F%85%EC%9D%84-%EC%9E%98-%EC%9D%BD%EC%9E%90\">ğŸ“š ë¶€ë¡ - ìë°”ë…ì„ ì˜ ì½ì</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 14, 2022","title":"[JPA] EnableJpaAuditingì˜ ë‚´ë¶€ì™€ CIì˜ ì†Œì¤‘í•¨","categories":"Spring JPA íŠ¸ëŸ¬ë¸”ìŠˆíŒ…","author":"ì¨ë¨¸","emoji":"headers/jpa-auditing-and-ci.png"},"fields":{"slug":"/jpa-auditing-and-ci/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://hyewoncc.github.io","comments":{"utterances":{"repo":"hyewoncc/hyewoncc.github.io"}}}}},"pageContext":{"slug":"/querydsl-refactoring/","nextSlug":"/jpa-auditing-and-ci/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437","3350743975"]}
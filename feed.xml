<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[어제보다 오늘 더]]></title><description><![CDATA[써머]]></description><link>https://hyewoncc.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Thu, 25 Aug 2022 07:21:57 GMT</lastBuildDate><item><title><![CDATA[[JPA]는 새로운 엔티티를 어떻게 알아볼까?]]></title><description><![CDATA[Long id = 0L…]]></description><link>https://hyewoncc.github.io/jpa-is-new/</link><guid isPermaLink="false">https://hyewoncc.github.io/jpa-is-new/</guid><pubDate>Wed, 24 Aug 2022 06:55:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;long-id--0l-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#long-id--0l-&quot; aria-label=&quot;long id  0l  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Long id = 0L ?&lt;/h2&gt;
&lt;p&gt;코틀린을 공부하다 참고하려고 &lt;a href=&quot;https://github.com/woowacourse/service-apply&quot;&gt;우테코 지원 플랫폼&lt;/a&gt;의 코드를 봤다.
그 중 흥미로운 점을 발견했는데, 엔티티를 생성할 때 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;0L&lt;/code&gt;로 초기화 하는 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Long &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0L&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이게 왜 흥미로웠냐면 &lt;a href=&quot;https://hyewoncc.github.io/2022/08/13/jpa-static-fixture-trouble.html&quot;&gt;상수 픽스쳐 사용 주의&lt;/a&gt; 포스팅에서 썼듯이 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이 아니면 &lt;code class=&quot;language-text&quot;&gt;merge()&lt;/code&gt;를 시행한다고 생각했기 때문이다.
굳이 &lt;code class=&quot;language-text&quot;&gt;0L&lt;/code&gt;로 초기화하면 &lt;code class=&quot;language-text&quot;&gt;select&lt;/code&gt; 비용만 추가로 들 것 같았다.  &lt;!--more--&gt;&lt;/p&gt;
&lt;p&gt;그래서 자바 스프링에서 직접 간단한 엔티티를 만들고, id를 &lt;code class=&quot;language-text&quot;&gt;0L&lt;/code&gt;로 지정해 저장해봤다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDENTITY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberJPATest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Long id = 0L 이라면&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Hibernate: 
    select
        member0_.id as id1_0_0_,
        member0_.name as name2_0_0_ 
    from
        member member0_ 
    where
        member0_.id=?
Hibernate: 
    insert 
    into
        member
        (id, name) 
    values
        (default, ?)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실행된 SQL문을 보면, 역시나 &lt;code class=&quot;language-text&quot;&gt;select&lt;/code&gt;문이 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt;문에 선행되었다.
&lt;code class=&quot;language-text&quot;&gt;persist()&lt;/code&gt;대신 &lt;code class=&quot;language-text&quot;&gt;merge()&lt;/code&gt;가 수행된 것이다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;jpa의-새로운-엔티티-식별법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#jpa%EC%9D%98-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%8B%9D%EB%B3%84%EB%B2%95&quot; aria-label=&quot;jpa의 새로운 엔티티 식별법 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JPA의 새로운 엔티티 식별법&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;JPARepository&lt;/code&gt; 상속 시 쓰게 되는 구현체인 &lt;code class=&quot;language-text&quot;&gt;SimpleRepository&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;save&lt;/code&gt;를 다시 살펴보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;S&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Assert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;notNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Entity must not be null.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityInformation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        em&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;persist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; em&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참 명료한 언어로 잘 짜여있다.
&lt;code class=&quot;language-text&quot;&gt;if (entityInformation.isNew(entity))&lt;/code&gt;니까 &lt;strong&gt;엔티티가 새로운 엔티티라면&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;persist()&lt;/code&gt;를, 아니라면 &lt;code class=&quot;language-text&quot;&gt;merge()&lt;/code&gt;를 수행한다.
그렇다면 이 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;는 어디서 가져오는 걸까?&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 구현한 몇 개의 클래스에 디버깅을 걸며 찾아보니 &lt;code class=&quot;language-text&quot;&gt;AbstractEntityInformation&lt;/code&gt;라는 낯선 이름의 클래스에 걸렸다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AbstractEntityInformation&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EntityInformation&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      
        &lt;span class=&quot;token class-name&quot;&gt;ID&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; idType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getIdType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;idType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isPrimitive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;longValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Unsupported primitive id type %s&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; idType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;코드 상 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 판단하는 조건은 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;엔티티의 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 원시 타입이 아니라면
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;일 때 새로운 엔티티다&lt;/li&gt;
&lt;li&gt;값이 있을 때 새로운 엔티티가 아니다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;엔티티의 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 원시 타입이고, &lt;code class=&quot;language-text&quot;&gt;getId&lt;/code&gt;한 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 래퍼 클래스의 인스턴스라면
&lt;ul&gt;
&lt;li&gt;값이 &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;일 때 새로운 엔티티다&lt;/li&gt;
&lt;li&gt;값이 &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;이 아니면 새로운 엔티티가 아니다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;처음 읽었을 때 &lt;code class=&quot;language-text&quot;&gt;id instanceof Number&lt;/code&gt;라는 부분이 이상했다.
위에서 원시값이 아닌 경우를 한번 분기처리 했는데, 왜 다시 &lt;code class=&quot;language-text&quot;&gt;Number&lt;/code&gt;의 인스턴스임을 확인하는 걸까?
애초에 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 원시값이면 &lt;code class=&quot;language-text&quot;&gt;Number&lt;/code&gt;의 인스턴스가 될 수 없지 않나?
코드를 읽다 혼란이 와서 &lt;code class=&quot;language-text&quot;&gt;Number&lt;/code&gt;에 대한 정보도 찾아보고 왔다.&lt;/p&gt;
&lt;p&gt;이 의문의 답은 &lt;code class=&quot;language-text&quot;&gt;Id id = getId(entity)&lt;/code&gt;에 있었다. &lt;code class=&quot;language-text&quot;&gt;getId&lt;/code&gt;를 하면서 원시타입의 경우 래퍼 클래스로 바꿔준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; persistentEntity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getIdentifierAccessor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getIdentifier&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;굳이 이렇게 번거롭게 처리한 이유는 찾아봤지만 사실 아직 잘 모르겠다…
어쨌든 여기의 &lt;code class=&quot;language-text&quot;&gt;ID&lt;/code&gt;형은 &lt;code class=&quot;language-text&quot;&gt;JPARepository&lt;/code&gt;를 상속하면서 지정한 형태다.
따라서 엔티티에서 &lt;code class=&quot;language-text&quot;&gt;long&lt;/code&gt;으로 정의된 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;는, &lt;code class=&quot;language-text&quot;&gt;getID&lt;/code&gt;를 거쳐 자동으로 &lt;code class=&quot;language-text&quot;&gt;Long&lt;/code&gt;이 된다.&lt;/p&gt;
&lt;p&gt;그럼 &lt;code class=&quot;language-text&quot;&gt;Long&lt;/code&gt;이 아닌 &lt;code class=&quot;language-text&quot;&gt;long id&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;0L&lt;/code&gt;로 초기화하면 &lt;code class=&quot;language-text&quot;&gt;persist()&lt;/code&gt;가 호출될까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDENTITY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Hibernate: 
    insert 
    into
        member
        (id, name) 
    values
        (default, ?)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실행 결과 그런 것을 볼 수 있다.&lt;/p&gt;
&lt;p&gt;다시 코틀린 코드로 돌아와서, 코틀린의 &lt;code class=&quot;language-text&quot;&gt;Long&lt;/code&gt;은 자바의 &lt;code class=&quot;language-text&quot;&gt;Long&lt;/code&gt;과 다르게 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이 들어갈 수 없다.
따라서 위 예제처럼 자바에서 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;의 자료형을 &lt;code class=&quot;language-text&quot;&gt;long&lt;/code&gt;으로 하고, &lt;code class=&quot;language-text&quot;&gt;0L&lt;/code&gt;로 초기화 한 것과 동일하다.&lt;/p&gt;
&lt;h3 id=&quot;숫자가-아닌-값을-id로-쓰려면&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%88%AB%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B0%92%EC%9D%84-id%EB%A1%9C-%EC%93%B0%EB%A0%A4%EB%A9%B4&quot; aria-label=&quot;숫자가 아닌 값을 id로 쓰려면 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;숫자가 아닌 값을 id로 쓰려면?&lt;/h3&gt;
&lt;p&gt;줍줍 서비스를 개발하다 슬랙은 식별값으로 문자열을 쓴다는 사실이 기억났다.
(물론 내부적으로는 숫자 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;를 쓸 수도 있겠으나…)
메시지 같은 경우는 수가 많아서 그런지 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EB%B2%94%EC%9A%A9_%EA%B3%A0%EC%9C%A0_%EC%8B%9D%EB%B3%84%EC%9E%90&quot;&gt;UUID&lt;/a&gt;를 사용한다.
해당 코드를 본다면 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;로 UUID를 사용할 경우 &lt;code class=&quot;language-text&quot;&gt;persist&lt;/code&gt;가 호출되지 않을 것 같았다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;columnDefinition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;BINARY(16)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UUID&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomUUID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberJPATest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UUID id = UUID 랜덤값 이라면&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Hibernate: 
    select
        member0_.id as id1_0_0_,
        member0_.name as name2_0_0_ 
    from
        member member0_ 
    where
        member0_.id=?
Hibernate: 
    insert 
    into
        member
        (name, id) 
    values
        (?, ?)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;역시나 &lt;code class=&quot;language-text&quot;&gt;merge&lt;/code&gt;가 호출되어 &lt;code class=&quot;language-text&quot;&gt;select&lt;/code&gt; 후 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt;가 나갔다.
그럼 숫자가 아닌 값을 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;로 사용하려면 성능 저하를 필연적으로 안고 가야 하는 것일까?&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;persistableid-구현으로-내-맘대로-식별시키기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#persistableid-%EA%B5%AC%ED%98%84%EC%9C%BC%EB%A1%9C-%EB%82%B4-%EB%A7%98%EB%8C%80%EB%A1%9C-%EC%8B%9D%EB%B3%84%EC%8B%9C%ED%82%A4%EA%B8%B0&quot; aria-label=&quot;persistableid 구현으로 내 맘대로 식별시키기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Persistable&lt;ID&gt; 구현으로 내 맘대로 식별시키기&lt;/h2&gt;
&lt;p&gt;당연히 그럴 리는 없다.
JPA는 엔티티의 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 개발자 입맛대로 바꿀 수 있도록 &lt;code class=&quot;language-text&quot;&gt;Persistable&amp;lt;ID&gt;&lt;/code&gt; 인터페이스를 제공한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Persistable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;UUID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 모든 &lt;code class=&quot;language-text&quot;&gt;Member&lt;/code&gt;의 인스턴스는 &lt;code class=&quot;language-text&quot;&gt;save&lt;/code&gt; 될 때 마다 새 엔티티로 인식된다.
실제로 테스트 코드 내에서 &lt;code class=&quot;language-text&quot;&gt;save&lt;/code&gt;를 두 번 호출하면 &lt;code class=&quot;language-text&quot;&gt;PK&lt;/code&gt; 중복으로 에러가 난다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;String id = UUID 랜덤값 이라면&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [“PUBLIC.PRIMARY_KEY_8 ON PUBLIC.MEMBER(ID) VALUES ( /* 1 */ CAST(X’c63865c5bb6e4f16a3d44aa75244dc1a’ AS BINARY(16)) )”; SQL statement:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;insert into member (name, id) values (?, ?) [23505-214]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement&lt;/p&gt;
&lt;p&gt;다른 조건인 &lt;code class=&quot;language-text&quot;&gt;생성 일자&lt;/code&gt;로 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 판단하도록 수정하자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Persistable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;UUID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@CreationTimestamp&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LocalDateTime&lt;/span&gt; createdAt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; createdAt &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러면 엔티티 최초 생성 시 &lt;code class=&quot;language-text&quot;&gt;createdAt&lt;/code&gt; 값이 생길 것이고, 이 값의 여부로 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 판단한다.
해당 인터페이스를 구현하면 이제 &lt;code class=&quot;language-text&quot;&gt;AbstractEntityInformation&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 완전히 우선해 대체함에 주의해야 한다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이면 어쩌고… 는 더이상 적용되지 않는다는 뜻이다.&lt;/p&gt;
&lt;h3 id=&quot;또는-조금-더-간단한-버전&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%98%90%EB%8A%94-%EC%A1%B0%EA%B8%88-%EB%8D%94-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B2%84%EC%A0%84&quot; aria-label=&quot;또는 조금 더 간단한 버전 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;또는, 조금 더 간단한 버전&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt; 구현을 위해 얘기하지 않았지만, 사실 UUID도 자동 생성 처리가 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;uuid2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GenericGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;uuid2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;uuid2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;columnDefinition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;BINARY(16)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UUID&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomUUID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;역시 있을 건 거의 이미 다 있다. 바퀴를 새로 발명하지 말자.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;그-외에도-식별에-영향을-주는-방법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B7%B8-%EC%99%B8%EC%97%90%EB%8F%84-%EC%8B%9D%EB%B3%84%EC%97%90-%EC%98%81%ED%96%A5%EC%9D%84-%EC%A3%BC%EB%8A%94-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;그 외에도 식별에 영향을 주는 방법 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;그 외에도 식별에 영향을 주는 방법&lt;/h2&gt;
&lt;h3 id=&quot;version&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#version&quot; aria-label=&quot;version permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Version&lt;/h3&gt;
&lt;p&gt;첫번쨰로 &lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt;이 있다. 이 어노테이션은 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 판별하는 용도로 붙이는 건 아니다.
여기서 다른 클래스가 또 끼어들게 된다. &lt;code class=&quot;language-text&quot;&gt;JpaMetamodelEntityInformation&lt;/code&gt;라는 클래스다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JpaMetamodelEntityInformation&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JpaEntityInformationSupport&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;versionAttribute&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isPresent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; versionAttribute&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getJavaType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isPrimitive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;BeanWrapper&lt;/span&gt; wrapper &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DirectFieldAccessFallbackBeanWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; versionAttribute&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; wrapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPropertyValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 클래스의 &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt;문을 보자. &lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt;이 붙은 값이 존재하지 않거나, 이 값들이 원시 타입이라면 상위의 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 호출한다.
이 상위 클래스가 &lt;code class=&quot;language-text&quot;&gt;AbstractEntityInformation&lt;/code&gt;이다. 앞서 &lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt;이 없던 경우에도 사실 이 메서드를 한 번 타고 왔던 것이다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt; 필드가 있고 원시 타입이 아니라면, 이제 이 값으로 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;를 판단하게 된다.
이 때도 역시 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이면 어쩌고… 는 더이상 적용되지 않는다.
&lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt;이 붙은 필드 값이 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;인가의 여부로 판단한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDENTITY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Version&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; version&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberJPATest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id 값이 있어도 @Version이 null 이라면&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Hibernate: 
    insert 
    into
        member
        (id, name, version) 
    values
        (default, ?, ?)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 &lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt;은 원래 &lt;code class=&quot;language-text&quot;&gt;LOCK&lt;/code&gt;을 위해 사용된다고 한다.
&lt;a href=&quot;https://reiphiel.tistory.com/entry/understanding-jpa-lock&quot;&gt;JPA 잠금(Lock) 이해하기&lt;/a&gt; 라는 포스팅에서 상세한 설명을 볼 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;entityinformation-구현&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#entityinformation-%EA%B5%AC%ED%98%84&quot; aria-label=&quot;entityinformation 구현 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;EntityInformation 구현&lt;/h3&gt;
&lt;p&gt;앞서 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;가 있었던 구현체들의 상위 인터페이스인 &lt;code class=&quot;language-text&quot;&gt;EntityInformation&lt;/code&gt;을 직접 구현해 &lt;code class=&quot;language-text&quot;&gt;SimpleJpaRepository&lt;/code&gt;에 주입하는 방법이다.
이 방식은 아직 이해를 제대로 못했다.
&lt;code class=&quot;language-text&quot;&gt;SimpleJpaRepository&lt;/code&gt;의 생성자에 어떤 방식으로 주입되는지 제대로 파악하고 나서 더 공부해보려 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleJpaRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JpaEntityInformation&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; entityInformation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EntityManager&lt;/span&gt; entityManager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  
    &lt;span class=&quot;token class-name&quot;&gt;Assert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;notNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityInformation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;JpaEntityInformation must not be null!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Assert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;notNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityManager&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;EntityManager must not be null!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;// 이 부분을 자신의 구현체로 대체하라는 의미일까? 어떻게...?  &lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;entityInformation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; entityInformation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;em &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; entityManager&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;provider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PersistenceProvider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromEntityManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityManager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참고한 다른 블로그 포스팅인 &lt;a href=&quot;https://insanelysimple.tistory.com/300&quot;&gt;spring-data-jpa save 동작 원리&lt;/a&gt;에 나와있다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;정리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A0%95%EB%A6%AC&quot; aria-label=&quot;정리 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;정리&lt;/h2&gt;
&lt;p&gt;실제 코드를 탐색한 순서대로 포스팅을 했더니 글이 길어졌다.
&lt;code class=&quot;language-text&quot;&gt;EntityInformation&lt;/code&gt; 구현을 제외하고, 알아낸 &lt;code class=&quot;language-text&quot;&gt;isNew()&lt;/code&gt;결정 흐름을 정리하자면 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;엔티티 클래스에서 **Persistable&amp;#x3C;ID&gt;**를 구현했다면, 엔티티 클래스 내의 **isNew()**로 판단&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JpaMetamodelEntityInformation&lt;/strong&gt;의 **isNew()**가 호출
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;@Version&lt;/strong&gt;필드가 있고, 해당 값이 원시 타입이 아니라면
&lt;ul&gt;
&lt;li&gt;필드가 &lt;strong&gt;null&lt;/strong&gt;이라면 &lt;strong&gt;true&lt;/strong&gt;, 아니라면 &lt;strong&gt;false&lt;/strong&gt; 반환&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;@Version&lt;/strong&gt;필드가 없거나, 해당 값이 원시 타입이라면
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AbstractEntityInformation&lt;/strong&gt;의 **isNew()**가 호출
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;id&lt;/strong&gt;가 원시 타입이 아니라면
&lt;ul&gt;
&lt;li&gt;값이 &lt;strong&gt;null&lt;/strong&gt;이라면 &lt;strong&gt;true&lt;/strong&gt;, 아니라면 &lt;strong&gt;false&lt;/strong&gt; 반환&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;id&lt;/strong&gt;가 숫자값이라면
&lt;ul&gt;
&lt;li&gt;값이 &lt;strong&gt;0&lt;/strong&gt;이라면  &lt;strong&gt;true&lt;/strong&gt;, 아니라면 &lt;strong&gt;false&lt;/strong&gt; 반환&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;참으로 복잡한 과정이 숨겨져 있었다.&lt;/p&gt;
&lt;h3 id=&quot;그-외의-호기심&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B7%B8-%EC%99%B8%EC%9D%98-%ED%98%B8%EA%B8%B0%EC%8B%AC&quot; aria-label=&quot;그 외의 호기심 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;그 외의 호기심?&lt;/h3&gt;
&lt;p&gt;코드를 열어보면서 &lt;code class=&quot;language-text&quot;&gt;IsNewStrategy&lt;/code&gt;라는 인터페이스와 구현체들을 발견했는데, 정작 어디 쓰이는지는 알아내지 못했다.
구현체에는 &lt;code class=&quot;language-text&quot;&gt;AbstractEntityInformation&lt;/code&gt;와 비슷한 로직이 들어있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IsNewStrategy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  
    &lt;span class=&quot;token comment&quot;&gt;/**
    * 새로운 엔티티인지 여부를 반환합니다. 다시 말해, 실제로 저장 됐었는지와는 별개입니다.
	  * @param entity must not be {@literal null}.
	  * @return
	  */&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PersistentEntityIsNewStrategy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IsNewStrategy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      
        &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; valueLookup&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;valueType &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;valueType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isPrimitive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;longValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
              &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Could not determine whether %s is new; Unsupported identifier or version property&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 친구들은 또 언제 쓰이는 것인지 더 알아봐야겠다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;도움받은-곳들&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8F%84%EC%9B%80%EB%B0%9B%EC%9D%80-%EA%B3%B3%EB%93%A4&quot; aria-label=&quot;도움받은 곳들 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;도움받은 곳들&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://insanelysimple.tistory.com/300&quot;&gt;Simple is best - spring-data-jpa save 동작 원리&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;br&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#long-id--0l-&quot;&gt;Long id = 0L ?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#jpa%EC%9D%98-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%8B%9D%EB%B3%84%EB%B2%95&quot;&gt;JPA의 새로운 엔티티 식별법&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%88%AB%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C-%EA%B0%92%EC%9D%84-id%EB%A1%9C-%EC%93%B0%EB%A0%A4%EB%A9%B4&quot;&gt;숫자가 아닌 값을 id로 쓰려면?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#persistableid-%EA%B5%AC%ED%98%84%EC%9C%BC%EB%A1%9C-%EB%82%B4-%EB%A7%98%EB%8C%80%EB%A1%9C-%EC%8B%9D%EB%B3%84%EC%8B%9C%ED%82%A4%EA%B8%B0&quot;&gt;Persistable&lt;ID&gt; 구현으로 내 맘대로 식별시키기&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EB%98%90%EB%8A%94-%EC%A1%B0%EA%B8%88-%EB%8D%94-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B2%84%EC%A0%84&quot;&gt;또는, 조금 더 간단한 버전&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EA%B7%B8-%EC%99%B8%EC%97%90%EB%8F%84-%EC%8B%9D%EB%B3%84%EC%97%90-%EC%98%81%ED%96%A5%EC%9D%84-%EC%A3%BC%EB%8A%94-%EB%B0%A9%EB%B2%95&quot;&gt;그 외에도 식별에 영향을 주는 방법&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#version&quot;&gt;@Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#entityinformation-%EA%B5%AC%ED%98%84&quot;&gt;EntityInformation 구현&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%A0%95%EB%A6%AC&quot;&gt;정리&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EA%B7%B8-%EC%99%B8%EC%9D%98-%ED%98%B8%EA%B8%B0%EC%8B%AC&quot;&gt;그 외의 호기심?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EB%8F%84%EC%9B%80%EB%B0%9B%EC%9D%80-%EA%B3%B3%EB%93%A4&quot;&gt;도움받은 곳들&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Spring] @PostConstruct를 막아라]]></title><description><![CDATA[…]]></description><link>https://hyewoncc.github.io/post-construct-profile/</link><guid isPermaLink="false">https://hyewoncc.github.io/post-construct-profile/</guid><pubDate>Mon, 22 Aug 2022 15:30:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;문제상황&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9&quot; aria-label=&quot;문제상황 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;문제상황&lt;/h2&gt;
&lt;h3 id=&quot;서비스-배경지식&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B0%B0%EA%B2%BD%EC%A7%80%EC%8B%9D&quot; aria-label=&quot;서비스 배경지식 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;서비스 배경지식&lt;/h3&gt;
&lt;h4 id=&quot;첫번째-참고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B2%AB%EB%B2%88%EC%A7%B8-%EC%B0%B8%EA%B3%A0&quot; aria-label=&quot;첫번째 참고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;첫번째 참고&lt;/h4&gt;
&lt;p&gt;현재 개발중인 &lt;a href=&quot;https://github.com/woowacourse-teams/2022-pickpick&quot;&gt;줍줍&lt;/a&gt;은 슬랙 무료 워크스페이스의 사라지는 메세지들을 대신 저장하고 보여주는 서비스다.
메세지 저장을 위해 최초 어플리케이션 구동 시, 해당 워크스페이스에 속한 모든 회원 정보를 가져온다.
이 역할을 &lt;code class=&quot;language-text&quot;&gt;MemberInicializer&lt;/code&gt;라는 클래스의 &lt;code class=&quot;language-text&quot;&gt;@PostContruct&lt;/code&gt;안에 작성했다. 이유는 아래와 같았다.   &lt;!--more--&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;어플리케이션이 구동하는 동안 발생하는 신규 가입, 탈퇴 이벤트는 실시간 반영이 된다&lt;/li&gt;
&lt;li&gt;하지만 어플리케이션 최초 구동 전, 또는 업데이트 배포로 어플리케이션이 중지된 사이에 발생한 이벤트는 반영이 안된다&lt;/li&gt;
&lt;li&gt;따라서 재구동 시 한 번 슬랙 API를 호출하여, 유저 정보를 업데이트한다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;유저 정보를 메시지에서 참조하고 있어서 저장이 선행되어야 했다.
또, 로그인 시 이 정보와 &lt;code class=&quot;language-text&quot;&gt;OAuth&lt;/code&gt; 슬랙 로그인으로 받은 정보를 대조해서 자체 토큰을 발급하는 까닭도 있다.&lt;/p&gt;
&lt;br&gt;
&lt;h4 id=&quot;두번째-참고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%91%90%EB%B2%88%EC%A7%B8-%EC%B0%B8%EA%B3%A0&quot; aria-label=&quot;두번째 참고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;두번째 참고&lt;/h4&gt;
&lt;p&gt;슬랙은 &lt;code class=&quot;language-text&quot;&gt;MethodClient&lt;/code&gt;라는 이름으로 슬랙 API에 HTTP 요청을 보내고 응답을 받는 객체를 제공한다.
그래서 슬랙 API 호출이 필요한 곳에서는 이 &lt;code class=&quot;language-text&quot;&gt;MethodClient&lt;/code&gt; 빈을 주입받아 사용한다.
이렇게 만들어진 &lt;code class=&quot;language-text&quot;&gt;MemberInitializer&lt;/code&gt; 코드는 다음과 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slackClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;memberRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostConstruct&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setupMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackApiException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; savedSlackIds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findSavedSlackIds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; currentWorkspaceMembers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchWorkspaceMembers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; membersToSave &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;filterMembersToSave&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;savedSlackIds&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; currentWorkspaceMembers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        memberRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;membersToSave&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchWorkspaceMembers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackApiException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 실제로 슬랙 API 호출이 이뤄지는 부분&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toMembers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;slackClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;usersList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMembers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;h3 id=&quot;테스트-시-외부-api-호출을-대체할-mockbean-사용&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%9C-%EC%99%B8%EB%B6%80-api-%ED%98%B8%EC%B6%9C%EC%9D%84-%EB%8C%80%EC%B2%B4%ED%95%A0-mockbean-%EC%82%AC%EC%9A%A9&quot; aria-label=&quot;테스트 시 외부 api 호출을 대체할 mockbean 사용 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;테스트 시 외부 API 호출을 대체할 @MockBean 사용&lt;/h3&gt;
&lt;p&gt;테스트에서 실제 슬랙 API를 호출하지 않기 위해 해당 &lt;code class=&quot;language-text&quot;&gt;MethodClient&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;을 통한 가짜 객체로 바꿔쳤다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AutoConfigureMockMvc&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthServiceTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@MockBean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackApiException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// given&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;slackId&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;thumbnail.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;given&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;slackClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oauthV2Access&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OAuthV2AccessRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;willReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generateOAuthV2AccessResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사유는 다음과 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;슬랙의 서버 상태에 의존하는 테스트가 된다&lt;/li&gt;
&lt;li&gt;원하는 특정 값 또는 상황을 테스트하기 어렵다&lt;/li&gt;
&lt;li&gt;(아직 걸린 적은 없지만) 호출 제한이 걸릴 수 있다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;참고로 &lt;a href=&quot;https://api.slack.com/docs/rate-limits&quot;&gt;슬랙 API&lt;/a&gt;는 명세 별로 등급에 따라 호출 횟수를 제한한다. &lt;code class=&quot;language-text&quot;&gt;Tier2&lt;/code&gt;의 경우 분당 약 20회로 제한되는데, 테스트가 늘어난다면 충분히 걸릴 수 있는 횟수로 보인다.&lt;/p&gt;
&lt;p&gt;그런데 한 인수테스트에서 &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;을 선언하자 &lt;code class=&quot;language-text&quot;&gt;ApplicationContext&lt;/code&gt; 로드가 실패했다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Failed to load ApplicationContext&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;java.lang.IllegalStateException: Failed to load ApplicationContext
at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)
at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;…&lt;br&gt;
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘memberInitializer’: Invocation of init method failed; nested exception is java.lang.NullPointerException&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;at app//org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:160)  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;…&lt;br&gt;
Caused by: java.lang.NullPointerException&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;at com.pickpick.member.application.MemberInitializer.fetchWorkspaceMembers(MemberInitializer.java:46)
at com.pickpick.member.application.MemberInitializer.setupMember(MemberInitializer.java:31)
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;br&gt;
&lt;h2 id=&quot;해결시도&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%95%B4%EA%B2%B0%EC%8B%9C%EB%8F%84&quot; aria-label=&quot;해결시도 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;해결시도&lt;/h2&gt;
&lt;h3 id=&quot;1-빈-재정의하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1-%EB%B9%88-%EC%9E%AC%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0&quot; aria-label=&quot;1 빈 재정의하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. 빈 재정의하기&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://hyewoncc.github.io/2022/04/25/spring-study-1.html#%EC%9D%BC%EB%8B%A8-%ED%95%B4%EA%B2%B0%EC%9D%80-%ED%96%88%EC%9C%BC%EB%82%98&quot;&gt;예전에 DAO 객체를 테스트 할 때, 실제 DB 대신 HashMap을 이용한 가짜 객체를 사용&lt;/a&gt;했다.
이 때 추출한 인터페이스의 구현체를 빈으로 등록하고, 테스트에서 덮어 씌웠다. 그래서 &lt;code class=&quot;language-text&quot;&gt;@PostConstruct&lt;/code&gt; 내용물이 텅 빈 가짜 클래스를 만들어 해당 방식을 시도했다. 하지만 아랑곳않고 예외가 터졌다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FakeMemberInitializer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slackClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;memberRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostConstruct&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setupMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackApiException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 텅 빈 메서드  &lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@PostConstruct&lt;/code&gt;의 실행 시점이 문제였다.
이 방법을 시도하면서 기대한 실행 시점은 아래와 같았다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;MemberInitializer&lt;/code&gt;가 생성되고, 주입된다&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;FakeMemberInitializer&lt;/code&gt;가 덮어 씌워진다&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;FakeMemberInitializer&lt;/code&gt;의 텅 빈 &lt;code class=&quot;language-text&quot;&gt;setupMember()&lt;/code&gt;가 호출된다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;그런데 실제로는 &lt;code class=&quot;language-text&quot;&gt;1-3-2&lt;/code&gt;의 순서로 실행되는 것 같았다.
테스트용 깡통 빈으로 덮어 씌우기 전에 &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;으로 대치된 &lt;code class=&quot;language-text&quot;&gt;MethodClient&lt;/code&gt;를 사용하니 &lt;code class=&quot;language-text&quot;&gt;NullPointerException&lt;/code&gt;이 발생한 것이었다.&lt;/p&gt;
&lt;br&gt;
&lt;h3 id=&quot;2-profile로-생성-막기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#2-profile%EB%A1%9C-%EC%83%9D%EC%84%B1-%EB%A7%89%EA%B8%B0&quot; aria-label=&quot;2 profile로 생성 막기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. @Profile로 생성 막기&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@PostContruct&lt;/code&gt;를 쓰는 한, 빈의 생성 자체를 막아야 한다고 판단했다.
그래서 &lt;code class=&quot;language-text&quot;&gt;@Profile&lt;/code&gt;을 통해 해당 빈이 프로뎍션 환경에서만 생성되도록 했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;prod&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Profile&lt;/code&gt;을 도입하는 동시에 다른 팀원의 도움으로 로컬, 개발, 운영 설정의 분리도 함께 이루어졌다. 각 환경에 필요한 &lt;code class=&quot;language-text&quot;&gt;yml&lt;/code&gt; 설정 파일을 지원 형식에 따라 명명했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVQY03WPy07DMBREu2+RYMUngFBasQGa5/UjadMEN7HjpMqGx/9/xKC4hrYgFiNf2zPH41lIAtcrwjxgWCwZFgHh9rnEU93hIbe44xr30uDmUWIekPecacnc+dWKI5ZbzBImsE4ZwowjzJjTtOfbCnp8gzIWe2ORlzVeUvKek9f5M4aIOOTGA6OMISaOmJjXFCAIkePdjjDDAdr2aLsJ3qGsFaKUfIYjzhgSxiGKzQk4veBWD19nBCkKfNgRejig7Xo0ncVro92sWoOUS585ghPilw3/A7Z2QGOO7XZq72alO+TlDuGvpn+A35cTMBcFPqeG/fDz3Uo1rqnSBnlZXQKJ4QuOsdNR4CyAawAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ymls&quot;
        title=&quot;ymls&quot;
        src=&quot;/static/78c374a54f2c2f2667643e82d31eddbc/37523/ymls.png&quot;
        srcset=&quot;/static/78c374a54f2c2f2667643e82d31eddbc/e9ff0/ymls.png 180w,
/static/78c374a54f2c2f2667643e82d31eddbc/f21e7/ymls.png 360w,
/static/78c374a54f2c2f2667643e82d31eddbc/37523/ymls.png 720w,
/static/78c374a54f2c2f2667643e82d31eddbc/167b5/ymls.png 776w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그리고 각 배포 스크립트에서 명령어로 어떤 &lt;code class=&quot;language-text&quot;&gt;profile&lt;/code&gt;을 활성화 시킬 것인지 지정해줬다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod pickpick-0.0.1-SNAPSHOT.jar&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;생각해보면 이제까지 테스트에서 컨텍스트가 로딩될 때 마다 실제로 호출이 일어나고, 사용하지 않는 데이터가 적재되었다. 로컬 환경에서야 H2니 운영 데이터 오염이나 DB 비용 지불의 문제는 없었다. 하지만 테스트가 늘어났다면 호출 제한에 걸려 실제 운영에 지장을 초래할 수도 있었다. 더 큰 문제가 생기기 전에 &lt;code class=&quot;language-text&quot;&gt;@Profile&lt;/code&gt;을 도입해서 다행이었다.&lt;/p&gt;
&lt;h2 id=&quot;앞으로의-과제&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%9E%EC%9C%BC%EB%A1%9C%EC%9D%98-%EA%B3%BC%EC%A0%9C&quot; aria-label=&quot;앞으로의 과제 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;앞으로의 과제?&lt;/h2&gt;
&lt;p&gt;보다 실제 상황과 비슷한 테스트를 하려면, 테스트 환경에서도 &lt;code class=&quot;language-text&quot;&gt;MemberInitializer&lt;/code&gt;가 생성되는 게 맞다고 생각한다. 특히 인수 테스트에서 컨텍스트가 처음 생성되었을 때 일부 유저가 저장되고, 이 유저에 대한 프로필 수정, 탈퇴 등의 이벤트가 발생했을 시, 제대로 작동되는지 보면 좋을 것 같다.&lt;/p&gt;
&lt;br&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9&quot;&gt;문제상황&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B0%B0%EA%B2%BD%EC%A7%80%EC%8B%9D&quot;&gt;서비스 배경지식&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%B2%AB%EB%B2%88%EC%A7%B8-%EC%B0%B8%EA%B3%A0&quot;&gt;첫번째 참고&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EB%91%90%EB%B2%88%EC%A7%B8-%EC%B0%B8%EA%B3%A0&quot;&gt;두번째 참고&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%9C-%EC%99%B8%EB%B6%80-api-%ED%98%B8%EC%B6%9C%EC%9D%84-%EB%8C%80%EC%B2%B4%ED%95%A0-mockbean-%EC%82%AC%EC%9A%A9&quot;&gt;테스트 시 외부 API 호출을 대체할 @MockBean 사용&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%ED%95%B4%EA%B2%B0%EC%8B%9C%EB%8F%84&quot;&gt;해결시도&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-%EB%B9%88-%EC%9E%AC%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0&quot;&gt;1. 빈 재정의하기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-profile%EB%A1%9C-%EC%83%9D%EC%84%B1-%EB%A7%89%EA%B8%B0&quot;&gt;2. @Profile로 생성 막기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%95%9E%EC%9C%BC%EB%A1%9C%EC%9D%98-%EA%B3%BC%EC%A0%9C&quot;&gt;앞으로의 과제?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[JPA] 상수 픽스쳐 사용 주의]]></title><description><![CDATA[문제상황 우테코 QNA 미션에서 상수로 선언된 엔티티 픽스쳐가 있었다. 레벨…]]></description><link>https://hyewoncc.github.io/jpa-static-fixture-trouble/</link><guid isPermaLink="false">https://hyewoncc.github.io/jpa-static-fixture-trouble/</guid><pubDate>Sat, 13 Aug 2022 03:40:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;문제상황&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9&quot; aria-label=&quot;문제상황 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;문제상황&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/woowacourse/jwp-qna&quot;&gt;우테코 QNA 미션&lt;/a&gt;에서 상수로 선언된 엔티티 픽스쳐가 있었다. 레벨3 같은 팀 크루인 봄이 해당 미션을 진행하다 테스트가 터져 어쩌다보니 같이 원인을 찾게 되었다. 상황을 비슷하게 복구해보자면 이런 구성이었다.  &lt;!--more--&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BlogServiceTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BlogService&lt;/span&gt; blogService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;USER_A&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;새로운 회원 저장 후 포스트 저장 1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveUser_savePost1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;USER_A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;savePost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;포스팅1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;USER_A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;새로운 회원 저장 후 포스트 저장 2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveUser_savePost2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;USER_A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;savePost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;포스팅2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;USER_A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원본 미션 코드에서는 픽스쳐가 &lt;code class=&quot;language-text&quot;&gt;public static final&lt;/code&gt;로 별도 클래스에 선언되어 있었다. 그런데 테스트 클래스 하나에서만 사용되고 있어서 해당 클래스로 옮겼던 것 같다. 나도 픽스쳐를 옮겼다가, 평소 쓰는 방식대로 한다고 지웠었다.&lt;/p&gt;
&lt;p&gt;어쨌든 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;Post -&gt; User&lt;/code&gt;의 단방향 연관관계였고, &lt;code class=&quot;language-text&quot;&gt;BlogService&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;UserRepository, PostRepository&lt;/code&gt;를 통해 저장해주는 상태였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDENTITY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDENTITY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; contents&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ManyToOne&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; writer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러다 테스트가 터지며 의문의 에러메시지를 마주했다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [FK83S99F4KX8OIQM3RO0SASMPWW]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;좀 더 내려보니 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt; 수행이 안 되는 상황이었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Referential integrity constraint violation: “FK83S99F4KX8OIQM3RO0SASMPWW: PUBLIC.POST FOREIGN KEY(USERS_ID) REFERENCES PUBLIC.USERS(ID) (CAST(1 AS BIGINT))”; SQL statement:
insert into post (id, contents, user_id) values (default, ?, ?) [23506-214]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;무언가 &lt;em&gt;&lt;strong&gt;외래키가 없어서 post에 insert가 안 되는 상황인가…?&lt;/strong&gt;&lt;/em&gt; 하는 추측은 했지만 이유를 알 수가 없었다. 분명히 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;로 변경을 롤백한 후에, &lt;code class=&quot;language-text&quot;&gt;saveUser()&lt;/code&gt;를 통해 &lt;code class=&quot;language-text&quot;&gt;USER_A&lt;/code&gt;를 저장해줬기 때문이다.&lt;/p&gt;
&lt;br&gt;
&lt;h3 id=&quot;추측-1persist와-merge-실행-차이&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B6%94%EC%B8%A1-1persist%EC%99%80-merge-%EC%8B%A4%ED%96%89-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;추측 1persist와 merge 실행 차이 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;추측 1.persist()와 merge() 실행 차이?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;를 저장하는데 외래키가 없는 게 맞다면 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;를 저장할 때 문제가 생기는 것이라 추측했다. 그래서 디버거를 찍으며 따라가다 보니 &lt;code class=&quot;language-text&quot;&gt;SimpleJpaRepository&lt;/code&gt;라는 클래스의 &lt;code class=&quot;language-text&quot;&gt;save()&lt;/code&gt; 메서드에 도착했다. 여기서 **먼저 실행돼 통과하는 테스트는 persist()**를, **나중에 실행돼 실패하는 테스트는 merge()**를 호출하고 있음을 확인했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQY02XGWWrDMAAAUV+kTuM1lqxdsh0CKWTzHVqauPc/xBQcSD/68ZjJbAg4LfFWkVyPtZoQDD5EtDForRhdizcdnZD/CPlHSknmfUT1iuATKR0Y0p4YBmJMWG8x1qCtw1iL1+LFKUHQAtVLpOjp5VM2ek9sCg5dyclpjs4yiZZhV5GaglBtSXVBrLeMTc7UvLFfm7Nvc2K1IZQbQvW+yobpg+r8TX/7wlw/EfMPcl5oLnfa6wMxL9SXx/q720J7XdieHi/F6b4qz0+/Jfd/Nk1bLA0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;call merge&quot;
        title=&quot;call merge&quot;
        src=&quot;/static/26745027aaab5f8593b368764fd9910f/37523/merge.png&quot;
        srcset=&quot;/static/26745027aaab5f8593b368764fd9910f/e9ff0/merge.png 180w,
/static/26745027aaab5f8593b368764fd9910f/f21e7/merge.png 360w,
/static/26745027aaab5f8593b368764fd9910f/37523/merge.png 720w,
/static/26745027aaab5f8593b368764fd9910f/302a4/merge.png 1080w,
/static/26745027aaab5f8593b368764fd9910f/07a9c/merge.png 1440w,
/static/26745027aaab5f8593b368764fd9910f/e04e6/merge.png 2152w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그래서 실제로 저장된 적 없는 데이터인데 &lt;code class=&quot;language-text&quot;&gt;merge()&lt;/code&gt;로 처리되어서 들어가지 않는건가? 생각했다. 그런데 &lt;code class=&quot;language-text&quot;&gt;show_sql&lt;/code&gt;을 설정해 콘솔에서 sql문을 보니 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt;가 실행되고 있었다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABDElEQVQoz12RS1LEMAxEc5zEfzuxk0ky9nwoFsCKLcVBWHD2piRiJmGh0kJdT91S8/r5jeePL8RpRYoDuq6DVArWezgfoIyBmwrub++Ynl4wDAPGcYS1Fs45aK1hnYcLAdoYNGu5Yyk3KKWRUkQIAVJKhln/K+rnjCnfkNYCrQ1SSgyOMTKUlxNQGzRzuWA+F/TbZhIIIdgpu5USSy5YL1ec1sxz0hGQZqQRooPgLtAs5Yo5X+C9R9/3LFJKcZGA4p/OBaSb1oy4ueOZlIc6AK1zHIViELg63QPJIS3aJ6mgauThMIQDjI5ene6B9SnGmIMzvrtzDyA9pW3b7Sbir/5HpqfR0nrfPZQi/wBjKd6rFfJ9ygAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sql&quot;
        title=&quot;sql&quot;
        src=&quot;/static/b80d694fac170b44fb688c4f2237ca6f/37523/sql.png&quot;
        srcset=&quot;/static/b80d694fac170b44fb688c4f2237ca6f/e9ff0/sql.png 180w,
/static/b80d694fac170b44fb688c4f2237ca6f/f21e7/sql.png 360w,
/static/b80d694fac170b44fb688c4f2237ca6f/37523/sql.png 720w,
/static/b80d694fac170b44fb688c4f2237ca6f/302a4/sql.png 1080w,
/static/b80d694fac170b44fb688c4f2237ca6f/07a9c/sql.png 1440w,
/static/b80d694fac170b44fb688c4f2237ca6f/0330c/sql.png 2458w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;알아보니 &lt;code class=&quot;language-text&quot;&gt;merge()&lt;/code&gt;는 아래 순서로 엔티티를 처리한다고 한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;id 값으로 1차 캐시 조회&lt;/li&gt;
&lt;li&gt;1차 캐시에 없다면 &lt;code class=&quot;language-text&quot;&gt;select&lt;/code&gt;문으로 DB에서 조회 후 있다면 1차 캐시에 저장&lt;/li&gt;
&lt;li&gt;조회 결과 마저 없으면 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt;를 수행&lt;/li&gt;
&lt;/ol&gt;
&lt;br&gt;
&lt;h3 id=&quot;추측-2id값이-달라서&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B6%94%EC%B8%A1-2id%EA%B0%92%EC%9D%B4-%EB%8B%AC%EB%9D%BC%EC%84%9C&quot; aria-label=&quot;추측 2id값이 달라서 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;추측 2.id값이 달라서?&lt;/h3&gt;
&lt;p&gt;그럼 대체 왜 저장된 값의 PK가 없다고 하는 것일까?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVQoz23M3U7jMBCG4VwLKzU/LYlTh7qJ7diJk5JC2zMuAKGWM+7/7F0laAWIPXj0zXwjTdQ2dzTqD5VM2JYZQqTc5ylFnrBOV6TJiixdsU5jsuQrsyRe5u82WUK0VQ2tH6mNQztHrS1F5ch3lrLpkcojKktWKjYPlrXU3D9YNpUhFYq03BMLRVwoEqGIxOVKebmRT3O+U51ekfN+fkWeb1TPN8TpSv3ygbi8k5+uiPNtUczz6Up2fCOd3paMDkPP9HRgHCzG1Gij2dcK7x3TcSIMnq7TONdiTIPWv839P5FtB8bD0/LU+g7jexrrMK4nTM+M0yNh7NGtX27f2VkXfoiUC0jTU9QOaTpK3VEow9xXNpDv3dLN8tojmi9b0yPtp6oNSBuIShMYxiPKT4h2ZN0Ekp1FmJ4wPmK6I9IdKEwgUX4R/8/uM/8CiW/shyq8w78AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ids&quot;
        title=&quot;ids&quot;
        src=&quot;/static/2508e47d6c3e3a11b8f2338a3974a28f/37523/different_ids.png&quot;
        srcset=&quot;/static/2508e47d6c3e3a11b8f2338a3974a28f/e9ff0/different_ids.png 180w,
/static/2508e47d6c3e3a11b8f2338a3974a28f/f21e7/different_ids.png 360w,
/static/2508e47d6c3e3a11b8f2338a3974a28f/37523/different_ids.png 720w,
/static/2508e47d6c3e3a11b8f2338a3974a28f/302a4/different_ids.png 1080w,
/static/2508e47d6c3e3a11b8f2338a3974a28f/07a9c/different_ids.png 1440w,
/static/2508e47d6c3e3a11b8f2338a3974a28f/ec5f6/different_ids.png 1852w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;디버거를 통해 찍어보니, 저장 된 뒤의 id는 &lt;code class=&quot;language-text&quot;&gt;2L&lt;/code&gt;인데 static 픽스쳐의 id는 &lt;code class=&quot;language-text&quot;&gt;1L&lt;/code&gt;이었다. FK로 1L의 값을 넣으니 찾을 수 없어 무결성 제약 조건에 위배되었던 것이다. &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;로 데이터는 초기화 되었지만, h2에서 id값은 초기화하지 않아서 생긴 문제였다. 생각보다 허망한 이유였다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;해결안&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%95%B4%EA%B2%B0%EC%95%88&quot; aria-label=&quot;해결안 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;해결안&lt;/h2&gt;
&lt;h3 id=&quot;1-픽스쳐-공유하지-않기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1-%ED%94%BD%EC%8A%A4%EC%B3%90-%EA%B3%B5%EC%9C%A0%ED%95%98%EC%A7%80-%EC%95%8A%EA%B8%B0&quot; aria-label=&quot;1 픽스쳐 공유하지 않기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. 픽스쳐 공유하지 않기&lt;/h3&gt;
&lt;p&gt;평소 테스트를 할 때 일회용 인스턴트를 쓰고 버리는(?) 방식을 선호했다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;테스트 격리를 위해 데이터도 격리한다&lt;/li&gt;
&lt;li&gt;생성되는 데이터를 메서드 내에서 바로 보고싶다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;그래서 같은 데이터를 쓰더라도 다 분리했기에 익숙한 형식으로 바꿨다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;새로운 회원 저장 후 포스트 저장 1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveUser_savePost1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt; post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;포스팅&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;savePost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;새로운 회원 저장 후 포스트 저장 2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveUser_savePost2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;useer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt; post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;포스팅&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blogService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;savePost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;솔직히 테스트 픽스쳐를 공유해서 쓰다가 실제로 문제를 마주쳐 봐서 이렇게 한 것은 아니었고… &lt;a href=&quot;https://jojoldu.tistory.com/611&quot;&gt;테스트 픽스처 올바르게 사용하기 by.향로&lt;/a&gt; 이 포스팅을 읽었어서가 크다. 어쨌든 상수 픽스쳐를 사용한 건 처음이었다.&lt;/p&gt;
&lt;br&gt;  
&lt;h3 id=&quot;2-generatedvalue-떼기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#2-generatedvalue-%EB%96%BC%EA%B8%B0&quot; aria-label=&quot;2 generatedvalue 떼기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. @GeneratedValue 떼기&lt;/h3&gt;
&lt;p&gt;그럼 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;를 직접 지정해주면 되지 않을까 싶어서 static 픽스쳐에서 지정해주고 &lt;code class=&quot;language-text&quot;&gt;@GeneratedValue&lt;/code&gt;를 제거했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BlogServiceTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MEMBER_A&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러니 테스트는 통과했지만 사실 이렇게 짤 일은 없다고 생각한다. 그냥 다른 방법으로도 통과시켜 보려고 해본 것이다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;그럼-기존-코드는-왜-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B7%B8%EB%9F%BC-%EA%B8%B0%EC%A1%B4-%EC%BD%94%EB%93%9C%EB%8A%94-%EC%99%9C-&quot; aria-label=&quot;그럼 기존 코드는 왜  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;그럼 기존 코드는 왜…? 🤔&lt;/h2&gt;
&lt;p&gt;상수 픽스쳐 선언이 근본적으로 좋지 않은 방식이라면 왜 기존 미션 코드에서 사용하고 있었을까?&lt;br&gt;
&lt;a href=&quot;https://github.com/woowacourse/jwp-qna/blob/main/src/test/java/qna/service/QnaServiceTest.java&quot;&gt;기존 서비스 테스트 코드&lt;/a&gt;를 보면 서비스를 슬라이스 테스트 하고 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; delete_성공&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;questionRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findByIdAndDeletedFalse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;question&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;thenReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;question&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;answerRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findByQuestionIdAndDeletedFalse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;question&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;thenReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Arrays&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;asList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;answer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt;의 메서드를 모두 모킹하고 있기 때문에 &lt;code class=&quot;language-text&quot;&gt;JPA&lt;/code&gt;와 무관한 테스트였다. 따라서 정말 &lt;em&gt;고정된 값&lt;/em&gt;으로써의 상수 픽스쳐를 사용해도 괜찮았던 것이다. 이를 통합 테스트로 바꾸면서 생긴 문제였다.&lt;/p&gt;
&lt;p&gt;테스트 간 데이터 격리가 중요하다는 말이 맞는 말이긴 하지만, 이전까진 고정관념처럼 무작정 받아들여 박혀있었다. 그런데 이번 문제를 맞딱드리면서 고정관념이 아닌 &lt;em&gt;진짜 나의 생각&lt;/em&gt;이 된 것 같아 좋았다. 어쨌든, 테스트 격리 잘 하자.&lt;/p&gt;
&lt;br&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9&quot;&gt;문제상황&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%B6%94%EC%B8%A1-1persist%EC%99%80-merge-%EC%8B%A4%ED%96%89-%EC%B0%A8%EC%9D%B4&quot;&gt;추측 1.persist()와 merge() 실행 차이?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%B6%94%EC%B8%A1-2id%EA%B0%92%EC%9D%B4-%EB%8B%AC%EB%9D%BC%EC%84%9C&quot;&gt;추측 2.id값이 달라서?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%ED%95%B4%EA%B2%B0%EC%95%88&quot;&gt;해결안&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-%ED%94%BD%EC%8A%A4%EC%B3%90-%EA%B3%B5%EC%9C%A0%ED%95%98%EC%A7%80-%EC%95%8A%EA%B8%B0&quot;&gt;1. 픽스쳐 공유하지 않기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-generatedvalue-%EB%96%BC%EA%B8%B0&quot;&gt;2. @GeneratedValue 떼기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EA%B7%B8%EB%9F%BC-%EA%B8%B0%EC%A1%B4-%EC%BD%94%EB%93%9C%EB%8A%94-%EC%99%9C-&quot;&gt;그럼 기존 코드는 왜…? 🤔&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[야생에서 사과씨 심기 (@Bean)]]></title><description><![CDATA[…]]></description><link>https://hyewoncc.github.io/wild-seed/</link><guid isPermaLink="false">https://hyewoncc.github.io/wild-seed/</guid><pubDate>Tue, 02 Aug 2022 14:50:00 GMT</pubDate><content:encoded>&lt;p&gt;야생 학습을 하면 자연스레 지식이 실전을 뒤따르게 된다. 우테코에서 처음 제대로 경험한 야생 학습은 낯설었으나 &lt;em&gt;너무 잘&lt;/em&gt; 적응한 탓인지 어느 순간 당장 쓰이지 않을 지식을 공부하는 게 마땅찮았다.&lt;br&gt;
당장 터지는 테스트를 고치고 싶을 뿐인데 왜 &lt;code class=&quot;language-text&quot;&gt;Configuration&lt;/code&gt;을 알아야 하지? 이걸 쓸 때가 있을까? 좋게 말하면 야생, 나쁘게 말하면 땜빵 마인드로, 그래도 연계되는 지식을 우겨넣고는 있었다. 언젠가는 쓸모가 있겠지 하고.  &lt;!--more--&gt;
이런 &lt;em&gt;알지만 알지 못하는 죽은 지식&lt;/em&gt;이 레벨3 프로젝트를 하다 &lt;em&gt;죽은 줄 알았지만 다 때가 있구나!&lt;/em&gt; 로 바뀌는 순간을 겪었다.&lt;/p&gt;
&lt;h2 id=&quot;bean은-외부-라이브러리를-등록하고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#bean%EC%9D%80-%EC%99%B8%EB%B6%80-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B3%A0&quot; aria-label=&quot;bean은 외부 라이브러리를 등록하고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Bean은 외부 라이브러리를 등록하고…&lt;/h2&gt;
&lt;p&gt;나에겐 &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;이 &lt;em&gt;알지만 알지 못하는 죽은 지식&lt;/em&gt;이었다.
&lt;a href=&quot;https://hyewoncc.github.io/2022/04/25/spring-study-1.html#bean%EA%B3%BC-component%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot;&gt;@Bean과 @Component의 차이&lt;/a&gt; 포스팅을 쓰기도 했고, &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;의 쓰임새가 뭐냐고 하면 줄줄 얘기할 수 있었다. &lt;em&gt;개발자가 직접 제어할 수 없는 외부 라이브러리 클래스를 빈에 등록할 때 사용됩니다.&lt;/em&gt; 하고. 그런데 좀처럼 &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;을 사용할 일이 없었다.&lt;/p&gt;
&lt;p&gt;그러다 레벨3 프로젝트인 줍줍에서 슬랙 api를 자바 라이브러리를 통해 호출하게 되었다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;ConversationsInfoResponse&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;conversationsInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    request &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;slackBotToken&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 코드를 살펴보자. 우선 &lt;code class=&quot;language-text&quot;&gt;Slack.getInstance()&lt;/code&gt;부분이다. &lt;code class=&quot;language-text&quot;&gt;getInstance()&lt;/code&gt;라는 정적 팩토리 메서드 명에서 추측 가능하듯이 &lt;code class=&quot;language-text&quot;&gt;Slack&lt;/code&gt;의 싱글턴 객체를 얻게 된다. &lt;code class=&quot;language-text&quot;&gt;methods()&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;MethodsClient&lt;/code&gt;라는 api 호출용 인스턴스를 반환한다. 이 &lt;code class=&quot;language-text&quot;&gt;methods()&lt;/code&gt;안에서는 http 요청을 보낼 때 필요값을 설정하는 작업이 일어난다.&lt;/p&gt;
&lt;p&gt;얻게 되는 최종 인스턴스는 &lt;code class=&quot;language-text&quot;&gt;MethodsClientImpl&lt;/code&gt;이라는 &lt;code class=&quot;language-text&quot;&gt;MethodsClient&lt;/code&gt;의 구현체이다. 변경되는 상태값이 없는데다 여러 객체에서 이 인스턴스를 이용해 슬랙 api를 호출한다. 따라서 필요한 곳에서 중복 생성하기 보다 싱글턴 스프링 빈으로 만들어 관리하고 주입하는게 좋을 것 같았다. 그런데 이걸 어떻게 빈으로 만들까? 생각하다가 &lt;em&gt;바로 이 때 &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;을 쓰는 거구나!&lt;/em&gt; 하는 깨달음이 왔다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;methodsClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 이렇게 생성한 빈을 해당 객체를 사용하는 곳에서 주입받게 개선했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberInitializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodsClient&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slackClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; slackClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;memberRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;h2 id=&quot;야생-적응-완료-기념비&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%BC%EC%83%9D-%EC%A0%81%EC%9D%91-%EC%99%84%EB%A3%8C-%EA%B8%B0%EB%85%90%EB%B9%84&quot; aria-label=&quot;야생 적응 완료 기념비 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;야생 적응 완료 기념비&lt;/h2&gt;
&lt;p&gt;어찌보면 그냥 &lt;em&gt;&lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;을 사용했다&lt;/em&gt; 로 요약할 수 있는 하찮은 내용을 굳이 회고 포스팅으로 남긴 두 가지 이유가 있다. 먼저 이 일을 통해 내가 완전히 야생 학습에 적응했다는 것을 기념하고 싶어서다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/hyewoncc/woowa-writing-4/blob/hyewoncc/level2.md&quot;&gt;우테코 레벨2 글쓰기 미션&lt;/a&gt;에서 야생 학습이 익숙하지 않았음을 얘기했었다. 주어진 인터넷 강의를 차례로 들으며 따라 치는게 익숙했었고, 책을 목차대로 읽는게 마음 편했다. 그런데 이번 일로 야생에서 익히지 않은, 그러니까 실전과 일치하지 않는 지식은 사실 나에게 &lt;em&gt;진짜&lt;/em&gt; 와닿은 지식이 아니었음을 실감했다. 우테코에 와서 바뀐 나의 학습 모습이 스스로도 놀랍다.&lt;/p&gt;
&lt;p&gt;두번째로, 다람쥐가 묻어두고 잊어버린 도토리처럼 죽은 줄 알았던 지식이 우연히 실전이라는 비를 만나 싹틔우는 짜릿함에 눈뜬 것을 기념하기 위함이다. 부끄럽지만 깊은 학습을 해야 한다고 되뇌이면서도, 야생 학습이라는 핑계로 늘 빠져나갈 궁리를 했던 것 같다. 그런데 &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;이라는 복선이 회수되는 순간 진심으로 &lt;code class=&quot;language-text&quot;&gt;와... 이걸 위해 공부했구나!&lt;/code&gt; 싶어 정말 기뻤다. 야생 학습과 모순되는 말이겠지만 이 즐거움을 더 느끼고 싶어서라도 지식을 더 더 많이, 미리 확장시켜 둬야겠다 생각했다.&lt;/p&gt;
&lt;p&gt;하여간 &lt;code class=&quot;language-text&quot;&gt;@Bean&lt;/code&gt;하나 적절히 쓴 걸로 유난이다 싶을 수도 있겠지만… 이 일이 있어 더 열심히 할 수 있을 것 같다. 또 다시 &lt;em&gt;얻어 걸리기&lt;/em&gt; 위해서.  레벨3, 진~짜 힘들지만 재밌다.&lt;/p&gt;
&lt;br&gt;  
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#bean%EC%9D%80-%EC%99%B8%EB%B6%80-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B3%A0&quot;&gt;@Bean은 외부 라이브러리를 등록하고…&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%95%BC%EC%83%9D-%EC%A0%81%EC%9D%91-%EC%99%84%EB%A3%8C-%EA%B8%B0%EB%85%90%EB%B9%84&quot;&gt;야생 적응 완료 기념비&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[git] 슬랙한테 봇 강퇴당하고 서브모듈 도입한 이야기]]></title><description><![CDATA[슬랙이 봇을 강퇴시켰어요 서버에서 슬랙 API를 호출하려면 발급받은 봇 토큰이 필요하다. 해당 정보를 기밀이라고 생각하지 않았는데… 애초에 봇에게 호출할 수 있는 API…]]></description><link>https://hyewoncc.github.io/git-submodule/</link><guid isPermaLink="false">https://hyewoncc.github.io/git-submodule/</guid><pubDate>Mon, 25 Jul 2022 13:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;슬랙이-봇을-강퇴시켰어요&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%AC%EB%9E%99%EC%9D%B4-%EB%B4%87%EC%9D%84-%EA%B0%95%ED%87%B4%EC%8B%9C%EC%BC%B0%EC%96%B4%EC%9A%94&quot; aria-label=&quot;슬랙이 봇을 강퇴시켰어요 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;슬랙이 봇을 강퇴시켰어요&lt;/h2&gt;
&lt;p&gt;서버에서 슬랙 API를 호출하려면 발급받은 봇 토큰이 필요하다. 해당 정보를 기밀이라고 생각하지 않았는데…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;애초에 봇에게 호출할 수 있는 API 제한이 있다&lt;/li&gt;
&lt;li&gt;연결된 워크스페이스가 개발을 위해 생성된 줍줍 팀 워크스페이스다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;라는 이유에서였다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABS0lEQVQoz51SSW7DMAzU/x+XQ24BYtlGnaB1vW+yNk8xDOSih/ZQAgNSGzkcSsUY4b0XhBBwHMe/QKNXy7Lger3icrmg73v811JiRVZt2wqmaULbtGia5txjzEJp3XUtun5AO+/oxwlN8wmSSqbWdUVZlMjzHNVbhbIssW2bSOCcEzDe9x3G7OJ3a7G7AGsdjDE/JFN8nGUaWue43W7QmRYmwzAIyJoM+eAv4yykZQbrMmM3BjF4OSAray3meZaEjJPwv+l3tuy8R90OgnmzCPF7Yokd2yRDJk7F6LmfmKUfolyIqEeDj9Hgvd9gnD9beD6foun9fofW+qVzVaEoClk/Ho+TXepExXhgs15gfSA3ucSEnB4v0lPPcRhffhzRdZ1IwiQ0dsA3yvmIZ7cKmsmcFdkCGZJdlmWo6xpDP4gEBBNzeOnLsAgl+AIiGgcqoFozNgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;bot scopes&quot;
        title=&quot;bot scopes&quot;
        src=&quot;/static/5f6a98a9050130e45c6238b44da2370d/37523/scopes.png&quot;
        srcset=&quot;/static/5f6a98a9050130e45c6238b44da2370d/e9ff0/scopes.png 180w,
/static/5f6a98a9050130e45c6238b44da2370d/f21e7/scopes.png 360w,
/static/5f6a98a9050130e45c6238b44da2370d/37523/scopes.png 720w,
/static/5f6a98a9050130e45c6238b44da2370d/302a4/scopes.png 1080w,
/static/5f6a98a9050130e45c6238b44da2370d/c45c7/scopes.png 1346w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div style=&quot;text-align:center; font-style:italic; color:grey;&quot;&gt;
  슬랙에서 scopes 라는 명칭으로 봇에게 api별 호출 권한을 설정 가능하다
&lt;/div&gt;
&lt;p&gt;그래서 깃헙에 &lt;code class=&quot;language-text&quot;&gt;bot-token&lt;/code&gt;을 포함한 &lt;code class=&quot;language-text&quot;&gt;yml&lt;/code&gt;을 올려놨는데… &lt;strong&gt;어느날 API 응답이 오지 않았다.&lt;/strong&gt; 개발자 도구의 응답에는 &lt;code class=&quot;language-text&quot;&gt;Expired Token&lt;/code&gt;이라는 에러 문구가 떴고, 분명 워크스페이스에 정상 추가했던 봇이 사라져 있었다. &lt;!--more--&gt; &lt;strong&gt;슬랙이 봇을 강제 추방&lt;/strong&gt;시킨 것이었다…&lt;/p&gt;
&lt;p&gt;얼마간 잘 썼기에, 일정 주기로 공개 저장소들을 크롤링 해 한번에 정지시키는 게 아닐까 싶다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;설명서를-잘-읽자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%A4%EB%AA%85%EC%84%9C%EB%A5%BC-%EC%9E%98-%EC%9D%BD%EC%9E%90&quot; aria-label=&quot;설명서를 잘 읽자 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;설명서를 잘 읽자&lt;/h3&gt;
&lt;p&gt;슬랙 API에 들어가면 &lt;code class=&quot;language-text&quot;&gt;토큰을 공개적인 버전 컨트롤에 올리지 말라&lt;/code&gt;가 떡하니 명시되어 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAh0lEQVQY02WOSQ7EIAwE+f9PWbwwMBcipUduJlxyKDVumZJTqw2tvRERUktlRldrUJFz5qyqnLn3z/R8NLOTsRhYpAhUo99zKYVCYa9HFv0YYwvdHSp6LqPc/NDEoN5h3vmJfAbmnKT33d/3jRT2R8Q3T1dkHSg+kW2i2M7Wv7iu68VaixnCH0Z2MArh8iu+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;slack warning&quot;
        title=&quot;slack warning&quot;
        src=&quot;/static/16366b208f74e43a27f1ecc9b709e4bf/37523/slack_warning.png&quot;
        srcset=&quot;/static/16366b208f74e43a27f1ecc9b709e4bf/e9ff0/slack_warning.png 180w,
/static/16366b208f74e43a27f1ecc9b709e4bf/f21e7/slack_warning.png 360w,
/static/16366b208f74e43a27f1ecc9b709e4bf/37523/slack_warning.png 720w,
/static/16366b208f74e43a27f1ecc9b709e4bf/302a4/slack_warning.png 1080w,
/static/16366b208f74e43a27f1ecc9b709e4bf/07a9c/slack_warning.png 1440w,
/static/16366b208f74e43a27f1ecc9b709e4bf/891d5/slack_warning.png 1520w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;봇 토큰에는 큰 권한이 있습니다. 토큰은 사용자가 앱을 설치함으로써 권한을 부여했음을 나타냅니다. 앱을 설치한 유저가 준 신뢰를 해치지 않도록 토큰을 안전하게, 기밀로 보관하세요.&lt;br&gt;
&lt;strong&gt;최소한 공개적인 형상관리에 토큰을 올리지 마세요.&lt;/strong&gt; 환경 변수를 통해 사용하시길 바랍니다. 더 많은 정보는 저희가 제공하는 &lt;a href=&quot;https://api.slack.com/authentication/best-practices&quot;&gt;앱 보안을 위한 지침&lt;/a&gt;을 참고하세요.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;하지만 직접 정지시킬 줄은 몰랐다. 깃헙에 올라간 상태로 꽤 오래 쓰고 있었기 때문에 더 그랬다.&lt;br&gt;
변명을 하자면 테스트용 팀 워크스페이스를 사용하고 있었고, 실서비스라면 절대 그러지 않았을 것이다. 그럼에도 보안에 너무 소홀했던 것 같다. 슬랙의 안내를 읽고 나니 앱을 설치함으로써 우리를 신뢰할 미래의 사용자에게 큰 잘못이 맞았다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;서브모듈-도입기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EB%8F%84%EC%9E%85%EA%B8%B0&quot; aria-label=&quot;서브모듈 도입기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;서브모듈 도입기&lt;/h2&gt;
&lt;h3 id=&quot;yaml-밀거래&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#yaml-%EB%B0%80%EA%B1%B0%EB%9E%98&quot; aria-label=&quot;yaml 밀거래 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;yaml 밀거래&lt;/h3&gt;
&lt;p&gt;봇 정지를 당하고 &lt;code class=&quot;language-text&quot;&gt;application.yml&lt;/code&gt; 설정파일을 깃헙에서 내렸다. 그리고 &lt;code class=&quot;language-text&quot;&gt;yml&lt;/code&gt;파일을 팀 워크스페이스에서 밀거래(?)했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6ElEQVQ4y51Uy4oaURDtb3IlqEs3btQv8AP8Dr9FdKWg7oSJ6CKYjSgTidghicTWfk6/32eogtvJDM5MTMHpV/WtOlWn7pWeLAvyUYYsy9jv9zgcDvycpinI8jz/EGRZliGOY0hXTcXP0wmu68IwDFiWxbBtG1EU4W+jxbTwLRAJybJt/Lqc4TgOgiCA53mciZ7pTu/X65Xh+36x8BaYYUKLXA+6rjMz13HZkSQJgxIpioKLcuEqyCdAfsGO2FNFEjnINOWA3z+2uNeoAlEVM6QL9dUwTex2W3Q6HTQaDbRaLTSbzZtot9uo1+vo9Xpcqug395BoI0/h2hrOygXz+RyTyQSz2QzT6fQmyDcej7FerzlIGIZcMrVNiuIYWRojCUz4QXB3yUIQsuPxCImiq6oGw3hCEEQwTZMVphLIR3chkPgmQO0SqhcBhSimfoaunu5mSIkKYTXtT0BV+Y5vj1/w8PAJy+XyXaxWKywWC2w2G55NGqcXolBDHdfDbvfI6pXLZVSrVVQqlZuo1WoolUrodrtc+ouxEZGjKORsNMg0Bv8CwUz0mQebMpDchmHB90P+6aM9K3bG68Oj2ClZnsMyFFjG+b8EEWoXO0WI8nX7Gf1+H4PBAMPh8E2QfzQa8ekk2kTsKOAzwcGUYSFH7QEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;yml trafficking&quot;
        title=&quot;yml trafficking&quot;
        src=&quot;/static/7a5d781111bde075323f0f53981f4c18/37523/yml.png&quot;
        srcset=&quot;/static/7a5d781111bde075323f0f53981f4c18/e9ff0/yml.png 180w,
/static/7a5d781111bde075323f0f53981f4c18/f21e7/yml.png 360w,
/static/7a5d781111bde075323f0f53981f4c18/37523/yml.png 720w,
/static/7a5d781111bde075323f0f53981f4c18/302a4/yml.png 1080w,
/static/7a5d781111bde075323f0f53981f4c18/a6ec4/yml.png 1438w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div style=&quot;text-align:center; font-style:italic; color:grey;&quot;&gt;
  yaml 밀거래의 현장. 설정이 바뀔 때 마다 밀거래가 발생했다.
&lt;/div&gt;
&lt;p&gt;언제까지고 이렇게 할 수는 없을 뿐 더러, &lt;code class=&quot;language-text&quot;&gt;배포 자동화&lt;/code&gt;를 앞두고 있었기에 이를 해결해야만 했다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;서브모듈-등록&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EB%93%B1%EB%A1%9D&quot; aria-label=&quot;서브모듈 등록 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;서브모듈 등록&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;개발 중이라 설정이 완전히 고정되지 않았다&lt;/li&gt;
&lt;li&gt;팀원 누구나 접근해서 수정할 수 있어야 한다&lt;/li&gt;
&lt;li&gt;배포 자동화 시 최대한 관리가 편해야 한다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이 세 가지를 고려해 &lt;code class=&quot;language-text&quot;&gt;서브모듈&lt;/code&gt; 사용을 제안했고 받아들여졌다. 연로그가 백엔드 팀원들을 모두 초대한 &lt;code class=&quot;language-text&quot;&gt;organization&lt;/code&gt;을 만들고 &lt;code class=&quot;language-text&quot;&gt;private&lt;/code&gt; 레포지토리를 개설했다. 여기에 &lt;code class=&quot;language-text&quot;&gt;application.yml&lt;/code&gt;을 올리고, 기존 프로젝트에 서브모듈을 추가했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; submodule &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;private repository 주소&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;추가할 모듈명&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;추가하면 폴더와 파일이 생기는데, 깃에는 내용을 제외한 폴더만 감지된다. 그리고 최상단에 경로에 서브모듈 경로 정보를 담은 &lt;code class=&quot;language-text&quot;&gt;.gitmodules&lt;/code&gt; 파일이 생성된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[submodule &quot;backend/src/main/resources/security&quot;]
	path = backend/src/main/resources/security
	url = https://github.com/2022-pickpick/security.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;우리 팀은 &lt;code class=&quot;language-text&quot;&gt;security&lt;/code&gt;란 이름으로 서브모듈을 추가했다. 이 상태로 &lt;code class=&quot;language-text&quot;&gt;push&lt;/code&gt;하면 서브모둘이 &lt;code class=&quot;language-text&quot;&gt;github&lt;/code&gt;에 추가된 것을 볼 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnElEQVQY042QSQ7CMBAE8/8vggQHNrPYiZeMJ85QCMgFwYGW6lLqS3dXtRFTJteZczKu2QjFiGKkagyxEILHzPgn3ck5VusNx7Nn5wLbveN0CRzc7eWO7sLeefokiE5IXdDfdHEY6L1HVVGt5FIQqYyjUEZhlIpoQ6eZNtvCzNSe7psuTzBU8OU99VdEhBjT+5qc6bOibene7x+TH2UuN3UUro0JAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;submodule in github&quot;
        title=&quot;submodule in github&quot;
        src=&quot;/static/7473e109db6825064794d4033bfc703a/37523/submodule.png&quot;
        srcset=&quot;/static/7473e109db6825064794d4033bfc703a/e9ff0/submodule.png 180w,
/static/7473e109db6825064794d4033bfc703a/f21e7/submodule.png 360w,
/static/7473e109db6825064794d4033bfc703a/37523/submodule.png 720w,
/static/7473e109db6825064794d4033bfc703a/302a4/submodule.png 1080w,
/static/7473e109db6825064794d4033bfc703a/07a9c/submodule.png 1440w,
/static/7473e109db6825064794d4033bfc703a/cb1ac/submodule.png 1936w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;접근 권한이 있는 상태로 모듈을 클릭하면 해당 private 레포로 이동한다. 하지만 권한이 없는 상태로 모듈을 클릭할 시, &lt;code class=&quot;language-text&quot;&gt;404 에러 페이지&lt;/code&gt;가 뜬다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;-젠킨스-배포&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%B0%B0%ED%8F%AC&quot; aria-label=&quot; 젠킨스 배포 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;+ 젠킨스 배포&lt;/h3&gt;
&lt;p&gt;이 후 젠킨스를 통한 빌드 및 배포 자동화가 이뤄졌다. 젠킨스에서는 깃헙 계정에서 발급한 토큰을 &lt;code class=&quot;language-text&quot;&gt;credentianl&lt;/code&gt;에 등록해 서브모듈의 접근 권한을 줄 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAo0lEQVQY06WQWwqEMAxF3f9C/HFP4ljfjw7W1ha1PYMdcPyfwIHc3BAuSaqqIs9ziqLgPE/+rUQphZQysm0bx3Gw73vsnXO39t4TQoj6mjtnb+9Jsq4r19FpmqibDmMMRmtKUdH1A9Za+r5HCEHbtlz7wzhSNy1q1Wj94/JiwnmeWJRBWY8PAQgs5mRz3xe8ypI0TcmyjLeU+ACz2tH2iKmffACRzzSJjU2KRwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;jenkins credential&quot;
        title=&quot;jenkins credential&quot;
        src=&quot;/static/f2c65f119b81122d0e7ba1b1f35291d4/37523/credential.png&quot;
        srcset=&quot;/static/f2c65f119b81122d0e7ba1b1f35291d4/e9ff0/credential.png 180w,
/static/f2c65f119b81122d0e7ba1b1f35291d4/f21e7/credential.png 360w,
/static/f2c65f119b81122d0e7ba1b1f35291d4/37523/credential.png 720w,
/static/f2c65f119b81122d0e7ba1b1f35291d4/302a4/credential.png 1080w,
/static/f2c65f119b81122d0e7ba1b1f35291d4/07a9c/credential.png 1440w,
/static/f2c65f119b81122d0e7ba1b1f35291d4/5e703/credential.png 1942w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;젠킨스 credential 깃헙 권한 등록 때 도움을 받은 포스트 - &lt;a href=&quot;https://velog.io/@zzarbttoo/JenkinsGit-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0Git-Token-%EB%B0%9C%EA%B8%89-Jenkins-Credential-%EB%93%B1%EB%A1%9D&quot;&gt;[Jenkins]Git 연동하기(Git Token 발급 + Jenkins Credential 등록)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;권한을 주지 않고 테스트 또는 빌드를 진행할 시, 설정값을 불러오지 못해 시행되지 않는다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBElEQVQY06WQzW6EMAyEef8X21v3tMduF9gQkpBQwn9J+KqkanvprZasscbjseXCWktVVXRdx3me/CfSfLFtG9M0kTARKUMI7PvOcRzEGH8wcSlTnTTfvTSbMEXx1ybvB263G0IIxtFzv99ZlgXnHEopYgwsy0w4PhjHMeuGYfg1DMeRrzTGYG2HNukNNbJpcK6nlS3OOqRUyEZmY9FapO7RWlOWJcZ8vawY5g1jHdfrS26uy4r2mqp/IN5r9NyiZomaJHVfZr6dJMIL5Ciz5q17RQ7Nl2EIkWmauVwueO/z2f1ueW4lcnvSRU13KkxokXtNs9W5tqfCRkW7C57rA73KbPgJs2PMvp5FSlAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;build success&quot;
        title=&quot;build success&quot;
        src=&quot;/static/e6a2644d6ef47d5c9dee94fc949086da/37523/success.png&quot;
        srcset=&quot;/static/e6a2644d6ef47d5c9dee94fc949086da/e9ff0/success.png 180w,
/static/e6a2644d6ef47d5c9dee94fc949086da/f21e7/success.png 360w,
/static/e6a2644d6ef47d5c9dee94fc949086da/37523/success.png 720w,
/static/e6a2644d6ef47d5c9dee94fc949086da/302a4/success.png 1080w,
/static/e6a2644d6ef47d5c9dee94fc949086da/07a9c/success.png 1440w,
/static/e6a2644d6ef47d5c9dee94fc949086da/cb1ac/success.png 1936w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;credential&lt;/code&gt; 등록 후 서브모듈이 포함된 프로젝트가 성공적으로 빌드되는 것을 볼 수 있다.&lt;/p&gt;
&lt;br/&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%8A%AC%EB%9E%99%EC%9D%B4-%EB%B4%87%EC%9D%84-%EA%B0%95%ED%87%B4%EC%8B%9C%EC%BC%B0%EC%96%B4%EC%9A%94&quot;&gt;슬랙이 봇을 강퇴시켰어요&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%84%A4%EB%AA%85%EC%84%9C%EB%A5%BC-%EC%9E%98-%EC%9D%BD%EC%9E%90&quot;&gt;설명서를 잘 읽자&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EB%8F%84%EC%9E%85%EA%B8%B0&quot;&gt;서브모듈 도입기&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#yaml-%EB%B0%80%EA%B1%B0%EB%9E%98&quot;&gt;yaml 밀거래&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EB%93%B1%EB%A1%9D&quot;&gt;서브모듈 등록&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%B0%B0%ED%8F%AC&quot;&gt;+ 젠킨스 배포&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[세션의 정체를 찾아서(with 🍪, 🪙)]]></title><description><![CDATA[🔍 세션의 정체를 찾아서 세션의 정의 영어에서 이란 특정 활동이 수행된 기간을 의미한다. 일상 속에서 보자면 나는 꾸준히 PT를 받고 있는데, PT 수업 한 회를 세션이라고 불렀다. 그럼 CS…]]></description><link>https://hyewoncc.github.io/session-cookie-jwt/</link><guid isPermaLink="false">https://hyewoncc.github.io/session-cookie-jwt/</guid><pubDate>Sat, 09 Jul 2022 07:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;-세션의-정체를-찾아서&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-%EC%84%B8%EC%85%98%EC%9D%98-%EC%A0%95%EC%B2%B4%EB%A5%BC-%EC%B0%BE%EC%95%84%EC%84%9C&quot; aria-label=&quot; 세션의 정체를 찾아서 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;🔍 세션의 정체를 찾아서&lt;/h2&gt;
&lt;h3 id=&quot;세션의-정의&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%9D%98-%EC%A0%95%EC%9D%98&quot; aria-label=&quot;세션의 정의 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;세션의 정의&lt;/h3&gt;
&lt;p&gt;영어에서 &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt;이란 특정 활동이 수행된 기간을 의미한다. 일상 속에서 보자면 나는 꾸준히 PT를 받고 있는데, PT 수업 한 회를 세션이라고 불렀다.&lt;br&gt;
그럼 CS의 세션은 무엇일까? **&lt;code class=&quot;language-text&quot;&gt;둘 또는 그 이상의 컴퓨팅 디바이스간에서 일어나는 일시적이고 상호적인 정보 교환&lt;/code&gt;**을 의미한다. 통신을 하는 동안 세션이 유지된다면 세션의 정보를 이용할 수 있을 것이다. 이런 상태를 &lt;code class=&quot;language-text&quot;&gt;stateful&lt;/code&gt;이라 부른다. 반대는 &lt;code class=&quot;language-text&quot;&gt;stateless&lt;/code&gt;라고 부르는데, HTTP 프로토콜이 이에 속한다. (막간 홍보 : HTTP에 관심이 있다면 &lt;a href=&quot;https://youtu.be/IjxkKQvn8Bc&quot;&gt;HTTP 테코톡&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;HTTP 프로토콜이 &lt;code class=&quot;language-text&quot;&gt;stateless&lt;/code&gt;이기에, 여러 불편한 상황이 일어난다. 쇼핑몰에서 상품을 장바구니에 담을 때 마다 로그인을 새로 요구한다고 생각해보자. 짜증나서 사려던 것도 안 사고 나가지 않을까? 이런 무상태를 보충하기 위해 상태 유지를 돕는 기술을 함께 사용한다. 그 중 하나가 &lt;code class=&quot;language-text&quot;&gt;세션&lt;/code&gt;이다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;javax-servelet-httpsession&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#javax-servelet-httpsession&quot; aria-label=&quot;javax servelet httpsession permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;javax servelet HttpSession&lt;/h3&gt;
&lt;p&gt;자바 서블릿의 &lt;code class=&quot;language-text&quot;&gt;HttpSession&lt;/code&gt;은 &lt;strong&gt;인터페이스&lt;/strong&gt;다. 이 포스팅에서 다룰 내용을 java docs에서 간추려보았다.&lt;/p&gt;
&lt;!--more--&gt;
&lt;blockquote&gt;
&lt;p&gt;유저 정보를 저장함으로써 웹페이지 요청이나 사이트 방문 간에 유저를 식별할 수 있는 방법을 제공한다. 서블릿 컨테이너는 이 인터페이스를 HTTP 클라이언트와 HTTP 서버 간의 세션을 만드는데 사용한다. 세션은 여러 커넥션이나 유저의 페이지 요청을 걸쳐 특정 시간동안 유지된다. 한 세션은 보통 사이트를 여러번 방문할 한 유저에 대응된다. 쿠키나 URLs 복제 등을 이용해 서버에서 한 세션을 유지시킬 수 있다.&lt;br&gt;
… 서블릿은 클라이언트가 쿠키 비허용 같이 의도적으로 세션 유지를 거부할 때에 대한 대비를 해둬야 한다. 클라이언트가 세션에 참여하면 &lt;code class=&quot;language-text&quot;&gt;isNew&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;를 반환한다. 클라이언트가 세션 유지를 거부하면, &lt;code class=&quot;language-text&quot;&gt;getSession&lt;/code&gt;은 매 요청마다 다른 세션을 반환하기에 &lt;code class=&quot;language-text&quot;&gt;isNew&lt;/code&gt;도 항상 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;를 반환할 것이다.&lt;br&gt;
세션 정보 범위는 현재의 웹 어플리케이션(ServletContext)로 한정되기에, 한 곳에 저장된 정보는 다른 웹 어플리케이션(ServletContext)에서 접근할 수 없다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;br/&gt;
&lt;h3 id=&quot;톰캣-standardsession--managerbase&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%86%B0%EC%BA%A3-standardsession--managerbase&quot; aria-label=&quot;톰캣 standardsession  managerbase permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;톰캣 StandardSession &amp;#x26; ManagerBase&lt;/h3&gt;
&lt;p&gt;스프링부트로 웹개발을 하고 있기에, &lt;strong&gt;톰캣의 구현체&lt;/strong&gt;를 살펴보겠다. &lt;code class=&quot;language-text&quot;&gt;StandardSession&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;HttpSession&lt;/code&gt;과 함께 &lt;code class=&quot;language-text&quot;&gt;Session&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Serializable&lt;/code&gt;을 구현하고 있다. 이중 &lt;code class=&quot;language-text&quot;&gt;Session&lt;/code&gt; 인터페이스는 &lt;code class=&quot;language-text&quot;&gt;HttpSession&lt;/code&gt;의 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%ED%8D%BC%EC%82%AC%EB%93%9C_%ED%8C%A8%ED%84%B4&quot;&gt;퍼사드 패턴&lt;/a&gt;적용 객체이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/**
* The collection of user data attributes associated with this Session.
* 역 - 해당 세션과 관련된 유저 정보의 집합  
*/&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ConcurrentMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; attributes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ConcurrentHashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; notify&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;StandardSession&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;ConcurrentMap&lt;/code&gt;의 형태로 정보를 담는다. &lt;code class=&quot;language-text&quot;&gt;setAttribute&lt;/code&gt;로 세션에 객체를 담을 수 있는데, 특이사항이 두 가지 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;키값이 이미 존재한다면 값이 교체된다&lt;/li&gt;
&lt;li&gt;추가한 객체가 &lt;code class=&quot;language-text&quot;&gt;HttpSessionBindingListener&lt;/code&gt;의 구현체라면, &lt;code class=&quot;language-text&quot;&gt;valueBound()&lt;/code&gt;가 호출된다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1번은 &lt;code class=&quot;language-text&quot;&gt;Map&lt;/code&gt; 자료구조를 생각하면 당연한 사실이겠지만, 2번은 추후 공부가 더 필요한 영역이다.&lt;/p&gt;
&lt;p&gt;그리고 &lt;code class=&quot;language-text&quot;&gt;ManagerBase&lt;/code&gt; 클래스에 &lt;code class=&quot;language-text&quot;&gt;session id&lt;/code&gt;를 키값으로 세션이 들어가있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ManagerBase&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LifecycleMBeanBase&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Manager&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; sessions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ConcurrentHashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Session&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        sessions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getIdInternal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSession&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; sessionId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Session&lt;/span&gt; s &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sessions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sessionId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt; 
&lt;h2 id=&quot;-그렇담-쿠키는-무엇인가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-%EA%B7%B8%EB%A0%87%EB%8B%B4-%EC%BF%A0%ED%82%A4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80&quot; aria-label=&quot; 그렇담 쿠키는 무엇인가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;🍪 그렇담 쿠키는 무엇인가&lt;/h2&gt;
&lt;h3 id=&quot;쿠키-정의&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%BF%A0%ED%82%A4-%EC%A0%95%EC%9D%98&quot; aria-label=&quot;쿠키 정의 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;쿠키 정의&lt;/h3&gt;
&lt;p&gt;쿠키는 인터넷 웹 브라우저를 통해 컴퓨팅 기기에 설치되는 &lt;strong&gt;작은 기록 정보 파일&lt;/strong&gt;이다. 쿠키는 &lt;code class=&quot;language-text&quot;&gt;key-value&lt;/code&gt;쌍과 속성으로 이루어져 있는데, 속성에는 만료 기간, 도메인, 플래그(ex. Secure, HttpOnly)등의 정보를 저장한다. 브라우저의 개발자 도구에서 값을 직접 확인할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.111111111111107%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABD0lEQVQY0x2Q2W6DMBBF+f8v6hf0pW9V04SEAF4wBsIaglkancoeyRrbGp1770TGGNq25f1+I5RGFRapDUIV5FKTywJtLD+XG6c4Ic0VSSbIhCZJRZjzJ5OaeyaI6ubBMIwcxx+lrbD1g3N843SOSXOJkJq264lv9/CvTcn0nHnOL7p+YH4tLG5lGCcyoYiayjANHb5MWVKUlt/LlSTNaPsBqYsw7LvShrppmZclAJu2C7B125jmGVUYoo8vzee551vtyMJSVlVQEkJQ102I44HebZoL6keLc2sAVnWDWze2fQ9vLxid8p6rHtHdgTIWWze8nGPbjwDyqv04kksVduRXtDgXovbDGO4e6h36dP9DV3TmY6RtbwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;cookie sample&quot;
        title=&quot;cookie sample&quot;
        src=&quot;/static/ed7a7815a36826fd59a6e115c1e5cfda/37523/cookie_sample.png&quot;
        srcset=&quot;/static/ed7a7815a36826fd59a6e115c1e5cfda/e9ff0/cookie_sample.png 180w,
/static/ed7a7815a36826fd59a6e115c1e5cfda/f21e7/cookie_sample.png 360w,
/static/ed7a7815a36826fd59a6e115c1e5cfda/37523/cookie_sample.png 720w,
/static/ed7a7815a36826fd59a6e115c1e5cfda/302a4/cookie_sample.png 1080w,
/static/ed7a7815a36826fd59a6e115c1e5cfda/07a9c/cookie_sample.png 1440w,
/static/ed7a7815a36826fd59a6e115c1e5cfda/ca640/cookie_sample.png 2406w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;쿠키는 세션 관리, 개인화, 트래킹 등의 목적으로 사용된다. 하지만 이미지에서 보이듯 값을 자유롭게 확인 가능함으로 &lt;strong&gt;비밀번호, 개인정보 등의 중요정보는 절대 담아선 안된다.&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;쿠키-종류&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%BF%A0%ED%82%A4-%EC%A2%85%EB%A5%98&quot; aria-label=&quot;쿠키 종류 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;쿠키 종류&lt;/h3&gt;
&lt;p&gt;종류에 따라 특정한 유형으로 따로 저장되는 건 아니고, 설정에 따라 분류할 수 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Session Cookie
&lt;ul&gt;
&lt;li&gt;expires(유효 일자)나 max-age(만료 기간) 옵션이 지정되지 않은 쿠키. 브라우저가 닫힐 때 함께 삭제된다.&lt;/li&gt;
&lt;/ul&gt;
expires를 과거로 지정하거나 max-age를 0으로 설정하는 경우 바로 삭제되므로 여기에 속한다.&lt;/li&gt;
&lt;li&gt;Persistent Cookie
&lt;ul&gt;
&lt;li&gt;장기간 저장되는 쿠키. max-age로 설정할 수 있다. 접속한 기기에 저장된다.&lt;/li&gt;
&lt;/ul&gt;
포스팅 자료를 찾다 2038년 문제와 관련된 재밌는 글을 발견했는데 심심하면 읽어보시길. &lt;a href=&quot;https://stackoverflow.com/questions/3290424/set-a-cookie-to-never-expire&quot;&gt;절대 만료되지 않을 쿠키 만들기 - stackoverflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Secure Cookie
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;secure&lt;/code&gt; 옵션을 설정해 HTTPS로 통신하는 경우에만 전송되는 쿠키.&lt;/li&gt;
&lt;/ul&gt;
&lt;code class=&quot;language-text&quot;&gt;secure&lt;/code&gt;가 설정되어 있지 않은 기본값은 &lt;code class=&quot;language-text&quot;&gt;HTTPS &amp;lt;-🍪-&gt; HTTP&lt;/code&gt;간의 이용이 자유롭다. 반면 설정 시, &lt;code class=&quot;language-text&quot;&gt;HTTPS -🍪/-&gt; HTTP&lt;/code&gt; 이 되어 HTTPS에서 생성한 쿠키를 HTTP가 읽을 수 없다.&lt;br&gt;
민감 내용이 저장되어 있어 비암호화인 HTTP 연결 전달을 원치 않는다면 사용하면 된다.&lt;/li&gt;
&lt;li&gt;Third-Party Cookie
&lt;ul&gt;
&lt;li&gt;사용자가 방문 중인 도메인이 아닌 다른 도메인에서 설장한 쿠키. &lt;a href=&quot;https://ko.javascript.info/cookie#ref-696&quot;&gt;부록: 서드 파티 쿠키 - JAVASCRIPT.INFO&lt;/a&gt;에 잘 설명되어 있다. 반대 개념으로 같은 도메인에서 설정한 쿠키는 First-Party Cookie다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;br/&gt;
&lt;h2 id=&quot;httpsession을-이용한-상태-유지-with-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#httpsession%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%83%81%ED%83%9C-%EC%9C%A0%EC%A7%80-with-&quot; aria-label=&quot;httpsession을 이용한 상태 유지 with  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HttpSession을 이용한 상태 유지 (with 🍪)&lt;/h2&gt;
&lt;h3 id=&quot;세션에-상태값-유지하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%97%90-%EC%83%81%ED%83%9C%EA%B0%92-%EC%9C%A0%EC%A7%80%ED%95%98%EA%B8%B0&quot; aria-label=&quot;세션에 상태값 유지하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;세션에 상태값 유지하기&lt;/h3&gt;
&lt;p&gt;HttpSession으로 간단한 상태 유지를 한 사례를 &lt;a href=&quot;https://github.com/hyewoncc/spring-sandbox/tree/session-cookie&quot;&gt;깃헙&lt;/a&gt;에서 볼 수 있다. 해당 브랜치의 애플리케이션을 실행하면 간단한 페이지가 뜬다. &lt;code class=&quot;language-text&quot;&gt;삐약삐약&lt;/code&gt;을 누르면 병아리가 추가된다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAmUlEQVQY04WPgQqDMAxE+/+/ONjmXFtbi7CqNerWNzoRBhuY8OC45CBRTtdobwihwzaOtg1MIowpoa3DNB7jAsZ1m25atPXU2nIzHcZ6qtpwvloulUO9MuScEREeMdL3AzLPLOvKWni+kBSZR//RxSszkYk0Z5ZloR8TsZ8YxhVFzpT+W3nzg7c099Nufi/8RFS57hjYPzniDXxpNzSqsq9OAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;session sample 1&quot;
        title=&quot;session sample 1&quot;
        src=&quot;/static/8f7af9d828ab8c631be123af1d0e629d/37523/session_sample1.png&quot;
        srcset=&quot;/static/8f7af9d828ab8c631be123af1d0e629d/e9ff0/session_sample1.png 180w,
/static/8f7af9d828ab8c631be123af1d0e629d/f21e7/session_sample1.png 360w,
/static/8f7af9d828ab8c631be123af1d0e629d/37523/session_sample1.png 720w,
/static/8f7af9d828ab8c631be123af1d0e629d/302a4/session_sample1.png 1080w,
/static/8f7af9d828ab8c631be123af1d0e629d/07a9c/session_sample1.png 1440w,
/static/8f7af9d828ab8c631be123af1d0e629d/09262/session_sample1.png 1896w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;br&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApklEQVQY032Oy27DMAwE/f+/l556aGobkixbSGDLD0qKOYXaQwukyC7mQi4XbLzpMaMlhBtu8ExT4BBh23eM81gfsOOM9fcfhgnjRnrj6OwN60ba3vLx6bi2nuZUUFVEhHlZiHFFUiKX8o1skTS/k9aOFFtKqbsHIgd7UnLOxG1niQfrVmhQpfo/aR2fmWAuDN0bpAn08TfxdNPU715RdVb0t+JV/gshYjakwUdV+QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;session sample 2&quot;
        title=&quot;session sample 2&quot;
        src=&quot;/static/f07c34a356e54d001a0234d8d3f0065c/37523/session_sample2.png&quot;
        srcset=&quot;/static/f07c34a356e54d001a0234d8d3f0065c/e9ff0/session_sample2.png 180w,
/static/f07c34a356e54d001a0234d8d3f0065c/f21e7/session_sample2.png 360w,
/static/f07c34a356e54d001a0234d8d3f0065c/37523/session_sample2.png 720w,
/static/f07c34a356e54d001a0234d8d3f0065c/302a4/session_sample2.png 1080w,
/static/f07c34a356e54d001a0234d8d3f0065c/07a9c/session_sample2.png 1440w,
/static/f07c34a356e54d001a0234d8d3f0065c/09262/session_sample2.png 1896w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;해당 애플리케이션은 브라우저를 완전히 종료하고 다시 켜는 것만 아니면, 새로고침을 하거나, 페이지를 닫았다 열어도 증가한 만큼 병아리의 수가 유지된다. &lt;code class=&quot;language-text&quot;&gt;HttpSession&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;chicks&lt;/code&gt;라는 이름으로 정수값을 저장하기 때문이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SessionController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;chicks&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ModelAndView&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpSession&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; attribute &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ModelAndView&lt;/span&gt; modelAndView &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ModelAndView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;session.html&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;attribute &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; attribute&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; attribute&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; modelAndView&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAllObjects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; modelAndView&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAllObjects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpSession&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; attribute &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;attribute &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SESSION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; attribute &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;redirect:/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 애플리케이션은 &lt;code class=&quot;language-text&quot;&gt;ManagerBase&lt;/code&gt;에서 해당 세션을 어떻게 찾아오는 것일까? 개발자 도구에서 &lt;code class=&quot;language-text&quot;&gt;쿠키&lt;/code&gt;를 보면 답을 알 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 11.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAdElEQVQI1y2LORLCMBDA8v8H0lCEHLv2+g45gEoMHgo1GmkwCzymiffnw3W9WNVRauu0bSPXRi4VZ4F5FcZZuN1HxAcspu6dRdRS7wYRQVU59p3zPBHnEfUsq/Z4WgT/G3wgpkKImZgyubQ/FQsJUcdzP/gCX8uVvdmJaxQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;jsessionid&quot;
        title=&quot;jsessionid&quot;
        src=&quot;/static/327473bdf2ba7a5bce604ba20101f597/37523/jsessionid.png&quot;
        srcset=&quot;/static/327473bdf2ba7a5bce604ba20101f597/e9ff0/jsessionid.png 180w,
/static/327473bdf2ba7a5bce604ba20101f597/f21e7/jsessionid.png 360w,
/static/327473bdf2ba7a5bce604ba20101f597/37523/jsessionid.png 720w,
/static/327473bdf2ba7a5bce604ba20101f597/302a4/jsessionid.png 1080w,
/static/327473bdf2ba7a5bce604ba20101f597/07a9c/jsessionid.png 1440w,
/static/327473bdf2ba7a5bce604ba20101f597/08485/jsessionid.png 2014w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;HttpSession&lt;/code&gt;을 생성할 때, 톰캣에서 자동으로 랜덤한 문자열인 &lt;code class=&quot;language-text&quot;&gt;JSESSIONID&lt;/code&gt;를 생성한다. 그리고 이 값을 쿠키에 담아 클라이언트에 전송하고, 쿠키가 유지되는 동안 이 쿠키의 &lt;code class=&quot;language-text&quot;&gt;JSESSIONID&lt;/code&gt; 값으로 저장된 세션을 찾아온다. 해당 쿠키를 삭제하면 새로운 세션에 연결되고 병아리의 수가 초기화된다.&lt;/p&gt;
&lt;h2 id=&quot;세션의-한계와-극복법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%9D%98-%ED%95%9C%EA%B3%84%EC%99%80-%EA%B7%B9%EB%B3%B5%EB%B2%95&quot; aria-label=&quot;세션의 한계와 극복법 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;세션의 한계와 극복법&lt;/h2&gt;
&lt;p&gt;세션은 JVM에 저장된다. 따라서 서버가 분산되어 있다면 위의 방식으로 동작하지 않는다. A서버 메모리의 세션 맵과 B서버 메모리의 세션 맵이 다르기 때문이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQY04WQyW7DMAxE8/9/1UPvSW8OEjixbMuyJGrxIjmmxCJwELeHonMhCeIRwznQv0qJYvAGwCittZQSEbfNYSsAME3TOI7bGJdlnucQI4YQrWuZK8+FrT80mK7rmqbx3u9wCOHrdJJSEtHDT65XQggpZc+FEGHyxFvZcaaVBoCcc0rpBeeciagoCmMM4nIpz9frpbpXjLHyVs1j+OuhHe77fhgGRPRurMquqdu6rkXPZ5QprwaUUSWYp+0QQoxxt01E67q+k0gpIeJ2NOXVPtidHdXtUwNwzpVS1tpf8A/lDcv51TwTNSCV1Vo55962vwGStZK2eQfZWAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;servers&quot;
        title=&quot;servers&quot;
        src=&quot;/static/a1310f23cf408bd8b9e8d43b3b395daf/37523/balance01.png&quot;
        srcset=&quot;/static/a1310f23cf408bd8b9e8d43b3b395daf/e9ff0/balance01.png 180w,
/static/a1310f23cf408bd8b9e8d43b3b395daf/f21e7/balance01.png 360w,
/static/a1310f23cf408bd8b9e8d43b3b395daf/37523/balance01.png 720w,
/static/a1310f23cf408bd8b9e8d43b3b395daf/1d69c/balance01.png 750w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이를 극복할 수 있는 몇 방안을 간략하게 소개하겠다.&lt;/p&gt;
&lt;h3 id=&quot;sticky-session&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#sticky-session&quot; aria-label=&quot;sticky session permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sticky session&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQY022QS26EMBBE5/4XmxOQRVYICeNf293Y4wZ/cMQQoSTKW1d1V9Wjv6m1Silzzr33o/8DEXokC85ae2qOU/XIOa/rGmN8Pp/kMYdUw2tnfqXEvOWSAmt6Kal0xBnk5yKNVoqIvs3OuVqrVmrf89a6wwBiMdZaY4xVkVJJTZ4IKWdEPI6jtXaa72DHm967R0KkcRynadJSllJuwZ8uj+tMKWUYBkRquSOEWYzzhZBljS0m5/xK1oHS2jDztm2nmZmFECmlYRi894kxsGl9v96U3n3KdmWlIZJYpo9ZSABAxF+xieha+2eRe3sAcM6D8zGEO/YX6zORvB4z9SMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sticky session&quot;
        title=&quot;sticky session&quot;
        src=&quot;/static/d63eba98af923b75c4aa90f1da0d56db/37523/balance02.png&quot;
        srcset=&quot;/static/d63eba98af923b75c4aa90f1da0d56db/e9ff0/balance02.png 180w,
/static/d63eba98af923b75c4aa90f1da0d56db/f21e7/balance02.png 360w,
/static/d63eba98af923b75c4aa90f1da0d56db/37523/balance02.png 720w,
/static/d63eba98af923b75c4aa90f1da0d56db/1d69c/balance02.png 750w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;한 사용자가 처음 세션에 참여한 서버로 접속을 고정시킨다. &lt;code class=&quot;language-text&quot;&gt;유저1&lt;/code&gt;이 &lt;code class=&quot;language-text&quot;&gt;서버B&lt;/code&gt;에 요청을 보냈다면, 세션이 유지되는 동안 &lt;code class=&quot;language-text&quot;&gt;서버B&lt;/code&gt;와 통신을 주고받게 된다.&lt;/p&gt;
&lt;h3 id=&quot;session-clustering&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#session-clustering&quot; aria-label=&quot;session clustering permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Session clustering&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVQY032Q3W7CMAyFef9HG1fTJNaVDZXSoDZJE5UmscmPPVVAx6RpvrCOJX/2sTf8b9BDlFwudpB9532IMTrniGhzbyKKMa4MIoYQACClxAA8uzzNXfO+r9+MnNzkjTULTLRM986/bLd+dhwwGWvFWUmptJrGsQS4GejFV3PYWXXJvvjgmfm+OaVUVRVggKKErpQRTXNs27YfhjlqzDbzVZzq/cerliaFDAF+YCJCxFIKM8eEUg2iE0IIrTUzpQKJQcn28Lmz41SutJyzwn+8iui5YOZRtudTrXqTIAOEX/Da/SweesnOzcZoBGTim8dv+XiUwxbHiH0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;session clustering&quot;
        title=&quot;session clustering&quot;
        src=&quot;/static/43c7a09ba53bd43f9711b87d785d77be/37523/balance03.png&quot;
        srcset=&quot;/static/43c7a09ba53bd43f9711b87d785d77be/e9ff0/balance03.png 180w,
/static/43c7a09ba53bd43f9711b87d785d77be/f21e7/balance03.png 360w,
/static/43c7a09ba53bd43f9711b87d785d77be/37523/balance03.png 720w,
/static/43c7a09ba53bd43f9711b87d785d77be/1d69c/balance03.png 750w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;서버 간에 세션을 복사해 공유한다. 한 서버에서 생성된 세션이 모든 서버에 복사되기에, 어떤 서버에 접속하더라도 같은 세션값을 받을 수 있다. 하지만 &lt;code class=&quot;language-text&quot;&gt;sticky session&lt;/code&gt;과 같이 유지 비용이 많이 든다.&lt;/p&gt;
&lt;h3 id=&quot;session-storage-db&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#session-storage-db&quot; aria-label=&quot;session storage db permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Session storage DB&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVQY03WQyW7DMAxE/f/flmuDpKc4TrRYsSSL2qyFLLIUaIN2roOHId9AP4NIv+M9MMYWbeqjqbWUUnrvz3YgolIKPrDeuw8hpZRzLi3bOvOZ7T/2F8Zjp9CRcTGOk5TiBW/bttvtrDHUOyyLMeZ6vRpjNCgiAoDzOKrbbUPSEDyYANraNaV0hxHxeDwCgLvN4+enFPJwOEgpNFdUaJHmNJ4YF6mjdn4LGqyIMa/r+jo759xaw0pgo+BCKcU4S/OCdnPaT9NZzaog+VK1894H59zz7YH+yd2BDzCr6XJhjMeGsb37HB6O8Vs2vpmvtcYYU84N/xj4AkXVk5S3inVvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;session storage db&quot;
        title=&quot;session storage db&quot;
        src=&quot;/static/3e674016960ae522056015067a4fa350/37523/balance04.png&quot;
        srcset=&quot;/static/3e674016960ae522056015067a4fa350/e9ff0/balance04.png 180w,
/static/3e674016960ae522056015067a4fa350/f21e7/balance04.png 360w,
/static/3e674016960ae522056015067a4fa350/37523/balance04.png 720w,
/static/3e674016960ae522056015067a4fa350/1d69c/balance04.png 750w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;외부에 세션 저장소를 따로 둔다. 앞선 두 방법 보다 비용 측면에서 나아 보이지만, 분산 서버의 많은 요청이 외부 저장소로 들어갔을 때 부하가 생길 수 있다.&lt;/p&gt;
&lt;p&gt;또는…&lt;/p&gt;
&lt;h2 id=&quot;-토큰&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-%ED%86%A0%ED%81%B0&quot; aria-label=&quot; 토큰 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;🪙 토큰&lt;/h2&gt;
&lt;h3 id=&quot;토큰이란&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%86%A0%ED%81%B0%EC%9D%B4%EB%9E%80&quot; aria-label=&quot;토큰이란 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;토큰이란?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;토큰&lt;/code&gt;이란 단어는 아주 광범위하게 쓰인다. 예를 들어 java &lt;code class=&quot;language-text&quot;&gt;StringTokenizer&lt;/code&gt;의 토큰은 문자열을 자르는 데 이용되는 특정한 문자열이다. &lt;code class=&quot;language-text&quot;&gt;jwt&lt;/code&gt;의 토큰은 생성 정보와 키, 값 쌍을 인코딩한 문자열이다. 여러 사례를 보고 내가 일반화한 CS의 토큰은 &lt;code class=&quot;language-text&quot;&gt;특정 값을 식별하는데 사용되는 키&lt;/code&gt;이다.&lt;/p&gt;
&lt;p&gt;토큰 기반 인증은 &lt;code class=&quot;language-text&quot;&gt;사용자가 서버에서 발급받은 토큰을 요청마다 함께 주는 방식&lt;/code&gt;이다. 얼핏 보면 세션ID를 쿠키로 전달하는 것과 비슷해보이지만, 전달받은 값을 서버에서 처리하는 방식이 다르다. 토큰은 저장소에 접근하지 않고, 서버에서 유효성을 검증한다. 따라서 분산 서버 환경이어도 문제가 없다.&lt;/p&gt;
&lt;p&gt;다만 &lt;code class=&quot;language-text&quot;&gt;Access Token&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;Refresh Token&lt;/code&gt;을 함께 사용하는 경우에는 &lt;code class=&quot;language-text&quot;&gt;Refresh Token&lt;/code&gt;을 DB에 저장하게 된다. 이번 포스팅에서 마저 다루기엔 내용이 길기에, 대신 잘 정리되어 있는 다른 블로그 포스팅 링크를 남기겠다. 토큰에 대해 알아보며 토큰을 사용한 대표적인 인증 방식인 &lt;code class=&quot;language-text&quot;&gt;OAuth&lt;/code&gt;도 함께 공부할 필요성을 느껴서 함께 올린다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://tansfil.tistory.com/59&quot;&gt;쉽게 알아보는 서버 인증 2편(Access Token + Refresh Token)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.icatpark.com/entry/OAuth-20-%EC%9D%B4%ED%95%B4&quot;&gt;OAuth 2.0 이해&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;br/&gt;
&lt;h3 id=&quot;번외---session-id는-토큰인가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8---session-id%EB%8A%94-%ED%86%A0%ED%81%B0%EC%9D%B8%EA%B0%80&quot; aria-label=&quot;번외   session id는 토큰인가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;번외 - session id는 토큰인가?&lt;/h3&gt;
&lt;p&gt;우테코 레벨2 인터뷰에서 &lt;code class=&quot;language-text&quot;&gt;session id는 토큰일까요 아닐까요?&lt;/code&gt;라는 포비의 질문에 제대로 대답하지 못했다. 내가 생각하던 &lt;code class=&quot;language-text&quot;&gt;토큰&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;HTTP 헤더 Authorization&lt;/code&gt;에 들어가는 문자열이었기 때문이다. 하지만 인증 방식과 CS의 토큰의 사례에 대해 알아보면서, &lt;code class=&quot;language-text&quot;&gt;session id == session token&lt;/code&gt;임을 알게 되었다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;참고자료&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고자료 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;참고자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@llamacorn/computer-science-sessions-7517ec8af766&quot;&gt;CS의 Sessions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies&quot;&gt;HTTP쿠키 mdn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ko.javascript.info/cookie&quot;&gt;쿠키와 document.cookie&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#-%EC%84%B8%EC%85%98%EC%9D%98-%EC%A0%95%EC%B2%B4%EB%A5%BC-%EC%B0%BE%EC%95%84%EC%84%9C&quot;&gt;🔍 세션의 정체를 찾아서&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%9D%98-%EC%A0%95%EC%9D%98&quot;&gt;세션의 정의&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#javax-servelet-httpsession&quot;&gt;javax servelet HttpSession&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%ED%86%B0%EC%BA%A3-standardsession--managerbase&quot;&gt;톰캣 StandardSession &amp;#x26; ManagerBase&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#-%EA%B7%B8%EB%A0%87%EB%8B%B4-%EC%BF%A0%ED%82%A4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80&quot;&gt;🍪 그렇담 쿠키는 무엇인가&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%BF%A0%ED%82%A4-%EC%A0%95%EC%9D%98&quot;&gt;쿠키 정의&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%BF%A0%ED%82%A4-%EC%A2%85%EB%A5%98&quot;&gt;쿠키 종류&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#httpsession%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%83%81%ED%83%9C-%EC%9C%A0%EC%A7%80-with-&quot;&gt;HttpSession을 이용한 상태 유지 (with 🍪)&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%97%90-%EC%83%81%ED%83%9C%EA%B0%92-%EC%9C%A0%EC%A7%80%ED%95%98%EA%B8%B0&quot;&gt;세션에 상태값 유지하기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%84%B8%EC%85%98%EC%9D%98-%ED%95%9C%EA%B3%84%EC%99%80-%EA%B7%B9%EB%B3%B5%EB%B2%95&quot;&gt;세션의 한계와 극복법&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#sticky-session&quot;&gt;Sticky session&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#session-clustering&quot;&gt;Session clustering&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#session-storage-db&quot;&gt;Session storage DB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#-%ED%86%A0%ED%81%B0&quot;&gt;🪙 토큰&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%ED%86%A0%ED%81%B0%EC%9D%B4%EB%9E%80&quot;&gt;토큰이란?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8---session-id%EB%8A%94-%ED%86%A0%ED%81%B0%EC%9D%B8%EA%B0%80&quot;&gt;번외 - session id는 토큰인가?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C&quot;&gt;참고자료&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Spring] @JdbcTest, @WebMvcTest, @SpringBootTest]]></title><description><![CDATA[DB…]]></description><link>https://hyewoncc.github.io/test-annotations/</link><guid isPermaLink="false">https://hyewoncc.github.io/test-annotations/</guid><pubDate>Sun, 29 May 2022 14:00:00 GMT</pubDate><content:encoded>&lt;p&gt;DB를 연동하고 스프링을 쓰기 시작하면서 어플리케이션의 구조가 복잡해졌다. 그에 따라 테스트도 다양한 어노테이션을 활용하여 작성해야 했는데, 처음에는 예제를 보며 따라했다. 그러다 각 어노테이션의 정확한 역할과 적용되는 방식이 궁금해 미션을 진행하며 사용한 세 테스트용 어노테이션을 학습했다.&lt;/p&gt;
&lt;h2 id=&quot;jdbctest&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#jdbctest&quot; aria-label=&quot;jdbctest permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@JdbcTest&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;JDBC 기반 컴포넌트만 테스트하는 JDBC 테스트를 위한 어노테이션이다. 이 어노테이션을 사용하면 auto-configuration이 비활성화 되고, JDBC 테스트와 관련된 configuration만 적용된다. 기본적으로 &lt;code class=&quot;language-text&quot;&gt;@JdbcTest&lt;/code&gt;가 붙은 테스트는 트랜젝션 처리가 되고, 각 테스트가 죵로된 후 롤백을 시행한다. 또한 명시됐거나 자동 설정된 DataSource 대신 인메모리 DB를 사용하게 된다.&lt;code class=&quot;language-text&quot;&gt;@AutoConfigureTestDatabase&lt;/code&gt;를 사용하면 이런 설정을 덮어쓸 수 있다.  &lt;!--more--&gt;
전체 어플리케이션 설정을 사용하면서 인메모리 DB를 사용하고 싶다면, 이 어노테이션 대신 &lt;code class=&quot;language-text&quot;&gt;@SpringBootTest&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;@AutoConfigureTestDatabase&lt;/code&gt;를 조합해 사용하는 게 낫다. &lt;code class=&quot;language-text&quot;&gt;JUnit 4&lt;/code&gt;를 사용한다면 &lt;code class=&quot;language-text&quot;&gt;@RunWith(SpringRunner.class)&lt;/code&gt;를 함께 사용해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;미션에서 &lt;code class=&quot;language-text&quot;&gt;JdbcTemplate&lt;/code&gt;만 주입 받으면 되는 &lt;code class=&quot;language-text&quot;&gt;Dao&lt;/code&gt; 객체들을 테스트하는 데 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@JdbcTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JdbcLineDaoTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineDao&lt;/span&gt; lineDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JdbcLineDaoTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JdbcTemplate&lt;/span&gt; jdbcTemplate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lineDao &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JdbcLineDao&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jdbcTemplate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JdbcLineDao&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineDao&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NamedParameterJdbcTemplate&lt;/span&gt; jdbcTemplate&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JdbcLineDao&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JdbcTemplate&lt;/span&gt; jdbcTemplate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jdbcTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NamedParameterJdbcTemplate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jdbcTemplate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;자바독에서 볼 수 있듯이 해당 어노테이션을 적용한 테스트는 인메모리 DB로 테스트를 시행하며, 트랜젝션과 자동 롤백을 지원하게 된다. 또한, 스프링 컨테이너에 전체 컴포넌트를 등록하지 않아 테스트 비용을 절감할 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;webmvctest&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#webmvctest&quot; aria-label=&quot;webmvctest permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@WebMvcTest&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;스프링 MVC&lt;/code&gt; 컴포넌트만 테스트하기 위한 어노테이션이다. 이 어노테이션을 사용하면 auto-configuration이 비활성화 되고, MVC 테스트와 관련된 configuration들만 적용된다. (ex. @Controller, @ControllerAdvice, @JsonComponent, Converter/GenericConverter, Filter, WebMvcConfigurer and HandlerMethodArgumentResolver 빈들, 다만 &lt;strong&gt;@Component, @Service, @Repository 빈들 제외&lt;/strong&gt;)&lt;br&gt;
기본적으로 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt;가 사용된 테스트는 스프링 시큐리티와 MockMvc를 자동 설정한다. (HtmlUnit WebClient와 Selenium WebDriver 지원 포함) MockMvc에 대한 더욱 세밀한 설정을 위해 &lt;code class=&quot;language-text&quot;&gt;@AutoConfigureMockMvc&lt;/code&gt;를 사용할 수 있다. 일반적으로 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt;를 사용할 때, &lt;code class=&quot;language-text&quot;&gt;@Controller&lt;/code&gt; 빈에 필요한 객체를 &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;@Import&lt;/code&gt;를 통해 생성한다.&lt;br&gt;
전체 어플리케이션 configuration을 로드하면서 &lt;code class=&quot;language-text&quot;&gt;MockMvc&lt;/code&gt;를 사용하고 싶다면, 이 어노테이션 보다 &lt;code class=&quot;language-text&quot;&gt;@SpringBootTest&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;@AutoConfigureMockMvc&lt;/code&gt;를 함께 사용하는 게 낫다. &lt;code class=&quot;language-text&quot;&gt;JUnit 4&lt;/code&gt;를 사용한다면 &lt;code class=&quot;language-text&quot;&gt;@RunWith(SpringRunner.class)&lt;/code&gt;를 함께 사용해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;미션에서 &lt;em&gt;컨트롤러만 단위 테스트&lt;/em&gt;할 때 사용했다. 괄호 안에 테스트 할 특정 클래스를 적어주면 해당 클래스만 생성된다. MVC에 관련 된 빈만 생성되고 컨트롤러에 주입되는 빈이 생성되지 않기 떄문에, &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;으로 필요한 빈을 생성해야 한다. 그렇지 않으면 &lt;code class=&quot;language-text&quot;&gt;Failed to load ApplicationContext&lt;/code&gt; 메시지와 함께 실행에 실패한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@WebMvcTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LineController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineControllerUnitTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MockMvc&lt;/span&gt; mockMvc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@MockBean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineService&lt;/span&gt; lineService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;번외&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8&quot; aria-label=&quot;번외 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;번외?&lt;/h3&gt;
&lt;p&gt;테스트 할 컨트롤러를 특정하지 않으면 모든 &lt;code class=&quot;language-text&quot;&gt;@Controller&lt;/code&gt; 빈이 등록된다. 처음에는 테스트 대상 클래스를 표기해야만 실행되는 줄 알았다. 그런데 공식 문서로 공부하고 보니 특정하지 않아 실패한 것이 아니라, 모든 컨트롤러에 필요한 모든 서비스(테스트 내에서 사용하지 않더라도)를 생성하지 않아서 실행되지 않은 것이었다. 따라서 그럴 일은 없겠지만, 컨트롤러를 특정하지 않으면 다음과 같이 &lt;code class=&quot;language-text&quot;&gt;@MockBean&lt;/code&gt;으로 몽땅 등록하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@WebMvcTest&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineControllerUnitTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MockMvc&lt;/span&gt; mockMvc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@MockBean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineService&lt;/span&gt; lineService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@MockBean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PathService&lt;/span&gt; pathService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@MockBean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StationService&lt;/span&gt; stationService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 외의 모든 컨트롤러에서 사용되는 모든 주입받을 객체  &lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;springboottest&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#springboottest&quot; aria-label=&quot;springboottest permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@SpringBootTest&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;스프링부트 기반 테스트를 위한 어노테이션이다. &lt;code class=&quot;language-text&quot;&gt;Spring TestContext Framework&lt;/code&gt;에 더해 다음과 같은 기능을 제공한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@ContextConfiguration(loader=...)&lt;/code&gt;가 정의되어 있지 않다면, 기본 &lt;code class=&quot;language-text&quot;&gt;ContextLoader&lt;/code&gt;로 &lt;code class=&quot;language-text&quot;&gt;SpringBootContextLoader&lt;/code&gt;를 사용&lt;/li&gt;
&lt;li&gt;내부에 &lt;code class=&quot;language-text&quot;&gt;@Configuration&lt;/code&gt;이 없고 &lt;code class=&quot;language-text&quot;&gt;classes&lt;/code&gt;가 정의되어 있지 않다면, 자동으로 &lt;code class=&quot;language-text&quot;&gt;@SpringBootConfiguration&lt;/code&gt;을 탐색&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;properties attribute&lt;/code&gt;를 이용한 &lt;code class=&quot;language-text&quot;&gt;Environment&lt;/code&gt; 설정&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;args attribute&lt;/code&gt;를 통한 어플리케이션 arguments를 정의&lt;/li&gt;
&lt;li&gt;웹 서버를 &lt;code class=&quot;language-text&quot;&gt;defined&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;random&lt;/code&gt; 포트에서 구동 시킬지를 포함해, 여러 &lt;code class=&quot;language-text&quot;&gt;webEnviroment&lt;/code&gt; 모드를 설정&lt;/li&gt;
&lt;li&gt;웹 서버를 구동하는 웹 테스트에서 &lt;code class=&quot;language-text&quot;&gt;TestRestTemplate, WebTestClient&lt;/code&gt; 빈을 등록&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;모든 객체를 실제 빈으로 등록하고 사용하는 컨트롤러 통합 테스트와 인수 테스트에서 해당 어노테이션을 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 컨트롤러 통합 테스트  &lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@AutoConfigureMockMvc&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Sql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/testSchema.sql&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LineControllerIntegrationTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MockMvc&lt;/span&gt; mockMvc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 인수 테스트&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webEnvironment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpringBootTest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;WebEnvironment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RANDOM_PORT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@DirtiesContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;classMode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DirtiesContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClassMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BEFORE_EACH_TEST_METHOD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Sql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/testSchema.sql&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AcceptanceTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@LocalServerPort&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; port&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;RestAssured&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; port&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모든 빈을 생성하기 때문에 비용과 실행 시간이 제일 많이 든다. 특히 &lt;code class=&quot;language-text&quot;&gt;@DirtiesContext&lt;/code&gt;로 매 테스트 마다 새로운 컨테이너를 생성하면 정말 끝내주는 실행 속도를 보여준다.&lt;/p&gt;
&lt;br/&gt;
&lt;p&gt;어플리케이션 규모가 커지고 테스트 수가 늘어나면서 각 경우에 적절한 테스트를 설정하는 것이 중요해졌다. 사실 성격이 느긋해서 테스트에 시간이 많이 걸려도 신경쓰지 않는 편이었는데… 인수테스트를 필요에 따라 &lt;code class=&quot;language-text&quot;&gt;@DirtiesContext&lt;/code&gt;와 함께 쓰면서 테스트에 소모되는 비용과 시간 절약을 자연스레 고려하게 되었다. 이 외에도 다양한 테스트용 어노테이션과 추가 설정 가능한 사항들이 있는데, 아는 것만 쓰지 말고 더 넓게 학습해 더 나은 효율의 테스트를 작성하고 싶다.&lt;/p&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#jdbctest&quot;&gt;@JdbcTest&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#webmvctest&quot;&gt;@WebMvcTest&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8&quot;&gt;번외?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#springboottest&quot;&gt;@SpringBootTest&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[SQL] SELECT * 쓰지 말자]]></title><description><![CDATA[지금까지 DB를 사용하는 미션에서 컬럼 수가 적기에  문을 자주 썼다. 그런데 로 모든 컬럼을 가져오는 것 보다 컬럼을 명시해 가져오는 게 낫다는 영문 포스팅을 제이슨이 공유해주셔서 읽었다. 7 Reasons Why Using SELECT * FROM…]]></description><link>https://hyewoncc.github.io/sql-no-wildcard/</link><guid isPermaLink="false">https://hyewoncc.github.io/sql-no-wildcard/</guid><pubDate>Wed, 25 May 2022 08:30:00 GMT</pubDate><content:encoded>&lt;p&gt;지금까지 DB를 사용하는 미션에서 컬럼 수가 적기에 &lt;code class=&quot;language-text&quot;&gt;select * from table&lt;/code&gt; 문을 자주 썼다. 그런데 &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt;로 모든 컬럼을 가져오는 것 보다 컬럼을 명시해 가져오는 게 낫다는 영문 포스팅을 제이슨이 공유해주셔서 읽었다.&lt;br&gt;
&lt;a href=&quot;https://dzone.com/articles/why-you-should-not-use-select-in-sql-query-1&quot;&gt;7 Reasons Why Using SELECT * FROM TABLE in SQL Query Is a Bad Idea&lt;/a&gt; 다음은 해당 포스팅을 전체 번역한 것이다.&lt;/p&gt;
&lt;h2 id=&quot;select--from-table-쿼리문을-쓰는-게-좋지-않은-7가지-이유&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#select--from-table-%EC%BF%BC%EB%A6%AC%EB%AC%B8%EC%9D%84-%EC%93%B0%EB%8A%94-%EA%B2%8C-%EC%A2%8B%EC%A7%80-%EC%95%8A%EC%9D%80-7%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%9C%A0&quot; aria-label=&quot;select  from table 쿼리문을 쓰는 게 좋지 않은 7가지 이유 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SELECT * FROM TABLE 쿼리문을 쓰는 게 좋지 않은 7가지 이유&lt;/h2&gt;
&lt;p&gt;인터넷에서 &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt; 쿼리문을 쓰는 게 나쁘니 피하라고 하는 많은 글을 봐왔다. 그 대신 정확한 컬럼을 나열해야 한다. 이는 내가 주니어 개발자에게 가르치기도 하는 좋은 제안이자 좋은 SQL 작성 습관 중 하나인데, 많은 사람들이 그 이유는 설명하지 않는다.&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;왜 쿼리문에서 &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;을 쓰면 안되는지 이유를 설명하지 않고 SQL 개발자들을 설득하기란 어려운데, 대개 Oracle database에서 &lt;code class=&quot;language-text&quot;&gt;SELECT * from EMP&lt;/code&gt;를 실행하는 것으로 SQL 학습을 시작하기 때문이다.&lt;/p&gt;
&lt;p&gt;이 글에서 왜 &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt; 쿼리문을 쓰면 안되는지 실질적인 이유를 제시해 인식의 차이를 메우고자 한다. 아래는 &lt;code class=&quot;language-text&quot;&gt;SELECT * from a table&lt;/code&gt;을 쓰지 말아야 할 설득력 있는 몇 가지 이유이다.&lt;/p&gt;
&lt;h3 id=&quot;1-불필요한-io-인풋-아웃풋&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1-%EB%B6%88%ED%95%84%EC%9A%94%ED%95%9C-io-%EC%9D%B8%ED%92%8B-%EC%95%84%EC%9B%83%ED%92%8B&quot; aria-label=&quot;1 불필요한 io 인풋 아웃풋 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. 불필요한 I/O (인풋, 아웃풋)&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;를 사용하면 사용되지 않을 불필요한 데이터를 반환할 수 있다. 하지만 그 데이터를 불러오는 데는 비용이 들고, 페이지나 인덱스에서 데이터를 읽어오는 동안 IO 사이클이 낭비된다. 이는 쿼리 속도를 낮출 수도 있다. 먄악 쿼리가 실제로 어떻게 실행되는지, &lt;a href=&quot;https://dzone.com/refcardz/event-stream-processing-essentials&quot;&gt;쿼리 엔진이 쿼리문을 어떤 순서로 어떻게 처리&lt;/a&gt;하는지… 등을 모른다면 &lt;a href=&quot;https://www.amazon.com/Performance-Explained-Everything-Developers-about/dp/3950307826/?tag=javamysqlanta-20&quot;&gt;SQL Performance Explained(번역서 없음)&lt;/a&gt; 같은 책이나 유데미의 &lt;a href=&quot;https://www.udemy.com/course/the-complete-sql-bootcamp/?LSNPUBID=JVFxdTr9V80&amp;#x26;ranEAID=JVFxdTr9V80&amp;#x26;ranMID=39197&amp;#x26;ranSiteID=JVFxdTr9V80-cg.Nnfk_77u8fZ5YccVnaw&amp;#x26;utm_medium=udemyads&amp;#x26;utm_source=aff-campaign&quot;&gt;The Complete SQL BootCamp(한국어 지원 없음)&lt;/a&gt; 강의를 들어보길 바란다.&lt;/p&gt;
&lt;h3 id=&quot;2-네트워크-트래픽-증가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#2-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%8A%B8%EB%9E%98%ED%94%BD-%EC%A6%9D%EA%B0%80&quot; aria-label=&quot;2 네트워크 트래픽 증가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. 네트워크 트래픽 증가&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;는 명백하게 클라이언트에서 필요한 것 보다 많은 데이터를 반환하므로 네트워크 대역폭을 더 많이 사용한다. 이는 클라이언트 어플리케이션에 전송되는 데 더 큰 시간이 든다는 말도 된다. 여기서 말한 클라이언트에는 당신이 쿼리를 실행하는 &lt;code class=&quot;language-text&quot;&gt;SQL Server Maganement, Toad, SQL Developer for Oracle&lt;/code&gt;같은 쿼리 에디터와 &lt;code class=&quot;language-text&quot;&gt;Java 어플리케이션&lt;/code&gt;등이 포함된다.&lt;/p&gt;
&lt;h3 id=&quot;3-어플리케이션-메모리-낭비&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#3-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%82%AD%EB%B9%84&quot; aria-label=&quot;3 어플리케이션 메모리 낭비 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3. 어플리케이션 메모리 낭비&lt;/h3&gt;
&lt;p&gt;사용하지 않을 데이터를 저장하고 있느라 어플리케이션의 메모리가 낭비된다.&lt;/p&gt;
&lt;h3 id=&quot;4-resultset의-컬럼-순서에-의존하는-결과&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#4-resultset%EC%9D%98-%EC%BB%AC%EB%9F%BC-%EC%88%9C%EC%84%9C%EC%97%90-%EC%9D%98%EC%A1%B4%ED%95%98%EB%8A%94-%EA%B2%B0%EA%B3%BC&quot; aria-label=&quot;4 resultset의 컬럼 순서에 의존하는 결과 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. ResultSet의 컬럼 순서에 의존하는 결과&lt;/h3&gt;
&lt;p&gt;그래서는 안되지만 어플리케이션이 &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;쿼리를 사용하며 컬럼 순서에 의존하고 있다면, 컬럼 추가나 순서 변경이 result set에 영향을 미친다.&lt;/p&gt;
&lt;h3 id=&quot;5-테이블에-새로운-컬럼을-추가하면-뷰에-오류-발생&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#5-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%BB%AC%EB%9F%BC%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%98%EB%A9%B4-%EB%B7%B0%EC%97%90-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D&quot; aria-label=&quot;5 테이블에 새로운 컬럼을 추가하면 뷰에 오류 발생 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;5. 테이블에 새로운 컬럼을 추가하면 뷰에 오류 발생&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;를 뷰(&lt;a href=&quot;https://www.java67.com/2012/11/what-is-difference-between-view-vs-materialized-view-database-sql.html&quot;&gt;select 문을 실행한 가상 테이블&lt;/a&gt;)에 사용하면 새로운 컬럼을 추가하거나 기존 컬럼을 삭제했을 때 알아채기 힘든 오류를 발생시킨다. 뷰가 깨지는 대신에 틀린 결과를 반환하기 때문이다. 이를 피하려면 스키마바인딩을 사용해라. &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;을 사용하는 것도 막아준다.&lt;/p&gt;
&lt;h3 id=&quot;6-join-쿼리-충돌&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#6-join-%EC%BF%BC%EB%A6%AC-%EC%B6%A9%EB%8F%8C&quot; aria-label=&quot;6 join 쿼리 충돌 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;6. JOIN 쿼리 충돌&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;JOIN&lt;/code&gt; 쿼리에서 사용하면 같은 컬럼 이름을 가진 여러 테이블이 충돌을 일으킬 수 있다. &lt;code class=&quot;language-text&quot;&gt;straight query(서브쿼리가 없는 쿼리)&lt;/code&gt;를 사용하면 충돌은 없겠지만, &lt;code class=&quot;language-text&quot;&gt;Common Table Expression&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;파생 테이블&lt;/code&gt;에서 한 컬럼을 기준으로 정렬하려고 할때 추가적인 조치가 필요해진다.&lt;/p&gt;
&lt;h3 id=&quot;7-테이블-간에-데이터를-복사할-때-문제-발생&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#7-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B0%84%EC%97%90-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%A0-%EB%95%8C-%EB%AC%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D&quot; aria-label=&quot;7 테이블 간에 데이터를 복사할 때 문제 발생 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;7. 테이블 간에 데이터를 복사할 때 문제 발생&lt;/h3&gt;
&lt;p&gt;한 테이블에서 다른 테이블로 데이터를 복사할 때 &lt;code class=&quot;language-text&quot;&gt;SELECT * into INSERT .. SELECT&lt;/code&gt;문을 흔히 사용하는데, 두 테이블 간에 컬럼 순서가 다르면 잠재적으로 틀린 데이터를 복사할 수 있다. 몇 개발자들은 &lt;code class=&quot;language-text&quot;&gt;EXISTS clause&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;SELECT * vs. SELECT 1&lt;/code&gt;사용하는 게 &lt;em&gt;정적 값을 검사하는 추가 작업을 하지 않아(DB를 잘 몰라 의역합니다)&lt;/em&gt; 더 빠르다 생각하는데, 예전에는 맞는 얘기였으나, 요새는 &lt;code class=&quot;language-text&quot;&gt;EXISTS&lt;/code&gt;문에 대한 처리가 잘 되어 있어 &lt;code class=&quot;language-text&quot;&gt;select&lt;/code&gt;문과 완전히 무관하다.&lt;/p&gt;
&lt;h2 id=&quot;결론&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EB%A1%A0&quot; aria-label=&quot;결론 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;결론&lt;/h2&gt;
&lt;p&gt;위와 같은 이유로 &lt;code class=&quot;language-text&quot;&gt;SELECT *&lt;/code&gt;문의 사용을 지양해야 한다. &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; 와일드카드를 사용하는 것 보다 정확한 컬럼명을 쓰는 것이 언제나 낫다. 쿼리문 수행이 개선될 뿐 아니라 코드도 명확해진다. 거기다 특히 뷰가 있는 상황에서 테이블에 새로운 컬럼을 추가했을 때도 문제가 없기에, 코드의 유지보수 측면에서도 도움이 된다.&lt;/p&gt;
&lt;br/&gt;
&lt;p&gt;컬럼이 2개인 테이블이 있을 만큼 대부분 컬럼 수가 많지 않아, 별 생각 없이 &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt;을 많이 사용했는데 지양해야 할 분명한 이유를 알았다.&lt;/p&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#select--from-table-%EC%BF%BC%EB%A6%AC%EB%AC%B8%EC%9D%84-%EC%93%B0%EB%8A%94-%EA%B2%8C-%EC%A2%8B%EC%A7%80-%EC%95%8A%EC%9D%80-7%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%9C%A0&quot;&gt;SELECT * FROM TABLE 쿼리문을 쓰는 게 좋지 않은 7가지 이유&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-%EB%B6%88%ED%95%84%EC%9A%94%ED%95%9C-io-%EC%9D%B8%ED%92%8B-%EC%95%84%EC%9B%83%ED%92%8B&quot;&gt;1. 불필요한 I/O (인풋, 아웃풋)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%8A%B8%EB%9E%98%ED%94%BD-%EC%A6%9D%EA%B0%80&quot;&gt;2. 네트워크 트래픽 증가&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%82%AD%EB%B9%84&quot;&gt;3. 어플리케이션 메모리 낭비&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4-resultset%EC%9D%98-%EC%BB%AC%EB%9F%BC-%EC%88%9C%EC%84%9C%EC%97%90-%EC%9D%98%EC%A1%B4%ED%95%98%EB%8A%94-%EA%B2%B0%EA%B3%BC&quot;&gt;4. ResultSet의 컬럼 순서에 의존하는 결과&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%BB%AC%EB%9F%BC%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%98%EB%A9%B4-%EB%B7%B0%EC%97%90-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D&quot;&gt;5. 테이블에 새로운 컬럼을 추가하면 뷰에 오류 발생&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#6-join-%EC%BF%BC%EB%A6%AC-%EC%B6%A9%EB%8F%8C&quot;&gt;6. JOIN 쿼리 충돌&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#7-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B0%84%EC%97%90-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%A0-%EB%95%8C-%EB%AC%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D&quot;&gt;7. 테이블 간에 데이터를 복사할 때 문제 발생&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EA%B2%B0%EB%A1%A0&quot;&gt;결론&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Optional과 메서드 네이밍 find vs get]]></title><description><![CDATA[우테코 레벨1 웹체스 미션에서 일급 컬렉션에서 특정 요소를 로 꺼내는 메서드를 작성했다. 그런데 해당 요소를 그냥 꺼내는 메서드가 따로 있었고, 이름이 겹치고 싶지 않아 생각하다 를 붙였다. 레벨2에서 DB…]]></description><link>https://hyewoncc.github.io/optional-and-method-naming/</link><guid isPermaLink="false">https://hyewoncc.github.io/optional-and-method-naming/</guid><pubDate>Mon, 23 May 2022 13:15:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 레벨1 웹체스 미션에서 일급 컬렉션에서 특정 요소를 &lt;code class=&quot;language-text&quot;&gt;Optional&amp;lt;T&gt;&lt;/code&gt;로 꺼내는 메서드를 작성했다. 그런데 해당 요소를 그냥 꺼내는 메서드가 따로 있었고, 이름이 겹치고 싶지 않아 생각하다 &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt;를 붙였다. 레벨2에서 DB를 본격적으로 사용하며 &lt;code class=&quot;language-text&quot;&gt;Dao&lt;/code&gt;객체에서 데이터 조회를 할 때, &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt; 중 무엇을 쓸지 고민했다. &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;getter&lt;/code&gt;처럼 느껴져서 &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt;를 사용했는데, &lt;code class=&quot;language-text&quot;&gt;DDD&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt; 패턴을 보니 &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt;을 쓰는 경우가 많았다. 그래서 둘의 차이를 찾아봤다.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2 id=&quot;find-vs-get&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#find-vs-get&quot; aria-label=&quot;find vs get permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;find vs get&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html&quot;&gt;스프링 Data의 &lt;code class=&quot;language-text&quot;&gt;CRUD repository&lt;/code&gt;&lt;/a&gt; 인터페이스는 &lt;code class=&quot;language-text&quot;&gt;Optional&amp;lt;T&gt;&lt;/code&gt;를 반환한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ID&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;반면 같은 스프링 Data의 &lt;a href=&quot;https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html&quot;&gt;JPA repository&lt;/a&gt;에서는 T를 반환한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JpaRepository&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;ID&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getOne&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ID&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;CrudRepository&lt;/code&gt;는 찾는 값이 없을 경우 &lt;code class=&quot;language-text&quot;&gt;빈 Optional&lt;/code&gt;을, &lt;code class=&quot;language-text&quot;&gt;JpaRepository&lt;/code&gt;는 찾는 값이 없을 경우 &lt;code class=&quot;language-text&quot;&gt;예외를 발생&lt;/code&gt;한다는 차이가 있다. 여기서 볼 수 있듯이 일반적으로 반환 값이 없을 수 있는 경우 &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt;을, 항상 있어야 하는 경우 &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt;을 붙인다. &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt;를 쓰면 api 사용자에게 이름을 통해 반환값이 없을 수 있음을 알려 줄 수 있는 것이다.&lt;br&gt;
반면, 반환형이 &lt;code class=&quot;language-text&quot;&gt;List&lt;/code&gt;같은 컬렉션이라면 값이 없어도 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이 아닌 &lt;code class=&quot;language-text&quot;&gt;빈 컬렉션&lt;/code&gt;을 반환하면 된다.&lt;/p&gt;
&lt;h2 id=&quot;optional&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#optional&quot; aria-label=&quot;optional permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Optional&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 69.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADrUlEQVQ4yx2Q2VNadwCF72s7ZppUzSRTU5cYTSJGEFBEDSBBZEsUAlwu62VxIWwCIbgHlUSsNjVp+9A+2CaZ6Uwf+if+vo4+fXPmzPkejvTX+aH49/cO//xyLI43czgsM+gmtYyMPsA0Y2KjWCaupnG6nDiXHJhMBiwWMz6fC4N+As3YKFbbU1xuJ8WNHNKV8L8/PvDn+13hsc8yMjqCwTiJTvcEr9dNJrdKLJmiUN4kmVKxWObQasdYsD8l8HIZx+ICEUXhZSjMi+UVpK8XbfH1ok0y4BYazUMmtOOMaUbRXnHsIQ6HnXQ2y9qrAl6fD43mESaTHn9gmWg8RjgcYGXlOUFZwbpgR7o8b4lCIsDwYJ9QI8tsNyrMmI3c67vD8P1+jFM6ovE4aiZHWIkiR6P4XnjxeF1UKiV++/Uj66tpvD4P4YiCtFNUxfij+wwNDYigy8LF2TsODw+wLVjQTU4wN2fC53Ojquq1eDVfIJcvkMmmOTvr8Pnz3yQiAV4sP8fr8yLZZ3Wit7ebH/v7hHdhmnZrl9OfOrxpNpDlEMlMhkQ2i8/vR11bQ45ECMshNtazfPz0icvLS4LLbhaXnDicDqS+uz3i5ndddPd8L55Oa9mulzj7+YxEQqG8WWZrb5ed4/dsHb1jp9Vis1oiqgTJ53N8/vKFztFbbPMmxifGeSnLSLdu3hBdXd9y+3aPGBzoIx5w0Ww22N7bp/bmDSE5iBJTSK9mSKRihOUg8bjM6nqW09MTOof7WC1zDAz2o9U+QbrdfVPc6PqGnp5bYni4n3nDQ+JKgGgsQjwZJyIHsC/MX39ZrZUJBVdQ1QTF4jqKEkQO+fH4POgNeobuDyIN3bsrfrjTS29vjxgdGcKofczslBarWc/jxw94Nm/E47RTrFTptA94ohlBifjZbdaoVCvUmztkNkqshMJYbVakkmIV5aidctQhXqe97L8KUk152Vnzc5XrKTcHBZmTrTValQibKRfHtQSnzSwHRZnzvQIfDqu8rSap5/xIjaRBNNUp9nJmsZczs5udoV20c1JZ5Lzu4rS6xGHexv7qHK28jU7Nec2d7ByvE9NUZB3V6CQlWct6YBypFNGLasxIIzUjttJmtjNm3m5YOa256NSWeF9x0i47Oam6Oal56NTctMuLtF7Z2V+30lDN1BMmNmNTlCJ6pHxIKyqKnmrMKOqJKZqqie3sLMfFZ7wrO2iXHRwVnl0LjoqOa1m75LjuDzZsNJKmqy0VxUA1Ps3/NawztqMl+MYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;cat&quot;
        title=&quot;cat&quot;
        src=&quot;/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/37523/img.png&quot;
        srcset=&quot;/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/e9ff0/img.png 180w,
/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/f21e7/img.png 360w,
/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/37523/img.png 720w,
/static/95113747cc9ce0c0ec8e59b6f7e2a0c7/5a190/img.png 800w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div style=&quot;text-align:center; font-style:italic; color:grey;&quot;&gt;대표적 Optional인 슈뢰딩거의 고양이&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;에 대해 한 번 정리하려 했었는데, &lt;code class=&quot;language-text&quot;&gt;find~&lt;/code&gt; 메서드에서 &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;을 쓰는 김에 이펙티브 자바를 참고해 작성했다.&lt;/p&gt;
&lt;h3 id=&quot;optional이란&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#optional%EC%9D%B4%EB%9E%80&quot; aria-label=&quot;optional이란 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Optional이란&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Optional&amp;lt;T&gt;&lt;/code&gt;은 null이 아닌 T 참조를 하나 담거나 아무것도 담지 않을 수 있는 클래스이다. 보통은 &lt;code class=&quot;language-text&quot;&gt;T&lt;/code&gt;를 반환해야 하지만 특정 조건에서는 아무것도 반환하지 않아야 할 때 &lt;code class=&quot;language-text&quot;&gt;T&lt;/code&gt;대신 &lt;code class=&quot;language-text&quot;&gt;Optional&amp;lt;T&gt;&lt;/code&gt;를 반환하도록 선언하면 된다. &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;은 정적 팩토리 메서드로 생성할 수 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Optional.empty()&lt;/code&gt; : 빈 옵셔널 생성&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Optional.of(T)&lt;/code&gt; : T가 든 옵셔널 생성&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Optional.ofNullable(T)&lt;/code&gt; : T가 든 옵셔널 생성, &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;값이 들어갈 수도 있을 때 사용&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그냥 &lt;code class=&quot;language-text&quot;&gt;of(T)&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;ofNullable(T)&lt;/code&gt;를 구분해 사용하는 것이 중요하다. &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;을 쓰는데는 &lt;code class=&quot;language-text&quot;&gt;NullPointerException&lt;/code&gt; 체크의 번거로움을 생략하는 목적이 있는데, &lt;code class=&quot;language-text&quot;&gt;of(T)&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;을 넣으면 &lt;code class=&quot;language-text&quot;&gt;NullPointerException&lt;/code&gt;이 발생해 하나마나가 되기 때문이다.&lt;/p&gt;
&lt;h3 id=&quot;효과적으로-사용하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&quot; aria-label=&quot;효과적으로 사용하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;효과적으로 사용하기&lt;/h3&gt;
&lt;p&gt;처음 &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;을 알게 되었을 때는 &lt;code class=&quot;language-text&quot;&gt;isPresent()&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;isEmpty()&lt;/code&gt;로 분기문을 만들어 처리했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;optionalPiece&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;해당 말은 존재하지 않습니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;이 제공하는 메서드를 이용해서 효율적으로 처리할 수 있는 방법이 있었다. 위 예시처럼 분기문으로 처리하면 사실 try~catch로 예외처리 하는 것과 다를 바가 없다고 생각한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;orElse&lt;/code&gt;로 기본값 정하기&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; optionalName&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;익명&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;orElseGet&lt;/code&gt;으로 기본값 정하기&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; optionalName&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseGet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generateRandomName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;orElse&lt;/code&gt;에 메서드를 넣으면 &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;안에 실제로 값이 있건 없건 일단 실행되는 것에 유의해서 사용하자. &lt;code class=&quot;language-text&quot;&gt;orElseGet&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;Optional&lt;/code&gt;에 값이 없어야만 실행된다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;orElseThrow&lt;/code&gt;로 예외 던지기&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; optionalName&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;주의사항&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD&quot; aria-label=&quot;주의사항 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;주의사항&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;컬렉션, 스트림, 배열, 옵셔널 같은 컨테이너 타입을 옵셔널로 감싸기 금지&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그냥 빈 컬렉션이나 배열을 사용하는 것이 낫다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;박싱된 기본 타입을 옵셔널로 다시 감싸기 금지&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;값을 두 겹이나 감싸기 보다 &lt;code class=&quot;language-text&quot;&gt;OptionalInt, OptionalLong, OptionalDouble&lt;/code&gt;을 사용하자.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;컬렉션의 키, 값, 원소나 배열의 원소로 사용 금지&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;복잡성만 높여서 혼란과 오류 가능성만 키운다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;메서드 파라미터나 인스턴스 필드로 사용 금지&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;메서드 내에서 옵셔널 분기 처리를 하는 건 생산성이 저하되며, 필드로 쓰기엔 선택형 반환값으로 설계되었기에 직렬화가 구현되지 않았다.&lt;/p&gt;
&lt;h2 id=&quot;참고자료&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고자료 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;참고자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;이펙티브 자바 3판 : 아이템 55. 옵셔널 반환은 신중히 하라&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/31922866/why-should-java-8s-optional-not-be-used-in-arguments&quot;&gt;stackoverflow : Why shoud java 8’s Optional not be used in arguments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#find-vs-get&quot;&gt;find vs get&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#optional&quot;&gt;Optional&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#optional%EC%9D%B4%EB%9E%80&quot;&gt;Optional이란&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&quot;&gt;효과적으로 사용하기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD&quot;&gt;주의사항&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C&quot;&gt;참고자료&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[7SQL 스터디 회고]]></title><description><![CDATA[우테코 레벨1 sql 수업에서 두 sql 문제를 풀어야 했다. 첫번째 문제를 시행착오 끝에 풀고, 두번째 문제는 풀지 못했는데, 척척 푸는 크루들이 많은 걸 보고 sql 공부의 필요성을 절실하게 느꼈다. 그래서 일주일 간 매일 문제를…]]></description><link>https://hyewoncc.github.io/7sql-study/</link><guid isPermaLink="false">https://hyewoncc.github.io/7sql-study/</guid><pubDate>Wed, 11 May 2022 14:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 레벨1 sql 수업에서 두 sql 문제를 풀어야 했다. 첫번째 문제를 시행착오 끝에 풀고, 두번째 문제는 풀지 못했는데, 척척 푸는 크루들이 많은 걸 보고 sql 공부의 필요성을 절실하게 느꼈다. 그래서 일주일 간 매일 문제를 3개씩 푸는 스터디를 개설했다.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2 id=&quot;7sql&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#7sql&quot; aria-label=&quot;7sql permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;7SQL&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;기간 : 1주일&lt;/li&gt;
&lt;li&gt;성격 : 각자 문제풀기&lt;/li&gt;
&lt;li&gt;인원 : 7명&lt;/li&gt;
&lt;li&gt;목표 : 기초적인 SQL 문법 익히기&lt;/li&gt;
&lt;li&gt;진행 방식 : 매일 한 사람씩 돌아가며 SQL 문제를 출제, 각자 풀고 출제자가 채점&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://magical-tick-0a1.notion.site/7SQL-bb6a8e0abbb640689927df169e9f44e7&quot;&gt;7SQL 노션 모집글&lt;/a&gt;에 자세한 진행 방식이 적혀있으며. &lt;a href=&quot;https://docs.google.com/spreadsheets/d/14MnjqCNlGi_l0y0YZA41P9VerDzmkr9nVZX8papIHxY/edit?usp=sharing&quot;&gt;7SQL 스프레드 시트&lt;/a&gt;에서 진행 기록인 출제한 문제와 각자의 답안, 정답 여부를 볼 수 있다. 스터디가 끝나고 간단한 회고를 가졌다.&lt;/p&gt;
&lt;h3 id=&quot;좋았던-점&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A2%8B%EC%95%98%EB%8D%98-%EC%A0%90&quot; aria-label=&quot;좋았던 점 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;좋았던 점&lt;/h3&gt;
&lt;p&gt;공통적으로 언급된 좋았던 점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SQL 문법에 익숙해진다는 목표를 달성했다&lt;/li&gt;
&lt;li&gt;실력이 늘었다&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;개별적으로 업급된 좋았던 점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;자율 참여였다&lt;/li&gt;
&lt;li&gt;시간을 많이 들이지 않고도 학습할 수 있는 방식이었다&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;아쉬웠던-점&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90&quot; aria-label=&quot;아쉬웠던 점 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;아쉬웠던 점&lt;/h3&gt;
&lt;p&gt;공통적으로 언급된 아쉬웠던 점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;같은 테이블과 데이터를 사용
&lt;ul&gt;
&lt;li&gt;갈 수록 익숙해져 문제가 쉽게 느껴졌다&lt;/li&gt;
&lt;li&gt;중복되지 않는 문제를 내기 어려웠다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;join문 부터 때려넣으면 해결되는 문제가 많았다&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;제안된-개선안&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A0%9C%EC%95%88%EB%90%9C-%EA%B0%9C%EC%84%A0%EC%95%88&quot; aria-label=&quot;제안된 개선안 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;제안된 개선안&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;테이블과 데이터를 매일 바꾸거나, 여러 사이트를 이용한다&lt;/li&gt;
&lt;li&gt;프로그래머스, leetcode 등에 이미 수록된 SQL 문제를 함께 푼다&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;개인-회고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%9C%EC%9D%B8-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;개인 회고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;개인 회고&lt;/h3&gt;
&lt;p&gt;제한 조건을 꼼꼼히 읽지 않아 틀린 문제가 많았다. 문제를 제대로 읽자고 반성했다. 나만 틀린 게 있어서 부끄러웠다…&lt;br&gt;
진행에 부담이 없었고 확실히 3문제라도 매일 풀다 보니 실력이 오르는 게 느껴져서 2회차를 해볼까 고민중이다. 청년다방에서 간단한 점심 회식을 했는데 즐거웠다. 슬랙에 공개적으로 모집해 오프라인에서 인사한 적 없던 크루인 &lt;code class=&quot;language-text&quot;&gt;티키, 레오&lt;/code&gt;를 스터디를 계기로 알게 되어서 좋았다.&lt;/p&gt;
&lt;br/&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#7sql&quot;&gt;7SQL&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%A2%8B%EC%95%98%EB%8D%98-%EC%A0%90&quot;&gt;좋았던 점&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90&quot;&gt;아쉬웠던 점&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%A0%9C%EC%95%88%EB%90%9C-%EA%B0%9C%EC%84%A0%EC%95%88&quot;&gt;제안된 개선안&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EA%B0%9C%EC%9D%B8-%ED%9A%8C%EA%B3%A0&quot;&gt;개인 회고&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[DAO 와 Repository]]></title><description><![CDATA[웹 체스 미션을 진행하면서 을 이용해 DB에 접근하는 모든 클래스의 이름을 라 지었다가 아래와 같은 코멘트를 받았다.   코멘트를 받기 전까지 와 가 이름만 다른 같은 개념이라 생각했다. 그래서 이 둘의 차이에 대해 알아보았다. @Repository…]]></description><link>https://hyewoncc.github.io/dao-and-repository/</link><guid isPermaLink="false">https://hyewoncc.github.io/dao-and-repository/</guid><pubDate>Fri, 06 May 2022 15:25:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://github.com/woowacourse/jwp-chess/pull/474&quot;&gt;웹 체스 미션&lt;/a&gt;을 진행하면서 &lt;code class=&quot;language-text&quot;&gt;JdbcTemplate&lt;/code&gt;을 이용해 DB에 접근하는 모든 클래스의 이름을 &lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt;라 지었다가 아래와 같은 코멘트를 받았다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7ElEQVQY022PjW7CMAyE+/6vuEFD2xRo+k/bDEj8Tc4EaBuOLic79sWX1daQFzvmbWFeF+4SECBI+IP4hiN6ruHG+uWJEsn8unI+nTGmoKrsk4dhpO8HnGsZx4mu65mmiXEYadsu5Qp9bxqXekQgA5gvF3JjKCvLoSiorE1D2tj1feJ13bQVEfmHVEeIImStazifjknUe8/1euNdvIblmWtsm+eyLGlOa1m433GN4+Nzx36fk+eGfW7SlsqaW1vTuJa5txD8L8EQIyEEYow/glrUH9Suiti6piwrCkVRcjye0uZPa/K4XqKPUMvfiMzOcLdCmS8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;review&quot;
        title=&quot;review&quot;
        src=&quot;/static/7d45a01e5fa31ab021e3a57b70d173ea/37523/review1.png&quot;
        srcset=&quot;/static/7d45a01e5fa31ab021e3a57b70d173ea/e9ff0/review1.png 180w,
/static/7d45a01e5fa31ab021e3a57b70d173ea/f21e7/review1.png 360w,
/static/7d45a01e5fa31ab021e3a57b70d173ea/37523/review1.png 720w,
/static/7d45a01e5fa31ab021e3a57b70d173ea/302a4/review1.png 1080w,
/static/7d45a01e5fa31ab021e3a57b70d173ea/07a9c/review1.png 1440w,
/static/7d45a01e5fa31ab021e3a57b70d173ea/cb425/review1.png 1678w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;br&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAxklEQVQY051P0Y7DIAzr///j6aSWrV3bQIBA2XXgiexuj3u4SFEcBxl7mL6/kI+CEAX3+w/+W0cpqLViuF4MzOWKZbmByIK9h/cB1lowM5xjhBB0eu8RY4RjBrPXvb/fieCcewmmnDHPC3LO2iFEiCSklBR3gZSyisYoevvje3e+lILHo74EOzkvN0zGYJwMxnHCvhPyccCHABH5dejUecdvdz0BM87z1Ni1NgxRBOu2qci6btgU77qTtRqHiPT3T9VaQ20NT5O4geNOHkqLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;review&quot;
        title=&quot;review&quot;
        src=&quot;/static/f688b607d477ee408b350da803beb668/37523/review2.png&quot;
        srcset=&quot;/static/f688b607d477ee408b350da803beb668/e9ff0/review2.png 180w,
/static/f688b607d477ee408b350da803beb668/f21e7/review2.png 360w,
/static/f688b607d477ee408b350da803beb668/37523/review2.png 720w,
/static/f688b607d477ee408b350da803beb668/302a4/review2.png 1080w,
/static/f688b607d477ee408b350da803beb668/07a9c/review2.png 1440w,
/static/f688b607d477ee408b350da803beb668/9eaa0/review2.png 1676w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;코멘트를 받기 전까지 &lt;code class=&quot;language-text&quot;&gt;DAO&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt;가 이름만 다른 같은 개념이라 생각했다. 그래서 이 둘의 차이에 대해 알아보았다.&lt;/p&gt;
&lt;h2 id=&quot;repository-문서&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#repository-%EB%AC%B8%EC%84%9C&quot; aria-label=&quot;repository 문서 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Repository 문서&lt;/h2&gt;
&lt;p&gt;스프링 &lt;code class=&quot;language-text&quot;&gt;@Repository&lt;/code&gt; 어노테이션 자바 문서에는 다음과 같이 적혀 있다.  &lt;!--more--&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;적용 된 클래스가 &lt;em&gt;Repository&lt;/em&gt; 임을 나타냅니다. 이는 &lt;a href=&quot;http://book.naver.com/bookdb/book_detail.naver?bid=6680572&quot;&gt;도메인 주도 설계(에릭 에반스)&lt;/a&gt;에서 정의한 &lt;em&gt;저장소를 캡슐화하고, 저장하고, 검색하여 객체의 컬렉션처럼 다루는 메커니즘&lt;/em&gt;을 뜻합니다.&lt;br&gt;
&lt;em&gt;Data Access Object&lt;/em&gt;와 같은 전통적인 자바 EE 패턴을 사용하는 팀도 이 스테레오타입을 &lt;em&gt;DAO&lt;/em&gt; 클래스에 적용할 수 있습니다. 다만 그 전에 &lt;em&gt;Data Access Object&lt;/em&gt;와 &lt;em&gt;DDD-style repositories&lt;/em&gt;의 차이를 이해하는 것이 좋습니다. 이 어노테이션은 다목적 스테레오타입이고 개별 팀은 자신들만의 축소된 의미에 맞춰 적절하게 사용하면 됩니다.&lt;br&gt;
어노테이트된 클래스는 &lt;code class=&quot;language-text&quot;&gt;PersistenceExceptionTranslationPostProcessor&lt;/code&gt;와 결합 되었을 때, 스프링 &lt;code class=&quot;language-text&quot;&gt;DataAccessException&lt;/code&gt; 변환을 사용할 수 있게 됩니다. 또한 이 주석은 해당 클래스가 전체 어플리케이션 구조에서 tooling, aspects(마땅한 번역을 못 찾아 원어로 대체합니다) 등의 기능을 한다고 표기하는 것이기도 합니다.&lt;br&gt;
스프링 2.5에서 이 어노테이션은 &lt;code class=&quot;language-text&quot;&gt;@Component&lt;/code&gt;의 특정형으로써도 기능하는데, 해당 클래스가 클래스 경로 스캐닝에서 자동 탐지(autodetected)되도록 합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;이 문서에서 &lt;u&gt;DAO와 Repository는 다른 개념이며, 두 개념을 확실히 구분지어 인지&lt;/u&gt;하는 것이 중요함을 알 수 있었다.&lt;/p&gt;
&lt;h2 id=&quot;dao--repository&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dao--repository&quot; aria-label=&quot;dao  repository permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;DAO / Repository&lt;/h2&gt;
&lt;p&gt;둘의 차이에 대해 알아보기에 앞서 간단한 도메인을 떠올려보자. 아래 각 클래스는 어떤 웹게임 서비스의 &lt;code class=&quot;language-text&quot;&gt;플레이어, 게임&lt;/code&gt;을 나타낸다. 도메인 규칙은 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;플레이어는 한번에 한 게임에 참가 가능하다&lt;/li&gt;
&lt;li&gt;게임은 플레이어의 일급 컬렉션을 갖는다&lt;/li&gt;
&lt;li&gt;Dice는 DB에 저장할 값이 없다&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; win&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; lose&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dice&lt;/span&gt; dice&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Players&lt;/span&gt; players&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; stage&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;DB에 생성할 테이블과 저장해야 하는 정보는 다음과 같다&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Player
&lt;ul&gt;
&lt;li&gt;이름&lt;/li&gt;
&lt;li&gt;승패 횟수&lt;/li&gt;
&lt;li&gt;게임 키&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Game
&lt;ul&gt;
&lt;li&gt;키&lt;/li&gt;
&lt;li&gt;진행 스테이지&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;dao-data-access-object&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dao-data-access-object&quot; aria-label=&quot;dao data access object permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;DAO (Data Access Object)&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;DAO&lt;/code&gt;는 추상 API를 통해 어플리케이션/비즈니스 계층과 퍼시스턴스 계층을 분리하기 위해 만들어진 패턴이다. 한 테이블에 대한 &lt;u&gt;저수준 CRUD&lt;/u&gt; 책임을 갖기에, 한 테이블 당 하나씩 만들어진다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerDao&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findByGameId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; player&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; player&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameDao&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt; game&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt; game&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;repository&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#repository&quot; aria-label=&quot;repository permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Repository&lt;/h3&gt;
&lt;p&gt;이제 DB에서 값을 읽어 &lt;code class=&quot;language-text&quot;&gt;EasyGame&lt;/code&gt;을 복원하려면 어떻게 해야 할까?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;게임의 키값인 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;로 game 테이블을 조회하고&lt;/li&gt;
&lt;li&gt;player 테이블에서 &lt;code class=&quot;language-text&quot;&gt;game_id&lt;/code&gt;가 일치하는 플레이어를 조회하고&lt;/li&gt;
&lt;li&gt;두 결과 객체를 통해 &lt;code class=&quot;language-text&quot;&gt;EasyGame 도메인 객체&lt;/code&gt;를 만들어야 한다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;EasyGameRepository&lt;/code&gt;에서 두 Dao를 갖게 하고, 두 Dao를 이용해 만들 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGameRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerDao&lt;/span&gt; playerDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameDao&lt;/span&gt; gameDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt; game &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gameDao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Players&lt;/span&gt; players &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;playerDao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findByGameId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;game&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; players&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러면 &lt;code class=&quot;language-text&quot;&gt;Service&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;EasyGame&lt;/code&gt; 도메인 객체를 만들기 위해 어느 테이블를 다룰지 몰라도 되고, &lt;code class=&quot;language-text&quot;&gt;EasyGame&lt;/code&gt; 도메인을 책임지는 &lt;code class=&quot;language-text&quot;&gt;EasyGameRepository&lt;/code&gt;를 통해 호출할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGameService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGameRepository&lt;/span&gt; easyGameRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lodeGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; easyGameRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://book.naver.com/bookdb/book_detail.naver?bid=6680572&quot;&gt;도메인 주도 설계(DDD)&lt;/a&gt;에는 레포지토리를 이렇게 설명한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;전역적인 접근이 필요한 각 객체 타입에 대해 메모리상에 해당 타입의 객체로 구성된 컬렉션이 있다는 착각을 불러 일으키는 객체를 만든다. 잘 알려진 전역 인터페이스를 토대로 한 접근 방법을 마련하라. 객체를 추가하고 제거하는 메서드를 제공하고, 이 메서드가 실제로 데이터 저장소에 데이터를 삽입하고 데이터 저장소에서 제거하는 연산을 캡슐화하게 하라. 특정한 기준으로 객체를 선택하고 속성값이 특정 기준을 만족하는 완전히 인스턴스화된 객체나 객체 컬렉션을 반환하는 메서드를 제공함으로써 실제 저장소와 질의 기술을 캡슐화하라.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;DDD를 아직 모르는 입장이라 나는 &lt;strong&gt;캡슐화&lt;/strong&gt;에 주목했다. &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;DAO&lt;/code&gt;를 바로 이용했다면, 아래와 같은 코드가 되어 &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;EasyGame&lt;/code&gt;을 만들기 위해 &lt;strong&gt;어떤 DB에 접근해야 하는지가 그대로 드러나게 된다.&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGameService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerDao&lt;/span&gt; playerDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameDao&lt;/span&gt; gameDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lodeGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; players &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findByGameId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Game&lt;/span&gt; game &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gameDao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gameId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EasyGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;game&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; players&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;따라서 &lt;strong&gt;하나의 유기체처럼 동작하는 객체마다 일반적으로 Repository 한 개&lt;/strong&gt;가 만들어지며, 하나의 &lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt;에서 여러 &lt;code class=&quot;language-text&quot;&gt;DAO&lt;/code&gt;를 가질 수 있다. DDD에서 이 하나의 유기체처럼 동작하는 객체를 &lt;code class=&quot;language-text&quot;&gt;Aggregate/애그리거트&lt;/code&gt;라고 지칭한다.&lt;/p&gt;
&lt;p&gt;별개로 궁금했던 부분인데, 앞선 예시에서 &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt;도 하나의 애그리거트로 볼 수 있다. 그렇다면 플레이어 한 명의 정보를 불러오고 싶을 때, &lt;code class=&quot;language-text&quot;&gt;PlayerRepository&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;PlayerDao&lt;/code&gt;는 다음과 같이 될 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerDao&lt;/span&gt; playerDao&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; playerDao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PlayerDao&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이럴 경우 단순히 클래스만 하나 더 거쳐오는 것(리뷰어 핀은 &lt;code class=&quot;language-text&quot;&gt;by-pass&lt;/code&gt;라고 칭했다)처럼 보여도, &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt;가 하나의 애그리거트에 해당되기에 &lt;code class=&quot;language-text&quot;&gt;PlayerRepository&lt;/code&gt;를 사용하는 것이 맞다. 물론 이는 레포지토리와 DAO와 둘다 존재할 때의 얘기며, 내부 구현은 달라질 수 있다. 중요한 것은 &lt;code class=&quot;language-text&quot;&gt;PlayerRepository&lt;/code&gt;가 마치 &lt;code class=&quot;language-text&quot;&gt;Player 컬렉션&lt;/code&gt;을 다루는 것 처럼 &lt;strong&gt;캡슐화&lt;/strong&gt;하고 있다는 것이다.&lt;/p&gt;
&lt;h3 id=&quot;dao와-repository의-차이&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dao%EC%99%80-repository%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;dao와 repository의 차이 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;DAO와 Repository의 차이&lt;/h3&gt;
&lt;p&gt;둘의 차이에 대해선 &lt;a href=&quot;https://github.com/msbaek/memo/blob/master/dao-vs-repository.md&quot;&gt;깃헙 @msbaek - DAO와 REPOSITORY 논쟁&lt;/a&gt;에 잘 정리되어 있다. 정리하던 도중 더 좋은 글을 찾아서 링크로 대체한다.&lt;/p&gt;
&lt;h2 id=&quot;참고-자료&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고 자료 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;참고 자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://johngrib.github.io/wiki/pattern/repository/&quot;&gt;기계인간 John Grib - 저장소 패턴(Repository Pattern)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/msbaek/memo/blob/master/dao-vs-repository.md&quot;&gt;깃헙 @msbaek - DAO와 REPOSITORY 논쟁&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/woowacourse/jwp-chess/pull/474&quot;&gt;리뷰어 핀(@lalize)의 코멘트&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#repository-%EB%AC%B8%EC%84%9C&quot;&gt;@Repository 문서&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#dao--repository&quot;&gt;DAO / Repository&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#dao-data-access-object&quot;&gt;DAO (Data Access Object)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#repository&quot;&gt;Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#dao%EC%99%80-repository%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot;&gt;DAO와 Repository의 차이&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot;&gt;참고 자료&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[SQL] left join vs (inner) join]]></title><description><![CDATA[left join / (inner) join 7SQL 스터디를 하다 자신만만하게 풀었는데 기대한 답이 나오지 않는 문제가 있었다. 주문을 한 번도 하지 않은 모든 고객을 찾아주세요. 스터디는 w3schools의 sql…]]></description><link>https://hyewoncc.github.io/left-join-inner-join/</link><guid isPermaLink="false">https://hyewoncc.github.io/left-join-inner-join/</guid><pubDate>Sat, 30 Apr 2022 14:50:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;left-join--inner-join&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#left-join--inner-join&quot; aria-label=&quot;left join  inner join permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;left join / (inner) join&lt;/h2&gt;
&lt;p&gt;7SQL 스터디를 하다 자신만만하게 풀었는데 기대한 답이 나오지 않는 문제가 있었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;주문을 한 번도 하지 않은 모든 고객을 찾아주세요.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!--more--&gt;
&lt;p&gt;스터디는 &lt;a href=&quot;https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all&quot;&gt;w3schools의 sql 실습 페이지&lt;/a&gt;를 이용했는데, 고객의 정보가 있는 &lt;code class=&quot;language-text&quot;&gt;Customers&lt;/code&gt; 테이블과 &lt;code class=&quot;language-text&quot;&gt;Orders&lt;/code&gt; 테이블이 있다. 주문이 없는 고객을 찾기 위해 &lt;code class=&quot;language-text&quot;&gt;Customers&lt;/code&gt; 테이블에 &lt;code class=&quot;language-text&quot;&gt;Orders&lt;/code&gt; 테이블을 &lt;code class=&quot;language-text&quot;&gt;join&lt;/code&gt;한 다음, &lt;code class=&quot;language-text&quot;&gt;OrderId&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이 있는 걸 확인하려 했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customerid&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customername&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;orderid 
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; customers c 
&lt;span class=&quot;token keyword&quot;&gt;join&lt;/span&gt; orders o &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customerid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customerid
&lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customerid&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 실행 결과를 보니 &lt;code class=&quot;language-text&quot;&gt;OrderId&lt;/code&gt;가 없는 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;1, 6&lt;/code&gt;고객은 아예 결과에 잡히지 않았다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVQoz32Si26bMBSG8/6vVq3rqnZqEzDhHsDYhgTbXMJfnUOWRto0Sz/m3OzPx97VjURV15BSoixPPE/TjHUF1nXFcr2yfdf8oGnGsiy4rivmeWF7dxkGKKVQVRXsMICG954Xbpoal8sF/xvWWq6d55ntnVQaQShwCAWKUwVlOqRZgeefL3j68YzXt3eE0REiiiGOMShfthpNqziXfC+/XlE1EqbrsaPPMFhM8wLnPJwfobVBnCTIshzHOEEoBLquR9f3sM5tsg7ej5CtQlGe+J/qd60yoD4qbdBqA931KKsah0CwsrxgEs3qoXR3k2GivCiZnnK6/rwR9uczrPMYrIPzHtoYpGmGJE0h25apKUZU/yQsSq5zzn0TEoG6EdIR9ocAoYjw8bnn/mx05i9Cyo2OMfu+CftHwhFtqyCiCHGcIAhCLqT+2D+U1nEuETZSIs2yLb4RalS15B2Ilkiob++/P/C5P/DMcdNxj+9S22nSvOBXciekm6O36G63NI4TE4ahuN807cw9etRDbl4U8OPI/i9GG/dly4FxHgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sql_result&quot;
        title=&quot;sql_result&quot;
        src=&quot;/static/b6cea256a835aac3a841852a9ff5f11e/37523/result1.png&quot;
        srcset=&quot;/static/b6cea256a835aac3a841852a9ff5f11e/e9ff0/result1.png 180w,
/static/b6cea256a835aac3a841852a9ff5f11e/f21e7/result1.png 360w,
/static/b6cea256a835aac3a841852a9ff5f11e/37523/result1.png 720w,
/static/b6cea256a835aac3a841852a9ff5f11e/302a4/result1.png 1080w,
/static/b6cea256a835aac3a841852a9ff5f11e/07a9c/result1.png 1440w,
/static/b6cea256a835aac3a841852a9ff5f11e/6a5c3/result1.png 1646w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;아직 sql 문법에 익숙하지 않아서 &lt;code class=&quot;language-text&quot;&gt;inner, left&lt;/code&gt; 키워드를 차례로 앞에 붙여봤는데, &lt;code class=&quot;language-text&quot;&gt;left join&lt;/code&gt;일 때만 &lt;code class=&quot;language-text&quot;&gt;OrderId&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;인 경우도 포함되어 나왔다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2klEQVQoz4VTi47bIBDk/7+uj7s6uVziV2yH2AZsHsavTrV7uaiqqhZphGEHZnZZCynv6LoeNynRth1inLFu2wfWDfO8/BOfvGVZoYcRQikFKW8wxuDnvmPfNlhrobWGcw7/G8Zo5tMYrYPI8gKn9zPq5gbrPO5thy9fvzG+v7xCm4GJBDOMvNZm5G+lDZLDEUVZYRgtemUgiDjFGc4HvpAOpFkOEno/X1CUVxbLi5Ivcd4zj0Bny2vF+z5MUHqA6HrFG4RhdOiVxvmS8mXkPEkOqOoG8t6yGDkxg33MI/MoRgK9NhDDOML7wA5JhYh5XiAvClR1/XAVEKb45DH3kVFRlpz6NEUoM0C0veKa0IJeiRyzw0v6URvr2BnH/wCl+OnwWUNrHauHMLHKaC2yLGdlmvtecStRPEy/I8KHgGtV8+XUQjQLee84d6odKdI6Ob5x/X4kR34UyoDi5OAJbdApjbfTO+qb5NIQRzjnEecZU4ysQr2X5TnK8oo0zdghNS3FyekTjzPEo3dY1pWFRXOTaHuNtlPoeo26kXh5TXA4nrgPySW5ploT54leQ7YdzmnGM7kmxyLGiHVdWWHbNoQQUJYlqqpC0zT8F1D8b1iWhTnee+z7zmn/AlRBj0fZ9bffAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sql_result&quot;
        title=&quot;sql_result&quot;
        src=&quot;/static/ee8ffa05f9470178cefcbc811d272d6d/37523/result2.png&quot;
        srcset=&quot;/static/ee8ffa05f9470178cefcbc811d272d6d/e9ff0/result2.png 180w,
/static/ee8ffa05f9470178cefcbc811d272d6d/f21e7/result2.png 360w,
/static/ee8ffa05f9470178cefcbc811d272d6d/37523/result2.png 720w,
/static/ee8ffa05f9470178cefcbc811d272d6d/302a4/result2.png 1080w,
/static/ee8ffa05f9470178cefcbc811d272d6d/07a9c/result2.png 1440w,
/static/ee8ffa05f9470178cefcbc811d272d6d/6568d/result2.png 1660w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;찾아보니 &lt;code class=&quot;language-text&quot;&gt;inner join&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;차집합&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;left join&lt;/code&gt;을 포함한 &lt;code class=&quot;language-text&quot;&gt;outer join&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;합집합&lt;/code&gt;을 나타낸다 한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 446px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVQoz5WTu2sUURTGT0aF+Ii9+CdYWNhZWNhYiIWFf4GCjVhYWAnWChaCFoIiWoiIConRNSK662aTJSYxm5hI4s7s7jz23rkzdx47j533kdkViVj5wS3ugd8953wfF3CkJIklqR2GISIWRYG7VBQ5ItpupBseZbZuDH4XiwIYY1op+lNU+n2iqirnfDebZkik2c7SlXbrSXuzIi1dVbcehKGHiGDbFiJysrI2eyLwdETUdTrmiyJDxG7rllWFfGVCnBXWXwpRUxguQHfhfJQgpMlQ6lny6vWwDr3NxzsiGbi2rutZVpLuwDcaR3kdfswcMmsCr0903k+2303xKjDlC0TDoNOz5G83gi8gbz3t9AzPcymleV6u6rqe2ThCPwut11NmTbDqE1Jlcvvt4RFcBdM0ENEkra/Tp/wBQ0RKiWVZo33L5p3Vm04NcEX4OQOtFxA1hXgRuvNnhnEBnHNNUxnjlHm6bqiqatvObreTpNB2ninLF5Ufj+TtaW31srJ+2/fL1wER8zyL4yjL8zTN8H9Uwo4byCpXNKPblbIs/yfn8kqIJok7hjkQu2ZeFsoDyve72vxxZeH01rcZZriEaJTS3Xwcx4QQRelJHSJ+fy01L8kbd4LAGeVcg3R5T/8DbL85PLDaiGhZnDE27lkUhSzLYeiXgW88WH8BydKe0rDG2TJnb3Fi7dUhsbIvaoK0dq+1IdmWyRhL03QUles4jmNbbYlYKyd5FcTKge3ZKV4b5ezNQ//TpDwnWDUg4oztxJ7nEkLGM49h2+Y77T5fLuHO3P525aBZBSbXoVc9lixB/wM0pi/4QVzkuaoqvu//cUuW5eFobGn9Yes5BI29wwXoNM7FCUIQDPrSnKk1gzA1DINSGkXR3zknlFJCNEIdRfzYX7umbN4ff4xfrwr3weYx2XoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;join&quot;
        title=&quot;join&quot;
        src=&quot;/static/2feecc8dc08d43cdff242d33c87084c7/6244b/join.png&quot;
        srcset=&quot;/static/2feecc8dc08d43cdff242d33c87084c7/e9ff0/join.png 180w,
/static/2feecc8dc08d43cdff242d33c87084c7/f21e7/join.png 360w,
/static/2feecc8dc08d43cdff242d33c87084c7/6244b/join.png 446w&quot;
        sizes=&quot;(max-width: 446px) 100vw, 446px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;A left join B&lt;/code&gt;를 하면, A 테이블의 모든 행을 조회하면서 B에 없는 값은 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;로 처리된다. 나머지 &lt;code class=&quot;language-text&quot;&gt;outer join&lt;/code&gt;은 해당 사이트에서 지원하지 않아 써보진 못했지만, 스터디 덕분에 차이를 확실히 알게 되었다.&lt;/p&gt;
&lt;br/&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#left-join--inner-join&quot;&gt;left join / (inner) join&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[레벨1 레벨 인터뷰 회고]]></title><description><![CDATA[레벨로그란? 우아한테크코스에는 가 존재한다. 일종의 모의 면접으로 한 레벨 동안 배운 내용을 인터뷰를 통해 점검하는 것이다. 6명의 팀으로 진행했는데, 레벨 로그를 토대로 1명의 인터뷰어를 3명의 크루 인터뷰이와 코치가 인터뷰하고,…]]></description><link>https://hyewoncc.github.io/level1-interview/</link><guid isPermaLink="false">https://hyewoncc.github.io/level1-interview/</guid><pubDate>Tue, 26 Apr 2022 14:10:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;레벨로그란&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A0%88%EB%B2%A8%EB%A1%9C%EA%B7%B8%EB%9E%80&quot; aria-label=&quot;레벨로그란 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;레벨로그란?&lt;/h2&gt;
&lt;p&gt;우아한테크코스에는 &lt;code class=&quot;language-text&quot;&gt;레벨 인터뷰&lt;/code&gt;가 존재한다. 일종의 모의 면접으로 한 레벨 동안 배운 내용을 인터뷰를 통해 점검하는 것이다. 6명의 팀으로 진행했는데, 레벨 로그를 토대로 1명의 인터뷰어를 3명의 크루 인터뷰이와 코치가 인터뷰하고, 2명이 옵저버(관찰자)로 참여한다. 역할은 돌아가면서 바뀐다.&lt;br&gt;
나는 크루 &lt;code class=&quot;language-text&quot;&gt;리차드, 릭, 열음, 오찌, 클레이&lt;/code&gt;와 코치 &lt;code class=&quot;language-text&quot;&gt;브라운&lt;/code&gt;과 함께 했다.  &lt;!--more--&gt;&lt;/p&gt;
&lt;h2 id=&quot;인터뷰어-회고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B8%ED%84%B0%EB%B7%B0%EC%96%B4-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;인터뷰어 회고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;인터뷰어 회고&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.google.com/document/d/1BCLZQl-nO0liEJH8EytjozliGw9pwc08UEhG04SGtPM/edit?usp=sharing&quot;&gt;레벨1 레벨로그&lt;/a&gt;는 키워드 중심으로 간략하게 작성했다. 레벨1동안 많은 걸 배웠지만 직접 로그로 쓰기 전 까지는 정확히 몰랐다. 그런데 인터뷰를 위해 로그를 쓰면서부터 한 번 정리할 수 있었다.&lt;br&gt;
감사하게도 &lt;code class=&quot;language-text&quot;&gt;열음&lt;/code&gt;이 내 인터뷰 기록을 남겨줘서 복기가 쉬웠다.&lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;인터뷰 요약 전문&lt;/summary&gt;
&lt;div markdown=&quot;1&quot;&gt;  
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Q . TDD 하면서 도움을 받았던 경험, 불편했던 경험  
A . 체스미션 기물 종류별 움직임 에러 디버깅시 편리, 여러 케이스가 모여있는 경우에 원인을 찾기 편함, 비즈니스 로직 통합 개발 시 에러가 적었다  
중간에 설계가 바뀌어 테스트도 전부 고친 경험이 불편  

Q. 설계가 바뀔 수 있을때 변경범위를 줄이는 방법이 있나?  
A. TDD는 설계가 아닌 개발 방법론. 시작 전 구조를 어느정도 잡고 착수하면 변경을 줄일 수 있을 것 같다  
구현을 작은 단위로 하면 파급효과가 덜할 것 같다  

Q. 자바의 Checked exception / Unchecked exception 의 차이  
A. Checked exception은 try,catch 로 잡고 unchecked exception은 runtime에러가 나옴, 실패가 발생했을때 이어지는 상황에 따라 달리 써야한다. 그리고 이에 대한 처리는 개발자에 달림.  
복구나 대처가 상황이면 해결을, 복구 불가능한 상황이라면 다른 exception을 던지는 식으로 처리해왔다   

Q. 추상클래스는 객체를 생성할 수 없는데, 생성자는 가질 수 있다. 왜 이런 구조일까?  
A. 자식클래스에서 사용, 생성시 제약사항(검증)등을 걸 수 있으므로  

Q. 추상클래스 vs 인터페이스?  
A. 인터페이스는 input, output만 작성, 추상클래스는 이외에도 기본적인 메소드나 필드가 포함되어있음  
변경에 의한 파급효과 때문에 인터페이스를 먼저 시도하는 편  

Q. 구현체가 중복되어도 인터페이스를 선호한 이유가 있나?  
A. 메소드가 겹치는 경우가 이제까지 없어서 잘 모르겠다  

Q. 인터페이스로 썼는데 메소드를 추가한다면 가장 최적의 방법은?  
A. 만약 구현 내용이 같다면 디폴트 메서드로 추가하는 걸 미리 고려, 불가능하면 implement한 클래스에 전부 작성  

Q. 의존 관계의 정의, 주입법의 장점?  
A. A가 B를 사용할 때. 의존관계를 받는 클래스에서 무엇을 주입받을지 결정할 수 있다는 장점이 있다  

Q. 클린코드의 원칙, 가장 수정하고싶은 코드?  
A. 이름을 잘 짓기, 코드 줄 적게, 보드 서비스를 수정하고싶음. (메소드 배치 순서) 페어가 코드를 읽기 힘들어해서 1순위.  

Q. DI에 인터페이스만 들어갈 수 있나? 다른건?  
A. 다른 구현체도 들어갈 수 있음  

Q. 페어는 처음?, 첫페어랑 마지막페어랑 가장 크게 달라진 생각    
A. 우테코에 와서 처음. 좋은 코드를 짤 수 있음이 장점인 줄 알았는데 소통을 많이 하게 됨. 서로 생각하는 코드의 장점이나 단점을 얘기할 수 있어서 좋았다.  

Q. 레벨1에서 지식을 공유한 경험이 있나? 처음의 본인에게 가장 가르쳐주고싶은 철칙이 있다면?  
A. 계속 나보다 경험이 많은 페어들과 매칭되었다. 적극적으로 물어보는 태도를 당부할 것 같다.  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/details&gt;   
&lt;p&gt;그리고 &lt;code class=&quot;language-text&quot;&gt;리차드&lt;/code&gt;가 저녁에 피드백을 보내줬다😭 정말 너무 고마워서 눈물이 났다…&lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;리차드의 피드백&lt;/summary&gt;
&lt;div markdown=&quot;1&quot;&gt;  
&lt;ul&gt;
&lt;li&gt;테스트 코드의 유지보수 비용을 줄일 수 있는 방법에 대하여 답변 준비해보기&lt;/li&gt;
&lt;li&gt;경험해보지 못한 사례나 모르는 내용에 대한 질문을 받았을 때, 차분히 모름을 인정하되 현재 생각나는 추론과 이유를 제시하기&lt;/li&gt;
&lt;li&gt;인터뷰어로부터 같은 질문이 반복될 때 나의 답변 중 모순이 있었는지, 함정일지 판단해보기 (잠시 시간 두고 생각하기. 때론 빠른 인정이 나을 수도)&lt;/li&gt;
&lt;li&gt;다른 크루에게 도움을 준 경험에 대하여 답변 준비해보기&lt;/li&gt;
&lt;li&gt;페어 프로그래밍 또는 협업에 있어 내가 지키고자 하는 철칙에 대한 답변 준비해보기&lt;/li&gt;
&lt;li&gt;추상클래스 or 인터페이스 or 구현체 각각을 의존관계 주입할 때의 차이에 대한 답변 준비해보기&lt;/li&gt;
&lt;li&gt;추상 클래스 vs 인터페이스의 선택 기준 또는 추상 클래스가 더 유리한 상황에 대한 답변 준비해보기&lt;br&gt;
( 저는 이펙 18번을 보고 다음과 같이 정리해봤어요.
1) 확실한 is-a관계이고,
2) 추상클래스 메서드에 결함이 없음이 확실하고,
3) 같은 패키지 내에서 관리되고,
4) 계층적 상속 없이 1단 상속만 사용한다면
추상클래스를 사용하는 게 맞다)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;  
&lt;h3 id=&quot;스스로-잘한-점&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EC%9E%98%ED%95%9C-%EC%A0%90&quot; aria-label=&quot;스스로 잘한 점 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;스스로 잘한 점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;거의 모든 질문에 알고 있는 지식을 아쉬움 없이 차근차근 말했다&lt;/li&gt;
&lt;li&gt;답변에 지식과 경험의 균형이 좋았다&lt;/li&gt;
&lt;li&gt;시선과 어조를 만족스럽게 관리했다&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;스스로-아쉬운-점&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EC%95%84%EC%89%AC%EC%9A%B4-%EC%A0%90&quot; aria-label=&quot;스스로 아쉬운 점 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;스스로 아쉬운 점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Checked/Unchecked Exception 질문에 답변하면서 모순 된 말을 했다&lt;/li&gt;
&lt;li&gt;모순된 말을 한 것을 처음에 인지하지 못하고 꼬리 질문에 당황했다&lt;/li&gt;
&lt;li&gt;경험이 없거나 생각해보지 않은 부분에 대해 조금 섣불리 단정적으로 대답했다&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;인터뷰이--옵저버-회고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B8%ED%84%B0%EB%B7%B0%EC%9D%B4--%EC%98%B5%EC%A0%80%EB%B2%84-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;인터뷰이  옵저버 회고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;인터뷰이 &amp;#x26; 옵저버 회고&lt;/h2&gt;
&lt;p&gt;레벨 인터뷰를 준비하면서 &lt;code class=&quot;language-text&quot;&gt;잘 대답하는 것&lt;/code&gt;만 걱정했다. 그런데 인터뷰이, 옵저버로 참여해 다른 크루들의 인터뷰를 들으면서 인터뷰어 때 만큼 많은 걸 배웠다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;클레이 : 트러블 슈팅을 하며 제네릭에 대해 깊게 공부한 경험이 인상적이었다. 이 사람은 잘 모르는 문제를 발견하면 그냥 넘어가지 않고 꼼꼼히 파고들어 공부하는구나! 가 확실히 느껴졌다.&lt;/li&gt;
&lt;li&gt;리차드 : 개념 설명이 놀라울 정도로 완벽했다. 거기다 말하는 구성이 한 번 글을 써보신 것 처럼 탄탄해서, 대답의 구조를 저렇게 해야 듣기 쉽구나 했다.&lt;/li&gt;
&lt;li&gt;오찌 : 개념 질문에 대한 답변 만큼, 경험에 기반한 자기 주장이 탄탄하게 준비되어 있어서, 평소에 코드를 짜며 생각을 많이 한다는 것이 보였다. 엮인 개념들의 관계를 언급하는 부분이 특히 그랬다.&lt;/li&gt;
&lt;li&gt;열음 : 소프트스킬 관련해 다소 대답하기 어려운 질문에도 차분히 생각을 말하시는 모습에서 레벨1 동안 소프트스킬에 대해 많이 고민하셨음을 알 수 있었다. 개념 질문에 간결하지만 명확한 설명을 하셔서 알아듣기 쉬웠다.&lt;/li&gt;
&lt;li&gt;릭 : 질문에 대한 대답에서 단순히 대답의 부피를 불리기 위해 예시를 드는 것이 아니라, 경험을 통해 연관시켜 더 깊이있는 공부를 했음이 보였다. 확고한 페이스가 있는 점도 좋았다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;인터뷰를 들으면서 각자 확고하게 느껴지는 장점이 있었다. 면접에서 이런 장점을 보고 사람을 뽑는구나를 배울 수 있었다. 같은 데일리 조였던 오찌를 제외하고 거의 처음 보는 크루들이었는데도, 이 크루들이랑 같이 일하거나 공부하면 좋겠다고 진심으로 생각했다.&lt;/p&gt;
&lt;p&gt;또, 열음이랑 리차드가 해 준 것 처럼, 다음 레벨 인터뷰 때는 나도 크루들을 위해 인터뷰 기록이나 더욱 상세한 피드백을 주고 싶다.&lt;/p&gt;
&lt;h2 id=&quot;️-종합-회고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EF%B8%8F-%EC%A2%85%ED%95%A9-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;️ 종합 회고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;✏️ 종합 회고&lt;/h2&gt;
&lt;p&gt;작년까지는 &lt;code class=&quot;language-text&quot;&gt;모의 면접&lt;/code&gt;이라는 이름으로 진행했다고 들은데다 첫번째 순서로 인터뷰어를 하게 되어서 굉장히 긴장했다. 끝나고 다른 크루들과 코치 브라운이 잘했다며 칭찬해줬는데 순간 울컥할 정도였다. 단순히 면접 대비라 생각했는데, 인터뷰를 통해 내 학습 경향이나 화법에 대해 부족한 점을 성찰할 수 있어서 좋았다. 또, 다른 크루들의 인터뷰 모습을 보고, 함께 일하고 싶은 사람이란 저런 사람을 말하는 거구나를 배웠다. 해보기 전까지는 걱정이 컸는데, 다음 레벨 인터뷰가 기대된다. 그 때는 이번에 발견한 아쉬운 점을 보완해서 더 잘하고 싶다!&lt;/p&gt;
&lt;br/&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EB%A0%88%EB%B2%A8%EB%A1%9C%EA%B7%B8%EB%9E%80&quot;&gt;레벨로그란?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%9D%B8%ED%84%B0%EB%B7%B0%EC%96%B4-%ED%9A%8C%EA%B3%A0&quot;&gt;인터뷰어 회고&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EC%9E%98%ED%95%9C-%EC%A0%90&quot;&gt;스스로 잘한 점&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%8A%A4%EC%8A%A4%EB%A1%9C-%EC%95%84%EC%89%AC%EC%9A%B4-%EC%A0%90&quot;&gt;스스로 아쉬운 점&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%9D%B8%ED%84%B0%EB%B7%B0%EC%9D%B4--%EC%98%B5%EC%A0%80%EB%B2%84-%ED%9A%8C%EA%B3%A0&quot;&gt;인터뷰이 &amp;#x26; 옵저버 회고&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EF%B8%8F-%EC%A2%85%ED%95%A9-%ED%9A%8C%EA%B3%A0&quot;&gt;✏️ 종합 회고&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Spring] DB 연결 없는 컨트롤러 테스트에서 시작한 스프링 공식 문서 공부]]></title><description><![CDATA[사건의 발단 우테코 레벨1 마지막 미션인 웹 체스 강의에서 테스트 더블을 이용해 DB 연결 없이 DAO 객체를 테스트 하는 걸 배웠다. 웹 체스에 스프링 프레임워크를 적용하고 컨트롤러를 짜는데, 컨트롤러도 DB…]]></description><link>https://hyewoncc.github.io/spring-study-1/</link><guid isPermaLink="false">https://hyewoncc.github.io/spring-study-1/</guid><pubDate>Mon, 25 Apr 2022 02:40:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;사건의-발단&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%82%AC%EA%B1%B4%EC%9D%98-%EB%B0%9C%EB%8B%A8&quot; aria-label=&quot;사건의 발단 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;사건의 발단&lt;/h2&gt;
&lt;p&gt;우테코 레벨1 마지막 미션인 웹 체스 강의에서 &lt;a href=&quot;https://tecoble.techcourse.co.kr/post/2020-09-19-what-is-test-double/&quot;&gt;테스트 더블&lt;/a&gt;을 이용해 DB 연결 없이 DAO 객체를 테스트 하는 걸 배웠다. 웹 체스에 스프링 프레임워크를 적용하고 컨트롤러를 짜는데, &lt;strong&gt;컨트롤러도 DB 연결 없이 테스트 할 수 있지 않을까?&lt;/strong&gt; 하는 생각이 들었다. 체스방의 정보(id, name)을 담은 &lt;code class=&quot;language-text&quot;&gt;room&lt;/code&gt; 테이블을 대신 할 &lt;code class=&quot;language-text&quot;&gt;FakeRoomRepository&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;RoomRepository&lt;/code&gt;를 주입받는 &lt;code class=&quot;language-text&quot;&gt;RoomService&lt;/code&gt;를 만든 것 까진 아주 좋았다.&lt;/p&gt;
&lt;!--more--&gt; 
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FakeRoomRepository&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; autoIncrementId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        autoIncrementId&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;autoIncrementId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; autoIncrementId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RoomDto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; roomId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofNullable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;roomId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomDto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;roomId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomService&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomRepository&lt;/span&gt; roomRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RoomRepository&lt;/span&gt; roomRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;roomRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; roomRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;문제는 컨트롤러를 짜며 생겼다. 당초 계획은 &lt;code class=&quot;language-text&quot;&gt;FakeRoomRepository&lt;/code&gt;를 주입받은 &lt;code class=&quot;language-text&quot;&gt;RoomService&lt;/code&gt;를 테스트 환경에서만 컨트롤러에 주입하기였다. 하지만 스프링에서는 사용자가 직접 new로 객체를 생성하지 않고 &lt;code class=&quot;language-text&quot;&gt;@Component&lt;/code&gt;로 등록된 클래스를 스캔해 빈(Bean)으로 생성한다. 그래서 테스트에서만 필요한 객체를 주입 할 수가 없었다.&lt;/p&gt;
&lt;h3 id=&quot;일단-해결은-했으나&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%BC%EB%8B%A8-%ED%95%B4%EA%B2%B0%EC%9D%80-%ED%96%88%EC%9C%BC%EB%82%98&quot; aria-label=&quot;일단 해결은 했으나 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;일단 해결은 했으나…&lt;/h3&gt;
&lt;p&gt;페어 더즈와 방법을 고민하다 지나가던 제이슨이 도와줘서 문제를 해결할 수 있었다. 먼저 test 폴더 하위에 &lt;code class=&quot;language-text&quot;&gt;application.properties&lt;/code&gt;를 추가로 작성해 프로덕션과 다른 설정이 적용되게 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;properties&quot;&gt;&lt;pre class=&quot;language-properties&quot;&gt;&lt;code class=&quot;language-properties&quot;&gt;&lt;span class=&quot;token key attr-name&quot;&gt;spring.main.allow-bean-definition-overriding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.core.spring.main.allow-bean-definition-overriding&quot;&gt;공식 문서&lt;/a&gt;에 따르면, 해당 설정은 이미 존재하는 빈 정의(definition)와 같은 이름을 다시 정의했을 때, 존재하던 정의가 덮어 씌워짐(overriding)을 허용하는 설정이다. 이를 허용하고 테스트 코드에서 &lt;code class=&quot;language-text&quot;&gt;RoomRepository&lt;/code&gt;를 재정의 하였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@TestConfiguration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TestConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RoomRepository&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;roomRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FakeRoomRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webEnvironment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpringBootTest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;WebEnvironment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RANDOM_PORT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TestConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpringChessControllerTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@LocalServerPort&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; port&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ApplicationContext&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;RestAssured&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; port&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;부적절한 이름이 입력되면 400 에러 발생&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ParameterizedTest&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ValueSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strings &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;16자를넘는방이름은안되니까돌아가&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;nameException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;RestAssured&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;given&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formParam&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/rooms&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BAD_REQUEST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트 코드 실행 시, 프로덕션 코드의 실제 DB를 사용하는 &lt;code class=&quot;language-text&quot;&gt;RoomRepositoryImpl&lt;/code&gt;빈이 &lt;code class=&quot;language-text&quot;&gt;FakeRoomRepository&lt;/code&gt;로 덮어 씌워지고, 컨트롤러를 DB 연결 없이 사용할 수 있게 된다.&lt;br&gt;
스프링을 처음 써본 건 아니지만, 내부 작동 원리는 잘 모르고 있었음을 위 테스트를 시도하다 인지하게 되었다. 그래서 공식 문서 탐방을 했다. 각잡고 공식 문서를 꼼꼼히 읽어 본 건 처음이다.&lt;/p&gt;
&lt;h2 id=&quot;spring&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#spring&quot; aria-label=&quot;spring permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Spring&lt;/h2&gt;
&lt;h3 id=&quot;bean과-component의-차이&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#bean%EA%B3%BC-component%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;bean과 component의 차이 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Bean과 @Component의 차이&lt;/h3&gt;
&lt;p&gt;@Component 어노테이션이 붙은 클래스는 컴포넌트 스캔의 대상이 되어 스프링 어플리케이션 실행 시, 빈으로 생성된다는 것은 알았다. 하지만 @Bean 어노테이션과 무슨 차이가 있는 지는 몰랐다. @Bean이 @Component의 상위 어노테이션이라 생각했는데 틀렸다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-java-bean-annotation&quot;&gt;스프링 공식 문서&lt;/a&gt;의 &lt;code class=&quot;language-text&quot;&gt;7.12.3 Using the @Bean annotation&lt;/code&gt;에는 이렇게 나온다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@Bean은 메서드 레벨의 어노테이션이며 XML &amp;#x3C;bean/&gt; 엘리먼트의 직접적인 유사체입니다. 이 어노테이션은 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-factory-lifecycle-initializingbean&quot;&gt;init-method&lt;/a&gt;, &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-factory-lifecycle-disposablebean&quot;&gt;destroy-method&lt;/a&gt;,&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-factory-autowire&quot;&gt;autowiring&lt;/a&gt;,name 같이 &amp;#x3C;bean/&gt;에서 제공하는 일부 속성을 지원합니다.&lt;br&gt;
@Bean 어노테이션은 @Configuration와 @Component가 붙은 클래스 내부에서 사용할 수 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그리고 빈 선언에 앞선 컨트롤러 테스트에서 작성한 코드와 유사한 예시 코드가 보여 이 섹션도 마저 읽었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;빈은 선언하려면 메서드에 @Bean만 붙이면 됩니다. ApplicationContext 내에서 메서드의 리턴값으로 특정된 빈 정의를 등록하게 됩니다. 기본적으로 메서드 이름이 빈 이름이 됩니다. @Bean 메서드 선언의 간단한 예는 다음과 같습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TransferServiceImpl&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;transferService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TransferServiceImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;이 configuration은 다음 Spring XmL과 완전히 동일하게 작동합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;transferService&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;com.acme.TransferServiceImpl&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;둘 다 &lt;code class=&quot;language-text&quot;&gt;ApplicationContext&lt;/code&gt;내에서 유효한 &lt;code class=&quot;language-text&quot;&gt;TransferServiceImpl&lt;/code&gt;의 인스턴트를 주입받은 &lt;code class=&quot;language-text&quot;&gt;transferService&lt;/code&gt;라는 이름의 빈을 만듭니다. @Bean으로 인터페이스(또는 베이스 클래스)를 리턴하는 메서드 역시 선언 가능합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TransferService&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;transferService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TransferServiceImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;그러나 타입 예측에 대한 가시성이 특정한 인터페이스 타입(TransferService)으로 제한되고, 전체 유형(TransferServiceImpl)은 컨테이너에 이 클래스에 영향받는 싱글턴 빈이 인스턴스화 될 때 알려집니다. 이른 초기화 되는 싱글턴 빈들은 선언 순서에 따라 인스턴스화 되기에, 타입 매칭이 다르게 될 수도 있습니다. 이는 다른 컴포넌트가 “transferService”가 인스턴스화 된 뒤에야 생성되는 선언되지 않은 타입(예: @Autowired TransferServiceImpl)과 매치하려 할 때 일어납니다.&lt;br&gt;
서비스 인터페이스로 선언된 유형을 일관되게 참조하는 경우, @Bean 반환 타입은 디자인 의도에 맞게 동작할 것입니다. 하지만 여러 인터페이스를 구현하거나, 잠재적으로 구현 유형에 따라 참조되는 컴포넌트의 경우에는, 가능한 제일 특정한 리턴 타입을 사용하는 것이 안정합니다. (적어도 빈을 참조하는 주입 시점에서 필요한 만큼은 구체적이어야 합니다.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;결국 @Bean은 메서드에, @Component는 클래스에 쓰인다고 축약할 수 있다. 실제로 둘을 반대로 써보면 컴파일 에러가 나는 것을 처음 눈으로 확인했다. 둘의 차이는 &lt;a href=&quot;https://jojoldu.tistory.com/27&quot;&gt;개발자 이동욱님 블로그 포스팅&lt;/a&gt;에도 서치하니 나왔다. &lt;del&gt;문서를 읽기 전에 봤다면 좋았을텐데…&lt;/del&gt; &lt;a href=&quot;https://youngjinmo.github.io/2021/06/bean-component/&quot;&gt;DevAndy - Bean과 Component 차이&lt;/a&gt;에 차이에 좀 더 중점을 둔 상세한 설명이 있다.&lt;/p&gt;
&lt;h3 id=&quot;repository-service-controller는-내부가-같다&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#repository-service-controller%EB%8A%94-%EB%82%B4%EB%B6%80%EA%B0%80-%EA%B0%99%EB%8B%A4&quot; aria-label=&quot;repository service controller는 내부가 같다 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Repository, @Service, @Controller는 내부가 같다&lt;/h3&gt;
&lt;p&gt;이 세가지 어노테이션을 쓰면서 나는 이 셋에게 각각 이름값 하는 기능이 있을 거라 생각했다. 그런데 클래스 파일을 보니 내부 구조가 &lt;strong&gt;동일&lt;/strong&gt; 했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Repository, Controller도 동일  &lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Target&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ElementType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TYPE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Retention&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RetentionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RUNTIME&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Documented&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Service&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token annotation punctuation&quot;&gt;@AliasFor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;annotation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모두 동일하게 @Component를 써도 동작했고, 내용물과 다른 어노테이션을 붙여도 당연하게도 문제가 없었다. 어노테이션과 코드는 상관이 없으니 생각해보면 이상할 게 없는 일이다. 그런데 이제까지 한 번도 의심없이 &lt;code class=&quot;language-text&quot;&gt;그냥 컨트롤러에는 @Controller 붙이는 거다~&lt;/code&gt; 했기에 충격이었다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations&quot;&gt;스프링 공식 문서&lt;/a&gt;의 &lt;code class=&quot;language-text&quot;&gt;7.10.1 @Component and further stereotype annotations&lt;/code&gt;에는 이렇게 나온다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@Repository 어노테이션은 (Data Access Object 또는 DAO 로도 불리는) 레포지토리의 역할 또는 &lt;em&gt;전형&lt;/em&gt; 을 만족하는 클래스에 사용하는 마커입니다. 이 마커의 기능 중에는 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#orm-exception-translation&quot;&gt;Section 20.2.2, “Exception Translation”&lt;/a&gt; 에 나오는 예외 자동 변환이 있습니다.&lt;br&gt;
스프링은 @Component, @Service, @Controller 등의 어노테이션을 지원합니다. @Component는 스프링이 관리하는 모든 컴포넌트의 일반형입니다. @Repository, @Service, @Controller는 좀 더 특정한 사용에 맞춘 @Component의 특정한 유형입니다. 예를 들어 각각 퍼시스던트, 서비스, 표현 계층에 사용합니다. 따라서 작성한 컴포넌트 클래스에 @Component를 붙일 수 있지만, @Repository, @Service, @Controller를 사용하면 툴 사용이나 분석에 좀 더 적합해집니다. 예를 들어 이 어노테이션들이 pointcuts(스프링의 또 다른 기능이군요)의 대상으로 맞춰집니다. 또한 추후 있을 스프링 릴리즈에서 @Repository, @Service, @Controller에 추가 시멘틱이 생길 가능성이 있습니다. 결론적으로 서비스 계층에 @Component와 @Service중 무얼 붙일지 골라야 한다면, @Service가 명백하게 나은 선택입니다. 비슷하게 위에서 말했듯이, 퍼시스턴트 계층에 붙이는 @Repository는 이미 예외 자동 변환 지원 마커로 쓰이고 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그럼 &lt;code class=&quot;language-text&quot;&gt;코드에 있는 모든 @Repository, @Service, @Controller를 뒤죽박죽 써도 된다는 말인가?&lt;/code&gt;하고 해보았더니 컨트롤러에 @Component를 포함한 다른 어노테이션을 붙일 경우, 경로 매핑이 작동하지 않았다. 서비스에 @Repository를 붙여도 정상 작동 하는 걸 보고 이제까지 어노테이션을 구분한 이유가 뭔가… 하고 트루먼쇼에 빠진 느낌이었는데, 그건 아니어서 다행이다. 어떤 원리로 동작하는 것일까? 참으로 신기하다… 더 파고들어 공부해야겠다.&lt;/p&gt;
&lt;h3 id=&quot;configuration의-사용&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuration%EC%9D%98-%EC%82%AC%EC%9A%A9&quot; aria-label=&quot;configuration의 사용 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@Configuration의 사용&lt;/h3&gt;
&lt;p&gt;짧은 공식 문서 번역으로 대체한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@Configuration은 해당 오브젝트가 빈 정의를 담고 있음을 뜻하는 클래스 레벨 어노테이션입니다. @Configuration 클레스는 @Bean이 붙은 퍼블릭 메서드로 빈을 선언합니다. @Configuration 클래스에서 @Bean 메서드의 사용은 내부 빈 의존성 정의에 사용될 수 있습니다. 좀 더 넓은 설명에 대해서는 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-java-basic-concepts&quot;&gt;Section 7.12.1, “Basic concepts: @Bean and @Configuration”&lt;/a&gt;을 참고하십시오.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;testconfiguration과-import&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#testconfiguration%EA%B3%BC-import&quot; aria-label=&quot;testconfiguration과 import permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;@TestConfiguration과 @Import&lt;/h3&gt;
&lt;p&gt;이 쯤 되니 @TestConfiguration과 @Configuration도 똑같은 거 아닐까 하는 의심이 들었으나 달랐다. @TestConfiguration은 @Configuration과 @TestComponent가 붙어있고, @Configuration은 @Component가 붙은 구조였다. 자바 문서의 @TestConfiguraion은 이렇게 쓰여있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;테스트를 위한 추가 빈 정의나 커스터마이징에 쓰는 @Configuration 입니다. 일반 @Configuration과 달리 @TestConfiguration은 @SpringBootConfiguration에 의한 자동 탐지(auto-detection)를 방지하지 않습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;auto-detection이 뭔지 알기 위해 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-scanning-autodetection&quot;&gt;7.10.3 Automatically detecting classes and registering bean definitions&lt;/a&gt;읽어 보았는데, 그래서 왜 프로덕션과 테스트에 따라 이걸 방지하고 방지하지 않는지에 대한 해답은 찾지 못했다. 추후 공부가 더 필요하다.&lt;/p&gt;
&lt;p&gt;@Import는 자바 코드 상 configuration을 설정하는데 쓰이는 것이었고, 공식 문서 설명은 아래와 같다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;스프링 xml 파일에서 configuration들의 모듈화를 위해 &amp;#x3C;import/&gt;를 사용하는 것 처럼, @Import 어노테이션은 다른 configuration 클래스에서 @Bean 정의를 불러오는 것을 허용합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ConfigA&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

     &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ConfigA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ConfigB&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;이제 context가 초기화 될 때, &lt;code class=&quot;language-text&quot;&gt;ConfigA.class&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;ConfigB.class&lt;/code&gt;를 둘 다 특정할 필요 없이, &lt;code class=&quot;language-text&quot;&gt;ConfigB&lt;/code&gt;만 명시적으로 설정하면 됩니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ApplicationContext&lt;/span&gt; ctx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ConfigB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 이제 A와 B 빈을 둘 다 사용 가능  &lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;A&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;B&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;이제 개발자는 수많은 @Configuration 클래스들을 기억할 필요 없이 한 클래스만 신경쓸 수 있으므로, 컨테이너 인스턴스화를 간단화합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;스프링 4.2에서 @Import는 &lt;code class=&quot;language-text&quot;&gt;AnnotationConfigApplicationContext.register&lt;/code&gt;메서드와 유사하게 일반 컴포넌트 클래스도 지원하게 되었습니다. 이 기능은 당신이 모든 컴포넌트를 명시적으로 정의하기 위한 시작점으로 몇몇 configuration 클래스를 사용함으로서, 전체 컴포넌트 스캔을 피하고 싶을 때 특히 유용합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;또 다시 하나를 알고 둘을 모르는 상황에 빠졌다. 공부할 거리가 복사가 되고 있다.&lt;/p&gt;
&lt;h2 id=&quot;꼬리에-꼬리를-무는-스프링&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%BC%AC%EB%A6%AC%EC%97%90-%EA%BC%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EB%8A%94-%EC%8A%A4%ED%94%84%EB%A7%81&quot; aria-label=&quot;꼬리에 꼬리를 무는 스프링 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;꼬리에 꼬리를 무는 스프링&lt;/h2&gt;
&lt;p&gt;모르는 하나를 알기 위해 공식 문서를 들어가니 모르는 것이 두 개가 된다. 원래는 다른 한국 개발자들이 포스팅 한 글 등을 보고 사용법만 익혔다. 그래서 내가 스프링을 좀 아는 줄 알았는데, 공식 문서를 들어가니 처음 보는 것 투성이었다. 영어로 읽으니 한글과 달리 모르는 것을 추측으로 떼우지 못해서 모르는 것에 대한 &lt;strong&gt;메타 인지&lt;/strong&gt;가 정확히 이루어졌다. 공식 문서를 보지 않았다면 모든 걸 두루뭉술하게 아는 채로 그냥 스프링을 사용했을 것이다. 앞으로는 공식 문서를 최우선으로 삼고 공부해야겠다. 그리고 스프링을 개발 한 사람은 천재다.&lt;/p&gt;
&lt;p&gt;그리고 테스트는 그냥 테스트 한정 인메모리 h2를 써서 하면 비용 지출을 아끼며 할 수 있었다. ㅎㅎ 하지만 이런 고민이 없었다면 공식 문서 읽어 볼 생각을 늦게 했을테니 오히려 좋아.&lt;/p&gt;
&lt;br/&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%82%AC%EA%B1%B4%EC%9D%98-%EB%B0%9C%EB%8B%A8&quot;&gt;사건의 발단&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%9D%BC%EB%8B%A8-%ED%95%B4%EA%B2%B0%EC%9D%80-%ED%96%88%EC%9C%BC%EB%82%98&quot;&gt;일단 해결은 했으나…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#spring&quot;&gt;Spring&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#bean%EA%B3%BC-component%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot;&gt;@Bean과 @Component의 차이&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#repository-service-controller%EB%8A%94-%EB%82%B4%EB%B6%80%EA%B0%80-%EA%B0%99%EB%8B%A4&quot;&gt;@Repository, @Service, @Controller는 내부가 같다&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuration%EC%9D%98-%EC%82%AC%EC%9A%A9&quot;&gt;@Configuration의 사용&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#testconfiguration%EA%B3%BC-import&quot;&gt;@TestConfiguration과 @Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EA%BC%AC%EB%A6%AC%EC%97%90-%EA%BC%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EB%8A%94-%EC%8A%A4%ED%94%84%EB%A7%81&quot;&gt;꼬리에 꼬리를 무는 스프링&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[레벨1 스터디 운영 회고]]></title><description><![CDATA[…]]></description><link>https://hyewoncc.github.io/level1-study-log/</link><guid isPermaLink="false">https://hyewoncc.github.io/level1-study-log/</guid><pubDate>Mon, 18 Apr 2022 16:00:00 GMT</pubDate><content:encoded>&lt;p&gt;나는 살면서 스터디를 해 본 적이 없다. 공부는 혼자 하거나 최소 친구와 하는 게 편하고 좋았다. 개발도 비전공으로 독학 후 국비학원을 다녔다. 다른 사람들과 개발 얘기를 한 적도 당연히 거의 없었다. 이런 성향을 고치고 싶어 이펙티브 자바 스터디를 열었고, 레벨1을 겪으며 &lt;code class=&quot;language-text&quot;&gt;남들과 개발 얘기하는 즐거움&lt;/code&gt;을 깨우치고 독서회를 열게 되었다. 방학을 맞아 가벼운 회고를 써본다.&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADL0lEQVQozx3M/U/UBRzA8fvReBA4Ac97+B53x/ee77gHODgOseDGQ2WzX5grXbMt+qWgAn9oC5bmaM3WDzViuVxjjQRdLRAwQwl/MIMsS1DQLp5COMAT1tMcy8+76esPeGkytueIVmfEYvfJLkWlOh6nsfFF3jnSRvdnJzh/7kt+uPwtF0b66T3Vzacnu+js+pDnDh5kl9mBN1xJoLxGiiufJlRRJ5rHMrMkJ19PgeoRi93HyOBpNpZvsXnnJx78Nc2DrRTLC5MszEzwx9x15q4MgqToH+ghQ5tLoacYX6RKQrufoihWK5r0LK3ozYUUukNitLg4+clH/H5jnOXZa6wmhthYn+Hi2V46Ww/x8dFmBo81wdo0X/R1k56zA0V14/CXiitUiTfyhGi2ZWSLvsCBK1AuWl0BHxzv4E7iF5LzN1mdPU9q7SbfDfXS1d5E17HDjL7fCpsJ+s70kJalxWC1Y3EGxFkUxRGMiSY71/AoDJRVS1a+wtvtb3H/3iLJ+eusz3/F5t3bjA738u6bjXS2v8qFjlcgdYuvB86QlpWDwWLH6gqI6ivF6omIJldvkzyDhWA0LvmKg5aWw/y9Pstmco6NpTFWV6a4MtTH8daX6GhrZuS9JkhOce6bfjKytegUG4rdLybVj2IvEo1OcUqmdicOf5kUuEp4/sALpJZm+HNtnvXF71lZ/JWxs6foOfoGJ9qaGT7yMvdnx7k4Okza9mxyDWbyjFYx2LwYbN6HoV0ytfkYrS6xuCLEa+pZnpt6FG79u8rm3TmSi5Ms3R5nYfoyiZHP2VqeYmJijG3pGejMKorqkR16hTzFJhp9gUuy843k6kxidUcojj7OvZUE//2TJLW2yNWJS1y7eonpGz/y28zPzCYmWU8mGB0ZIM9gptAbwR+tFYunmDyjWTRGq0d0Jgc7Taq4g5WEY/W89noLDfsPUF23j1j1PsLRON5AKeHSPZTG4sSfbGBPzbPY3CXY3GEcRTEJxvbiDFY+DL2iqAFcgQrxlVQRLK8nVPEMhb4Yqq+cQFktVXsPEYrWYbR6MFm9WJ1h/CU1lMf34w7sxmRzi+oro6y6Qf4HEg3ubA3pANUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;책&quot;
        title=&quot;책&quot;
        src=&quot;/static/7bc15e712feab494190429d5d9d54708/37523/books.png&quot;
        srcset=&quot;/static/7bc15e712feab494190429d5d9d54708/e9ff0/books.png 180w,
/static/7bc15e712feab494190429d5d9d54708/f21e7/books.png 360w,
/static/7bc15e712feab494190429d5d9d54708/37523/books.png 720w,
/static/7bc15e712feab494190429d5d9d54708/5a190/books.png 800w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;객체지향의-사실과-오해-독서회&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EC%9D%98-%EC%82%AC%EC%8B%A4%EA%B3%BC-%EC%98%A4%ED%95%B4-%EB%8F%85%EC%84%9C%ED%9A%8C&quot; aria-label=&quot;객체지향의 사실과 오해 독서회 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;객체지향의 사실과 오해 독서회&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;기간 : 일회성(약 2시간)&lt;/li&gt;
&lt;li&gt;성격 : 독서회&lt;/li&gt;
&lt;li&gt;인원
&lt;ul&gt;
&lt;li&gt;발표 : 4명&lt;/li&gt;
&lt;li&gt;참관 : 7명&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;목표 : 독서 인사이트 공유&lt;/li&gt;
&lt;li&gt;진행 방식 : 제한없는 자유발표 + 짧은 회고&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;정확한 날짜는 기억나지 않지만, 블랙잭 미션이 끝난 주의 금요일 저녁이었던 것 같다. 슬랙으로 신청을 받았는데, 신청 인원이 생각보다 저조해서 의기소침해져 있었다. 모집글에는 단 한 명만 신청해도 둘이서 진행한다고 써놓긴 했지만… 그런데 뜻밖에도 참관객이 많이 와서 기뻤다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABYlAAAWJQFJUiTwAAACjklEQVQoz03MXW/SYBjG8XtmOt0UI8scCqPAytiAwWBQSp/2edoChVJKaRl7YQtjGdXEuGXZHL7NuTk1Ln4AXw498CN4oNFkJybGGI/8PgYzo1d+p/8LsFXFps5WjFLT2loz6q2bzfZOc21p1V5YXjIXm/XV9blWc6FlP9i+212fz0HQAxNjp6IoEUXxMJ8UFG5jRZP0FZaosqjJfLmASjJbUJCazypMVqkbtU5DBtr9L6aZeJhjaSYmyMzmkoqJgrMlnlPy+aqQyIkZNRklolASkjkzV+qYGHzXYNzdu6DdgOv1eFHDlkVIamNeEZGCZmWeFOZUtaWpz21rq6bMlS0ujC0h39ERuEeAcoHPBX4XrN0/bO09bXcPCEpsmrLIyDhG2CSxF7UPDys/j6snB0YDl7NBvp6V7FIGRp293jMCY1ehvbu/snu4uvNIZOObVZEkCYniTAwbhv5xT//+wnxzR9fFIopgiyG2kganA0avgMvZI+nWrKSKFYukIpsVLCYwiQpokl8t5z/t61+Paq+3y0qhyIWQlSF2LgWOi+C8BMOXYdgBXp+P8oc8Xh+OhTYKjBjjSURgo7ihlT4/rn57ZrzrakWljCaQyZCOnISh8+AYBMdQzzQdiNL+SMAvxcO7K/NSHOMwz02JN8zGj2Pj10vzyxOznTfYIGcxpCMmYOAcXBjoGRwAJuBlxqlZ6nouObN/75k0IwlTHAkJulw6bKvdZelgvaYxMhdEVhp3cBz6++HsX2nKk6Y8Ka+bC9IaVxQmORzi5CmBoZnbt/ZevT+pFRookOZDvJUUbH4a+gDO9J1KjbnTfzAUlabiPJ0hE5w8yeMA0zbWjo/eWoJBxjNCkLcSyEZR+G+/AZ1eq8gpxF4GAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;독서회&quot;
        title=&quot;독서회&quot;
        src=&quot;/static/4a3e8b82e21079b6c67ca9c1de176329/37523/oop_study.png&quot;
        srcset=&quot;/static/4a3e8b82e21079b6c67ca9c1de176329/e9ff0/oop_study.png 180w,
/static/4a3e8b82e21079b6c67ca9c1de176329/f21e7/oop_study.png 360w,
/static/4a3e8b82e21079b6c67ca9c1de176329/37523/oop_study.png 720w,
/static/4a3e8b82e21079b6c67ca9c1de176329/302a4/oop_study.png 1080w,
/static/4a3e8b82e21079b6c67ca9c1de176329/c1b63/oop_study.png 1200w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;발표 인원이 4명 뿐이라 별도의 시간 제한 없이 자유로운 발표로 진행했다. 객체지향이라는 넓은 주제를 다루는 책이라, 자유발표여도 각자 발표의 중점이 다르기를 기대했다. 역시나 각기 다른 생각을 들을 수 있어서 좋았다. 다만 가벼운 마음으로 오라고 했는데 웬걸, 나 빼고 다들 프레젠테이션을 준비해오셔서 민망했다.&lt;/p&gt;
&lt;p&gt;발표가 끝나고 짧은 회고를 가졌다. 참관한 분들 중에 책을 덜 읽은 분도, 안 읽은 분들도 계셨다. 원래는 따로 참관을 받을 생각이 없었다. 정확히는 참관이 있을 거라는 생각을 못했다. 그런데 참관한 분들이 많은 도움이 되었고 재밌게 들었다셔서, 앞으로 이런 스터디를 열 때는 참관객 환영을 꼭 써놔야겠다.&lt;/p&gt;
&lt;p&gt;아쉬운 점. 그날 발표한 것 중에 완전히 잘못 이해하고 틀리게 발표한 내용이 있었다…😳 죄송합니다. &lt;code class=&quot;language-text&quot;&gt;정적 타입/동적 타입&lt;/code&gt; 관련해 상태 패턴을 예시로 들었는데, 완전히 틀린 맥락이었다. 이걸 어제 포스팅을 위해 책을 다시 훑어보며 깨달았다. 일회성이라 그런지 이것 빼고 운영 면에서 아쉬운 점은 없다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;컵라면-3개-스터디이펙티브-자바&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%BB%B5%EB%9D%BC%EB%A9%B4-3%EA%B0%9C-%EC%8A%A4%ED%84%B0%EB%94%94%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C-%EC%9E%90%EB%B0%94&quot; aria-label=&quot;컵라면 3개 스터디이펙티브 자바 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;컵라면 3개 스터디(이펙티브 자바)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;기간 : 2월 21일 ~ 4월 5일&lt;/li&gt;
&lt;li&gt;성격 : 요약설명&lt;/li&gt;
&lt;li&gt;인원 : 15명&lt;/li&gt;
&lt;li&gt;목표 : 책 훑어보기&lt;/li&gt;
&lt;li&gt;진행 방식 : 하루 3명, 5분 내외의 아이템 요약 발표 + 중간, 마지막 회고&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;줌 강의를 듣다 종종 이펙티브 자바 관련 내용이 나올 때, 구구가 채팅창에 아이템을 집어주는 걸 보고 만들기를 결심했다. 이펙티브 자바 책을 우테코에 들어와서 처음 알았다. 그런데 양과 난이도가 만만치 않았고, 그 내용이 필요할 때가 아니면 읽어도 와닿지 않았다. 그래서 &lt;code class=&quot;language-text&quot;&gt;이런 내용을 담은 아이템이 책에 존재한다고 책을 파악&lt;/code&gt;하는 걸 목표로 잡았다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdaQCP/EABUQAQEAAAAAAAAAAAAAAAAAAAAh/9oACAEBAAEFAlV//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BR//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABUQAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAE/IWn/2gAMAwEAAgADAAAAEPPv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QQ//EABoQAQADAAMAAAAAAAAAAAAAAAEAETEhQVH/2gAIAQEAAT8QD5mQp1jcULwM/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;information&quot;
        title=&quot;information&quot;
        src=&quot;/static/6599b0ca9470dbb8d01b73bf5d1d3f9a/80e3c/information.jpg&quot;
        srcset=&quot;/static/6599b0ca9470dbb8d01b73bf5d1d3f9a/4ec73/information.jpg 180w,
/static/6599b0ca9470dbb8d01b73bf5d1d3f9a/158ba/information.jpg 360w,
/static/6599b0ca9470dbb8d01b73bf5d1d3f9a/80e3c/information.jpg 720w,
/static/6599b0ca9470dbb8d01b73bf5d1d3f9a/66a2c/information.jpg 1021w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Data에서 Information단계로 가기라 할 수 있다. 기간이 긴 만큼 시간을 짧게 설정했다. 애초 계획은 3분 x 3인 발표 = 9분 이었으나, 지나치게 촉박해 조정하다 보니 끝날 때는 컵라면 8개 스터디 쯤 되었다. (자꾸 그 쪽 스터디는 컵라면이 불어 터진다던데 하고 놀리는 크루가 있었다 🙄)&lt;/p&gt;
&lt;p&gt;개설할 때 계획과 달리, 중간에 노션에서 깃헙 레포로 이주하게 되었다. 초반에 글을 옮기느라 약간 품이 들었다. 하지만 옮기고 나니 옮기길 잘했다는 생각이 백번 든다. 15명이 한땀 한땀 쓴 &lt;a href=&quot;https://github.com/woowacourse-study/2022-daily-effective-java&quot;&gt;핸드북&lt;/a&gt;은 쭉 유용하게 쓰일 것 같다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGUlEQVQozx3CW2+TUAAAYH6PDy5m3A7ncLhT4FAKhVIu5U7bTdwSW7t0W3SZl2XJ1GTGxYc96Yv64H80+uWjCC86/7tA9AFOEC4hnCviTEaBBGYKDBUYY7GRcC5rgYDHiqEu15fPm7N1Qdk8crh/CYd8gOYCrDgms0kdxL0/PW2mi8grCekQyiV5woupOUqqtd8V8bKmLE6wGMFmBIcRPBZEHFextKPqKQlWhBTV7MXLo8166EWYI3HCw0RTT5PMiHInyigPoghLPhIDiOYYVRgWHB3pyrt69GPn3r1wz44CT3FawC0g9IFgs8DhBcIKDguoIbAu26Abj449a5+Sr8O04ZlMlz8eud837p8L937pTYDRAi7nWV8zvTCuk6jN4jaLqaUjnzTjXWZfLeyLbvyhJmvImkDZpONfO+f33ruMNPNA7CC3YA8D04oW5fshvT3JboaMKnXxPBt9G4zHQfu0sl7HozXkHB3vO+tx6/48964Lw+flBrA5/SzQDD+Z96XdN25fu1SlgvNUv1+qDyv1rjevYrOH7MzA29K6Hty3A9mmo9hwGoErDg9CVbPnU2ZrPj32nrRjqpTZ/Uz+3EhfOum20a8iveXpDTF388mmjErfzhzSxUUv8LkKQ9e2Qp85M1GH9cSgKom+iPFDhx6X4k0lvwm1FaRriGNOmUIphNJMUEss1/ThxNQD37UnHv1KtVZKlZZ/AcB9wEz3WLC/AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;컵삼스&quot;
        title=&quot;컵삼스&quot;
        src=&quot;/static/6b4c33d71e9db64a584f378f64438cee/37523/effective_java_study.png&quot;
        srcset=&quot;/static/6b4c33d71e9db64a584f378f64438cee/e9ff0/effective_java_study.png 180w,
/static/6b4c33d71e9db64a584f378f64438cee/f21e7/effective_java_study.png 360w,
/static/6b4c33d71e9db64a584f378f64438cee/37523/effective_java_study.png 720w,
/static/6b4c33d71e9db64a584f378f64438cee/00d43/effective_java_study.png 1000w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;아쉬운 점. 수업과 관련된 아이템을 공유하려고 했는데 흐지부지 되었다. 문제는 Data -&gt; Information의 단계기에 코치가 아이템을 집어주지 않는 이상, 수업을 듣고 내가 아이템을 찾아내기는 힘든 것에 있었다. 특히 내가 발표하지 않은 아이템은 더 그랬다. 애초 스터디의 성질과 어긋나는 목표였던 것 같다. 오히려 스터디가 끝난 지금 대강 내용을 아니, 레벨2 수업을 들으면서 생각나면 스터디원들과 공유할까 한다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;종합-회고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A2%85%ED%95%A9-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;종합 회고 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;종합 회고&lt;/h2&gt;
&lt;p&gt;나는 낯을 많이 가린다. 그래서 레벨1 초기에 다른 사람이 먼저 스터디를 열었다면 고민만 하다 가지 못했을 것 같다. 이런 성격을 정면돌파하려고 스터디를 개설하면서도 누가 오긴 할까 걱정이 많았다. 그런데 다들 열심히 참가해주셔서 놀랐다. 특히 거의 6주에 걸친 이펙티브 자바 스터디를 무사히 마칠 수 있었던 건, 전적으로 그 기간 동안 성실히 참여해주신 14명의 크루들 덕분이다. 우테코가 아니었다면 이렇게 좋은 스터디원을 만나기 쉽지 않았을 것이다. 회고에서 감사하다는 말을 과분하게 많이 들었는데, 오히려 반대였다고 진심으로 생각한다.&lt;/p&gt;
&lt;p&gt;레벨2에서도 적당한 책이 있다면 스터디를 한 개 쯤은 더 열어보고 싶다. 각 책에 따른 스터디의 성격과 목표를 분명히 설정했기에 괜찮은 마무리를 맺을 수 있었다 본다. 필독서 목록이 나오면 고민해봐야겠다.&lt;/p&gt;
&lt;p&gt;아, 테코톡에 대한 극심한 공포가 있었는데 두 스터디로 많이 나아졌다… 스터디 때도 언급했지만 테코톡이 &lt;strong&gt;너무!&lt;/strong&gt; 무서워서 스터디를 더 열심히 열었다. 지금은 스터디 자체가 즐겁다. 정말입니다.😉&lt;/p&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EC%9D%98-%EC%82%AC%EC%8B%A4%EA%B3%BC-%EC%98%A4%ED%95%B4-%EB%8F%85%EC%84%9C%ED%9A%8C&quot;&gt;객체지향의 사실과 오해 독서회&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%BB%B5%EB%9D%BC%EB%A9%B4-3%EA%B0%9C-%EC%8A%A4%ED%84%B0%EB%94%94%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C-%EC%9E%90%EB%B0%94&quot;&gt;컵라면 3개 스터디(이펙티브 자바)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%A2%85%ED%95%A9-%ED%9A%8C%EA%B3%A0&quot;&gt;종합 회고&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[객체지향의 사실과 오해 (내 블랙잭은 왜 망했을까)]]></title><description><![CDATA[…]]></description><link>https://hyewoncc.github.io/the-essence-of-object-orientation/</link><guid isPermaLink="false">https://hyewoncc.github.io/the-essence-of-object-orientation/</guid><pubDate>Mon, 18 Apr 2022 09:45:00 GMT</pubDate><content:encoded>&lt;p&gt;객체지향의 사실과 오해는 널리 알려진 개발자 필독서 중 하나로, 김영한님의 인프런 강의를 듣다 알게 되었다.&lt;/p&gt;
&lt;p&gt;그 후로 책을 긴 텀을 두고 네다섯번 정독했다. 읽기 쉽고 가벼운 책이기도 하고, 경험치가 누적됨에 따라 새로 발견하는 것이 있었기 때문이다. 이 책은 우아한테크코스의 레벨1 필독서에 포함되어 있다. 블랙잭 미션을 마치고 충격과 실의에 빠져 &lt;code class=&quot;language-text&quot;&gt;나는 여전히 객체지향을 모른다&lt;/code&gt;는 생각에 책을 다시 펼쳤다. 그래서 이 글은 책의 전체 내용 보다 특정한 주제와 그에 따른 의견을 중심으로 쓰여졌음을 양해바란다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;내 블랙잭 미션은 왜 망했을까?&lt;/strong&gt; 네오의 강의에서 &lt;code class=&quot;language-text&quot;&gt;상태 패턴&lt;/code&gt;을 배우고, 이 책을 다시 읽기 전까진 미션의 패인을 &lt;code class=&quot;language-text&quot;&gt;디자인 패턴을 몰라서&lt;/code&gt;라 생각했었다. 만약 나와 비슷한 생각을 가진 사람이 있다면 흥미롭게 읽을 수 있을 것이다.&lt;/p&gt;
&lt;h2 id=&quot;이-책을-읽기-전에&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B4-%EC%B1%85%EC%9D%84-%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%97%90&quot; aria-label=&quot;이 책을 읽기 전에 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;이 책을 읽기 전에…&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 120%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFWUlEQVQ4yyWP+VdSCRiG7983ZzrNZCopNU3LObPkZB6zDCRFISFXFBUUlEXAQFBBAeVeSFBCFA1ZlR2BQLgsFy6LwJ2jfef58Xu+93sB3R4I6QygzgBB+xC0D4JGPXigh0ygbn9Xa9BqIK1Gr9GAajWoUu0qlRrl5o5SqVZtqVVb24BWrdPpDHu6ryBohCATCBoNhkMIvEWnM2o1epVqT6na29rUqlS7W0qNXKGSybYUcqVcrgQ06r07+TYTAg90OtPdiQOD3mw0Wg4PrCfHdqfzwucPxRNJp9MrlSql0i3pl02ZdBPQqHXaXQjSm05s53a7x+32h0KxeDwFZ/MltFKt1euNJnY3KFoJBqIS8dba2uaaRCERy4Gd7d3t7b1IJJ5MZeLx1I9k+udqo4nVG7fUbrCberPZxCqVajgcE/BlAr5MLJKLRHJAqdRsKNTBQMzvj3q9Ia83VEJvsvlcrlBoNLFqFatUm7UadnOXH4ulWCwJnyddFcpWhevA5oZaItlwnF8mEhmn2+90B1PptMkodNqFqfQVWrlNrtawWu1OjsMT0/xljpjH+yLgywDFukos2rCduNJw0WI9v/BFi+VGGo5HIwb7d3EwqAsETsqVRrWG1etYLldaZAvmmTwuR8zlrgEyqVIsUphMtkQqf3LquvBF4Xy52sCQctPj3TGbGcdHC6nrEFppVKtYFqlOznKZsyucJTGXswasiTeEgvXd3YPIVcbhCngvr66zaLmOFSv1bxaR/XwpFNqJJYL2s7UcUsmjjWWucGaaw2YJ2SwhIBIqBPx1uVwbTcB2V+Dk7CKaSOWKpWjM4/HyddDkoVmUiB953CqkfPuOWCibGGczZ1fm53iAgC/j82WiVUU8mU+m0XgSgfPVH9dp04EwGBJZrCy9YerCK05e+4oVDEEbq8INOm1uhsGdYXCB2+oc8TJXEgynimWsUGoiKFZAseu05eyM7XDyXK6lr/vybAFFUAxBm1zpLoU6MzW5yJhaAjiLq5wlIZslcLvDRRSD87V8sV5AsauYy3e54vUJXE5WMKDPwNV8oV4qYxLxDnlofHx8YWJsAVhkC9hsPnOWe3LsLKEYUm7kkJtCEQtH7NbjOad75dA8ZT1WZvMVOFdDK9iWSPORSKfTmZ/pcwCbxWOx+IyxWavuawPD/N/dV1cZpIRdXLpOz9iH35jWY6ZeP3edKd3KZUyrBQcI1E+fZkZHZwDW/PLsPH+BQtdzluyg/vPzv2w2D1rBDs0mm23m3MEBQdqpTZLOlDPZKlrB9PpD4gcqhTJFpUwDc7Nc5uS87NPIKrFvCNc6SxmP/UAy2WooErYe8SGIZrXMR6PhfKGZhsslFDMZT4mE0WHyBGVkCpieXlym0SSEtwT8402pKp4owHDlOl0sIE2fPwyBjFPbF8e5Gc6V0zBaLDWPLE7SAI08NEYmjwGMMcYKhUT959+udlwikc/nbmAYzWbLcLZcKDb8PrPHc4Qg5QJSKxRqqVT+9NQzSPo8+JE+NEgH2LRPvKH+4ZcvqE/xPpc/mcxHwolwKOb3Ry4vwx5vwOFwud0+p8Prcl44HRfGfQt5kP6RNDpIGgUktIE1KnGl7w2362/a27dv/nvz7PGfHW0d7S3trS2trS2tbS1trQ9aH/724Cn+2Qh5/NYkUklE6gCBAiinh8QUAuXlkxf3fmm992vL/fud7Tg8Dt/5k0f4Dhy+A9eJa3v0/OlLEoFCIlAGCCOE92Ri/zCgnqHwyf19T3CdLb/jHj78A4/v7urp7urt7up9/aq3+1Vvz+u+ntfvurt6e7rfDxApAx+Gif1kwrshwrvB/wH6IiHDws7MYwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;책&quot;
        title=&quot;책&quot;
        src=&quot;/static/6e6c454993821c7467914ed1cf449aeb/0a47e/book.png&quot;
        srcset=&quot;/static/6e6c454993821c7467914ed1cf449aeb/e9ff0/book.png 180w,
/static/6e6c454993821c7467914ed1cf449aeb/f21e7/book.png 360w,
/static/6e6c454993821c7467914ed1cf449aeb/0a47e/book.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;무언가를 설명함에 있어 비유는 때때로 혼란을 일으킨다. 객체지향을 설명코자 나온 많은 비유가 오히려 입문자들에게 잘못된 관념을 심고 있다. 조부모-부모-자식과 자산의 흐름 또는 동물계의 분류와 하위 특정 종으로 나타내는 상속에 대한 부적절한 설명이 그 중 하나다. &lt;!--more--&gt; 이 책은 &lt;code class=&quot;language-text&quot;&gt;이상한 나라의 엘리스&lt;/code&gt;에 대한 비유로 내용을 이끌어나간다. 지은이는 비유를 쓰면서도 우리 입문자들이 자칫 틀린 관념에 빠질까 시시때때로 비유의 바다에서 건져내는 환기 작업을 해준다. 비유에만 몰입하다 길을 잃지 말고, 자신만의 통찰을 얻길 바란다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2 id=&quot;새로운-객체지향-실천-지침&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%EC%8B%A4%EC%B2%9C-%EC%A7%80%EC%B9%A8&quot; aria-label=&quot;새로운 객체지향 실천 지침 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;새로운 객체지향 실천 지침&lt;/h2&gt;
&lt;h3 id=&quot;실세계를-떠나기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%A4%EC%84%B8%EA%B3%84%EB%A5%BC-%EB%96%A0%EB%82%98%EA%B8%B0&quot; aria-label=&quot;실세계를 떠나기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;실세계를 떠나기&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;객체지향의 목표는 실세계를 모방하는 것이 아니다. 오히려 새로운 세계를 창조하는 것이다.&lt;br&gt;
p.21&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;객체지향 프로그래밍을 하다 나오는 많은 실수는 &lt;code class=&quot;language-text&quot;&gt;실세계를 프로그램에 완벽히 대응&lt;/code&gt;시키려는 시도에서 나온다. 실세계의 현상과 우리가 개발하려는 로직은 결고 일대일로 대응할 수 없으며, 그렇게 해야 할 이유도 없다. 우리는 이미 무의식중에 존재하지 않는 새로운 세계를 훌륭히 창조하면서도, 때때로 능력을 잊고 실세계를 대입하다 망치곤 한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVQY01WQ3WvTUADF8zd2+IWbKJM9lGVb0YEfOF3XDWUprTRTW9OsY7OtoEydnUvDkL3oQ6VC8mJBI7fk4/Zrpbttvu41V5bgg7+H83A4cDiH+RMShFBKMca9Xg9CeDo49T2fhialNMrQ/2EopZE7Pjur1w6KhWdryYeLLLv1vCjsvdl9/f7dwSG0YJQOgoBgHAQBDpX52WrJn45qHw6Fwvbmk3Sp9EqSPkvyibhTrr6tvRCrGV4Qxcrx8Ynv+5PxWNd1RVEG/b7rusxqckMQd5pN5VtT/fL1e1Hcu3f/US6X5zazaS6bWnucSfPr69yli9PykWTbtqKojUbjl6Y5jsPM3ozzfP5plt8WSneX76Q2UtdvXLt6+cryrdsL82xiMTE3O7e0lIjH52Wp7nle60dL13WEUNi8mpyKTa08WMlw3IVYjF1g84WCKLzcyvGVclmu1/kcPz0zs7//Ef9bG3G+GWMMAHBd1/U8VVUrlaqm/Y7uJYScP0QIAGDQHziOM5lMbNt2QwghTLfbHQ6HhmGYpglhZzQaQWhBCE3T1DTNMAwAAEKo0+kAAHRdb7fbpmlaloUQ+gvrD3uZ8RiR2gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;폰자동차&quot;
        title=&quot;폰자동차&quot;
        src=&quot;/static/71706ada79a85b1d43d3199264e89798/37523/von_car.png&quot;
        srcset=&quot;/static/71706ada79a85b1d43d3199264e89798/e9ff0/von_car.png 180w,
/static/71706ada79a85b1d43d3199264e89798/f21e7/von_car.png 360w,
/static/71706ada79a85b1d43d3199264e89798/37523/von_car.png 720w,
/static/71706ada79a85b1d43d3199264e89798/5a190/von_car.png 800w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/woowacourse/java-racingcar&quot;&gt;자동차 경주 미션&lt;/a&gt;에서 크루들이 구현한 &lt;code class=&quot;language-text&quot;&gt;Car&lt;/code&gt;객체는 실세계의 자동차와 결코 일대일로 대응하지 않는다. 이 자동차는 실세계의 자동차가 아니다. 상상 속 자동차 경주 세계에 존재하는 &lt;code class=&quot;language-text&quot;&gt;자동차 역할을 해 줄 새로운 창조물&lt;/code&gt;이다. 이 폰자동차에 모델, 가격, 연비, 출력, 엔진 따위는 필요없다. 폰자동차가 전진(후진도 좌회전도 유턴도 불가능하다)할 때 필요한 건 숫자 하나 뿐이다. 낮은 차원에서 훌륭히 작동하는 창조력은 복잡한 문제로 넘어가면 고장나기 시작한다.&lt;/p&gt;
&lt;p&gt;폰자동차가 전진할 때 랜덤 숫자가 필요하다. 여기에 &lt;code class=&quot;language-text&quot;&gt;실세계의 랜덤&lt;/code&gt;을 가져오는 시도는 테스트가 불가능한 구조로 이어진다. 실세계의 로또 추첨이 완전한 우연으로 이루어 지기에, 폰로또에 우연을 넣는 시도도 같은 실패로 끝난다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;그러나 인간의 인지 능력은 물리적인 한계를 넘어 개념적으로 경계 지을 수 있는 추상적인 사물까지도 객체로 인식할 수 있게 한다.&lt;br&gt;
p.41&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;앞선 실패에서 과연 &lt;code class=&quot;language-text&quot;&gt;전략 패턴&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;의존객체 주입&lt;/code&gt;을 몰랐던 것 만이 문제였을까? &lt;code class=&quot;language-text&quot;&gt;숫자 하나를 제공하는 것&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;여섯자리 숫자를 만드는 것&lt;/code&gt; 같은 추상화된 &lt;code class=&quot;language-text&quot;&gt;역할&lt;/code&gt;을 인식함이, 전략 패턴과 의존객체 주입 공부에 앞섰어야 했다는 것을, 이 책을 다시 읽으며 깨달았다. 폰자동차에 불필요한 실세계 자동차의 모든 요소를 깨끗히 잊은 것 처럼, 이도 실세계를 떠나야 가능한 인식의 전환이다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;행동을-앞서-생각하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%96%89%EB%8F%99%EC%9D%84-%EC%95%9E%EC%84%9C-%EC%83%9D%EA%B0%81%ED%95%98%EA%B8%B0&quot; aria-label=&quot;행동을 앞서 생각하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;행동을 앞서 생각하기&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;객체를 결정하는 것은 행동이다. 데이터는 단지 행동을 따를 뿐이다.&lt;br&gt;
p.95&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;객체지향의 특성을 검색하면 &lt;code class=&quot;language-text&quot;&gt;캡슐화, 상속, 다형성, 추상화&lt;/code&gt;와 함께 이를 구현하는 법이 나온다. 나는 프로그래밍을 파이썬으로 시작했다. 그 때 객체지향을 처음 알게 되면서, 앞선 특성들과 구현법에 대해 배웠다. 하지만 근본에 대한 이해가 없으니 기계적으로 따라할 뿐, 객체지향의 장점에 대해 체감할 수 없었다. 책에서 설명하는 객체지향의 본질을 이해하고 나니, 애초에 저 네가지 특성이 동등한 무게를 가진 것 처럼 병렬해 적는 것이 틀린 일로 여겨진다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력을 **다형성(polymorphism)**이라고 한다.&lt;br&gt;
p.28&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;서로 다른 객체들이 다형성을 만족시킨다는 것은 객체들이 동일한 책임을 공유한다는 것을 의미한다.&lt;br&gt;
p.151&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;다형성을 구현 중점으로 공부했기에 위와 같은 생각을 하기 어려웠다. 인터페이스를 작성해 오버라이딩 했기에 여러 객체의 구현을 사용할 수 있는 것이 아니다. 특정한 &lt;code class=&quot;language-text&quot;&gt;행동&lt;/code&gt;을 수행하는 &lt;code class=&quot;language-text&quot;&gt;타입&lt;/code&gt;을 인터페이스로 정의했기에, 타입에 속하는 여러 객체가 누구든 그 자리에 들어가 일할 수 있는 것이다. 두 문장이 차이가 없어 보일 수도 있다. 하지만 &lt;code class=&quot;language-text&quot;&gt;숫자 하나를 제공하기&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;여섯자리 숫자를 만들기&lt;/code&gt; 같은 &lt;code class=&quot;language-text&quot;&gt;행동&lt;/code&gt;을 먼저 추출하지 못했기에 인터페이스를 활용할 수 없었던 것이, 자동차 경주와 로또 미션이 지나고 든 아쉬움이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;객제지향에서 일반화/특수화 관계를 결정하는 것은 객체의 상태를 표현하는 데이터가 아니라 행동이라는 것이다. … 결국 객체의 일반화/특수화 관계에 있어서도 중요한 것은 객체가 내부에 보관한 데이터가 아니라 객체가 외부에 제공하는 행동이다.&lt;br&gt;
p.98&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;객체가 역할을 대체하기 위해서는 행동이 호환돼야 한다는 점에 주목하라. … 결국 객체는 협력 안에서 역할이 수행할 수 있는 행동을 그대로 수행할 수 있어야 한다. … 요약하면 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미한다.&lt;br&gt;
p.127&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;상속을 가계도나 동물 분류도에 비유하는 것을 틀렸다고 한 이유가 여기에 있다. 또, 객체지향의 네 가지 특성을 병렬해 적는 것이 껄끄럽게 느껴지는 이유기도 하다. 실세계를 떠나기와 합쳐, &lt;code class=&quot;language-text&quot;&gt;행동&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;책임&lt;/code&gt;을 추출하는 &lt;code class=&quot;language-text&quot;&gt;추상화&lt;/code&gt;를 먼저 탐구하면, 나머지는 훨씬 쉽고 자연스럽게 이해할 수 있다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;그래서-내-블랙잭은-왜-망했을까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B7%B8%EB%9E%98%EC%84%9C-%EB%82%B4-%EB%B8%94%EB%9E%99%EC%9E%AD%EC%9D%80-%EC%99%9C-%EB%A7%9D%ED%96%88%EC%9D%84%EA%B9%8C&quot; aria-label=&quot;그래서 내 블랙잭은 왜 망했을까 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;그래서 내 블랙잭은 왜 망했을까?&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;객체지향에 갓 입문한 사람들이 가장 쉽게 빠지는 함정은 상태를 중심으로 객체를 바라보는 것이다.&lt;br&gt;
p.64&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;실세계의 카드패를 떠올려보자. 내 손 안의 카드패는 게임 진행이라는 시간축에 따라 상태가 바뀐다. 처음에 ♠K, ◆4를 받았다. 합이 14이니 힛이다. 카드를 한 장 더 뽑으니 안타깝게도 ♥8이 나왔다. 카드패는 버스트가 되었다. 실세계의 카드패와 상태에 생각이 메어있기 때문에, 시간 흐름에 따라 상태가 변하는 단일한 객체를 떠올리기 쉽다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVQoz2Pgk5Llk5ThlZDiEhbll5CQUFJQ0NKU1VCXUlVm5eVlYGVn4eWTVZZVUZIKMVfMddEIt9B20VGx1VB001Vl4AXrBGkWEROUlJBSUZRQUnT09kwryM8sKimvqevu6kpJjDXU0eDl5VaWEfMx1ir1sk1xNA821WfglZIFaRaX5BIVF5aRllFVklBWWrV8+f+vX76+fvnw7p0Tj57f+/Dl+o0bM2fOkFeUFxYVMVWVDzXXjbIyYuCVluOTkuOTkOYWkxCWlZFSklc31N+ze/fBvdtunD629fCZnvW7+/efPP/64+qVK2SlxGRkpeSkJU3VFCy1lRl4JaVB+mXkeCWkhGRlBaQlzWxtD505mzVr2rajJ0M65rbNX9u9ePOJsxd1jYx4hUVEJCV5RcR4RUSFxMUZuMUkeCSk+GUV+KRlBaRlZBVl4xLj7j16cv/h/ezu+YoV/WFLNq0/cbm2plpAWEBJRUlGXk5MQlxUVJRfWISBW1ScS0SMV0KKX1qOS0wqzs1yXknigeWL7p87uW/DyqKOiXnTVm5ct8HGwT48JjY6JjonJ7e+vTuqqKq2rZuBR0yCS0SMS0SUR1yCR1JaRVHBR1811lgvy8360eKag7PaH964mRYbrmNouPfwsXOH9x3duePw4UNr9mw+fu48A4+4JNhyUah+MQkPPa0IPa0ZxXG3V3RMzw5Z2ZS3oiFDT1PJzcWuvLJ8y46dGzau27xmyaUb10F+hiKQ/SI8YhJaSoppNsa3VzTfnF+9pDBoYor79LzgRD9HNwcLFxtjY111SytzY1MzX/8ABl5xSUgigcQ2t5gYj4iEnYHWgrqUEF83OxuLJC+LJBe9wsSghpL07ISQ6ED3+FCvIA97ewsDALUqzLBSRSY3AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;카드패&quot;
        title=&quot;카드패&quot;
        src=&quot;/static/bd52bb24acf0865d62f264bcfb263184/37523/cards.png&quot;
        srcset=&quot;/static/bd52bb24acf0865d62f264bcfb263184/e9ff0/cards.png 180w,
/static/bd52bb24acf0865d62f264bcfb263184/f21e7/cards.png 360w,
/static/bd52bb24acf0865d62f264bcfb263184/37523/cards.png 720w,
/static/bd52bb24acf0865d62f264bcfb263184/1cfc2/cards.png 900w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;내 손의 실재하는 카드패는 갑자기 다른 카드패로 교체되지 않으며, 카드를 &lt;code class=&quot;language-text&quot;&gt;받는&lt;/code&gt;주체는 게임 참가자인 나 이다. &lt;code class=&quot;language-text&quot;&gt;상태 패턴&lt;/code&gt;을 몰랐던 것 만이 문제가 아니다. 이런 생각이 블랙잭에서 행동과 메시지를 분리하지 못하게 했다.&lt;/p&gt;
&lt;p&gt;폰카드패-힛은 카드를 주면 자신의 상태를 판별한다. 21이 넘으면 폰카드패-힛은 자신의 데이터를 넘겨주고 폰카드패-버스트를 만들어낸다. 폰카드패-버스트는 카드를 주면 예외를 던진다. 상상 속 블랙잭 세계의 &lt;code class=&quot;language-text&quot;&gt;행동&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;카드를 받는 것&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;메시지&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;상태&lt;/code&gt;가 된다. 행동이 상태를 결정하는 것이다. 각 객체는 진행 흐름과 무관하게 존재하며, 다만 게임에서 요청하는 행동에 대해 메시지를 던질 뿐이다.&lt;/p&gt;
&lt;br/&gt;
&lt;h3 id=&quot;번외-구현-기능-목록-왜-적어야-할까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8-%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EB%AA%A9%EB%A1%9D-%EC%99%9C-%EC%A0%81%EC%96%B4%EC%95%BC-%ED%95%A0%EA%B9%8C&quot; aria-label=&quot;번외 구현 기능 목록 왜 적어야 할까 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;번외. 구현 기능 목록, 왜 적어야 할까&lt;/h3&gt;
&lt;p&gt;프리코스를 포함한 우테코 미션에서는 &lt;code class=&quot;language-text&quot;&gt;기능을 구현하기 전에 구현할 기능 목록을 정리할 것&lt;/code&gt;이 필수 요구사항이다. 처음에는 아래와 같이 클래스 별로 넣으려는 기능을 적었다.&lt;/p&gt;
&lt;ul class=&quot;contains-task-list&quot;&gt;
&lt;li&gt;Car&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 숫자가 5 이상이면 전진한다&lt;/li&gt;
&lt;li&gt;Game&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 우승자를 찾는다&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그랬더니 클래스 별로 구현 기능을 적지 말라는 피드백이 메일에 있었다. 그래서 그 때 부터 레벨1을 진행하며 쭉 합쳐서 적긴 했지만, 여기에 의문을 가진 적은 없었다. 하지만 책에서 객체지향 시스템 설계 절차를 읽고 나니, 구현 기능 목록을 작성하는 이유를 알 수 있었다. &lt;code class=&quot;language-text&quot;&gt;시스템 책임&lt;/code&gt;에 해당하는 구현 기능 목록을 먼저 파악하고 적으면서 자연스레 이 절차를 따르게 된 것이 신기하다. 우테코는 다 계획이 있군요.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;협조적이고 성실한 객체 시민들로 구성된 객체지향 시스템을 설계하는 절차의 요약&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;시스템 책임을 더 작은 책임으로 분할한다.&lt;/li&gt;
&lt;li&gt;분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.&lt;/li&gt;
&lt;li&gt;객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.&lt;/li&gt;
&lt;li&gt;해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;p.133&lt;/p&gt;
&lt;/blockquote&gt;
&lt;br/&gt;
&lt;h2 id=&quot;나는-여전히-객체지향을-모른다&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%82%98%EB%8A%94-%EC%97%AC%EC%A0%84%ED%9E%88-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EC%9D%84-%EB%AA%A8%EB%A5%B8%EB%8B%A4&quot; aria-label=&quot;나는 여전히 객체지향을 모른다 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;나는 여전히 객체지향을 모른다&lt;/h2&gt;
&lt;p&gt;처음 이 책을 읽을 때는 동화책을 읽듯 했던 것 같다. 객체지향 자체를 공부한 게 처음이라 쉬운 비유로 쓰인 설명이 잘 읽혔다. 그 다음에는 캡슐화, 추상화를 주의깊게 보았다. 아마 자바 인터페이스를 처음 작성해 본 후였던 듯 싶다. 그리고 프리코스를 진행하며 다시 읽고, &lt;code class=&quot;language-text&quot;&gt;객체 간 메시지를 주고 받는다&lt;/code&gt;는 개념과 그 중요성을 배웠다. 이번 독서에서는 &lt;code class=&quot;language-text&quot;&gt;새로운 세계를 창조하기&lt;/code&gt;가 큰 주제였다. 이 책을 굳이 여러번 읽는 걸 이상하게 생각하는 사람도 있었다. 하지만 나는 손을 한 번 데어 봐야 불이 뜨겁다는 걸 조심하는 사람이어서, 객체지향의 벽에 부딪혔을 때 마다 책에서 새로운 교훈을 얻을 수 있었다. 나처럼 레벨1을 진행하며 객체지향의 벽에 부딪혀 막막해져 본 모두에게 새삼 이 책을 추천한다.&lt;br&gt;
이 책을 다시 꺼낼 날이 언제가 될 지는 모르겠지만, 그 때도 분명 새로 와닿는 게 있을 것이다. 그래서 이 말로 글을 마치려 한다. 나는 여전히 객체지향을 모르겠다.&lt;/p&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%9D%B4-%EC%B1%85%EC%9D%84-%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%97%90&quot;&gt;이 책을 읽기 전에…&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%EC%8B%A4%EC%B2%9C-%EC%A7%80%EC%B9%A8&quot;&gt;새로운 객체지향 실천 지침&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%EC%8B%A4%EC%84%B8%EA%B3%84%EB%A5%BC-%EB%96%A0%EB%82%98%EA%B8%B0&quot;&gt;실세계를 떠나기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%ED%96%89%EB%8F%99%EC%9D%84-%EC%95%9E%EC%84%9C-%EC%83%9D%EA%B0%81%ED%95%98%EA%B8%B0&quot;&gt;행동을 앞서 생각하기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EA%B7%B8%EB%9E%98%EC%84%9C-%EB%82%B4-%EB%B8%94%EB%9E%99%EC%9E%AD%EC%9D%80-%EC%99%9C-%EB%A7%9D%ED%96%88%EC%9D%84%EA%B9%8C&quot;&gt;그래서 내 블랙잭은 왜 망했을까?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8-%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EB%AA%A9%EB%A1%9D-%EC%99%9C-%EC%A0%81%EC%96%B4%EC%95%BC-%ED%95%A0%EA%B9%8C&quot;&gt;번외. 구현 기능 목록, 왜 적어야 할까&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%EB%82%98%EB%8A%94-%EC%97%AC%EC%A0%84%ED%9E%88-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EC%9D%84-%EB%AA%A8%EB%A5%B8%EB%8B%A4&quot;&gt;나는 여전히 객체지향을 모른다&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content:encoded></item></channel></rss>